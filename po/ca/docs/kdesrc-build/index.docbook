<?xml version="1.0" ?>
<!DOCTYPE book PUBLIC "-//KDE//DTD DocBook XML V4.5-Based Variant V1.1//EN" "dtd/kdedbx45.dtd" [
  <!--
    Documentation for kdesrc-build.
    Copyright (c) 2005-2008, 2010-2022 Michael Pyne <mpyne@kde.org>

    Copyright (c) 2005 Carlos Leonhard Woelz <carloswoelz@imap-mail.com>
    Copyright (c) 2009 Burkhard Lück <lueck@hube-lueck.de>
    Copyright (c) 2007, 2011 Federico Zenith <federico.zenith@members.fsf.org>
    Copyright (c) 2009-2011 Yuri Chornoivan <yurchor@ukr.net>
    ... and possibly others. Check the git source repository for specifics.

    Permission is granted to copy, distribute and/or modify this document under
    the terms of the GNU Free Documentation License, Version 1.2 or any later
    version published by the Free Software Foundation; with no Invariant
    Sections, no Front-Cover Texts, and no Back-Cover Texts.

    A copy of the license is included in COPYING.DOC. The license will be
    included in the generated documentation as well.
   -->
  <!ENTITY kappname "kdesrc-build">
  <!ENTITY package "kdesdk">
  <!ENTITY % addindex "IGNORE">
  <!ENTITY % Catalan  "INCLUDE"
> <!-- Change language only here -->
  <!ENTITY kdesrc-build "<application
>kdesrc-build</application
>">
  <!ENTITY BSD '<acronym
>BSD</acronym
>'>
  <!ENTITY git '<application
>Git</application
>'>
  <!ENTITY cmake '<application
>CMake</application
>'>
  <!ENTITY make '<application
>Make</application
>'>
  <!ENTITY ninja '<application
>Ninja</application
>'>
  <!ENTITY ssh '<application
>SSH</application
>'>
  <!ENTITY cron '<application
>Cron</application
>'>
  <!ENTITY subversion '<application
>Subversion</application
>'>
  <!ENTITY sudo '<application
>Sudo</application
>'>
  <!ENTITY url '<acronym
>URL</acronym
>'>

  <!-- These define shortcut entities for some of the configuration options.
       Just add them as necessary.
  -->

  <!ENTITY configure-flags '<link linkend="conf-configure-flags"
>configure-flags</link
>'>
  <!ENTITY kdedir '<link linkend="conf-kdedir"
>kdedir</link
>'>
  <!ENTITY qtdir '<link linkend="conf-qtdir"
>qtdir</link
>'>
  <!ENTITY build-dir '<link linkend="conf-build-dir"
>build-dir</link
>'>
  <!ENTITY module-base-path '<link linkend="conf-module-base-path"
>module-base-path</link
>'>
  <!ENTITY override-url '<link linkend="conf-override-url"
>override-url</link
>'>
  <!ENTITY source-dir '<link linkend="conf-source-dir"
>source-dir</link
>'>
  <!ENTITY email-address '<link linkend="conf-email-address"
>email-address</link
>'>
  <!ENTITY email-on-compile-error '<link linkend="conf-email-on-compile-error"
>email-on-compile-error</link
>'>
  <!ENTITY colorful-output '<link linkend="conf-colorful-output"
>colorful-output</link
>'>
  <!ENTITY tag '<link linkend="conf-tag"
>tag</link
>'>
  <!ENTITY branch '<link linkend="conf-branch"
>branch</link
>'>
  <!ENTITY do-not-compile '<link linkend="conf-do-not-compile"
>do-not-compile</link
>'>
  <!ENTITY checkout-only '<link linkend="conf-checkout-only"
>checkout-only</link
>'>
  <!ENTITY svn-server '<link linkend="conf-svn-server"
>svn-server</link
>'>
  <!ENTITY make-install-prefix '<link linkend="conf-make-install-prefix"
>make-install-prefix</link
>'>
  <!ENTITY niceness '<link linkend="conf-niceness"
>niceness</link
>'>
  <!ENTITY set-env '<link linkend="conf-set-env"
>set-env</link
>'>
  <!ENTITY libname '<link linkend="conf-libname"
>libname</link
>'>
  <!ENTITY libpath '<link linkend="conf-libpath"
>libpath</link
>'>
  <!ENTITY binpath '<link linkend="conf-binpath"
>binpath</link
>'>

  <!-- These define shortcut entities for some of the command line options.
       Just add them as necessary.
  -->
  <!ENTITY cmd-nice '<link linkend="cmdline-nice"
>--nice</link
>'>
  <!ENTITY cmd-ignore-modules '<link linkend="cmdline-ignore-modules"
>--ignore-modules</link
>'>
  <!ENTITY cmd-resume-from '<link linkend="cmdline-resume-from"
>--resume-from</link
>'>
  <!ENTITY cmd-resume-after '<link linkend="cmdline-resume-after"
>--resume-after</link
>'>
  <!ENTITY cmd-reconfigure '<link linkend="cmdline-reconfigure"
>--reconfigure</link
>'>
  <!ENTITY cmd-refresh-build '<link linkend="cmdline-refresh-build"
>--refresh-build</link
>'>
]>

<book id="kdesrc-build" lang="&language;">

<bookinfo>
<title
>Manual de l'script &kdesrc-build;</title>

<authorgroup id="authors">
    <author
>&Michael.Pyne; &Michael.Pyne.mail;</author>
    <author
><personname
><firstname
>Carlos</firstname
><surname
>Woelz</surname
></personname
> <email
>carloswoelz@imap-mail.com</email
> </author>

&traductor.Antoni.Bella; 

</authorgroup>

<copyright>
<year
>2006</year>
<year
>2007</year>
<year
>2008</year>
<year
>2009</year>
<year
>2010</year>
<year
>2011</year>
<year
>2012</year>
<year
>2013</year>
<year
>2014</year>
<year
>2015</year>
<year
>2016</year>
<year
>2017</year>
<year
>2018</year>
<year
>2019</year>
<holder
>Michael Pyne</holder>
</copyright>

<copyright>
<year
>2005</year>
<holder
>Carlos Woelz</holder>
</copyright>

<legalnotice
>&FDLNotice;</legalnotice>

<date
>20 de gener de 2018</date>
<releaseinfo
>&kdesrc-build; 17.12</releaseinfo>

<abstract>
<para
>El &kdesrc-build; és un script que construeix i instal·la el programari &kde; directament des dels repositoris de codi font del projecte &kde;.</para>
</abstract>

<keywordset>
<keyword
>KDE</keyword>
<keyword
>kdesdk</keyword>
<keyword
>SVN</keyword>
<keyword
>Subversion</keyword>
<keyword
>git</keyword>
<keyword
>Desenvolupament del KDE</keyword>
<!-- Older names for the software -->
<keyword
>kdesvn-build</keyword>
<keyword
>kdecvs-build</keyword>
</keywordset>

</bookinfo>

<chapter id="introduction">
<title
>Introducció</title>

<sect1 id="brief-intro">
<title
>Una breu introducció al &kdesrc-build;</title>

<sect2 id="whatis-kdesrc-build">
<title
>Què és el &kdesrc-build;?</title>

<para
>El &kdesrc-build; és un script per ajudar a la comunitat &kde; a instal·lar el programari <ulink url="https://www.kde.org/"
>&kde;</ulink
> des dels seus repositoris de codi font <ulink url="https://git-scm.com/"
>&git;</ulink
> i <ulink url="https://subversion.apache.org/"
>&subversion;</ulink
>, i després continuar actualitzant aquest programari. Està especialment destinat a ajudar a aquells que necessiten recolzar les proves i el desenvolupament del programari &kde;, inclosos els usuaris que proven les correccions d'errors i els desenvolupadors que treballen en noves característiques. </para>

<para
>L'script &kdesrc-build; es pot configurar per a mantenir un sol mòdul, un complet escriptori &plasma; amb un conjunt d'aplicacions &kde;, o en algun punt intermedi. </para>

<para
>Per començar, vegeu el <xref linkend="getting-started"/> o continueu llegint per obtenir més detalls sobre com funciona el &kdesrc-build; i el que cobreix aquesta documentació. </para>
</sect2>

<sect2 id="operation-in-a-nutshell">
<title
>Operació de &kdesrc-build; <quote
>en poques paraules</quote
></title>

<para
>El &kdesrc-build; funciona utilitzant les eines disponibles per a l'usuari en la línia d'ordres, utilitzant les mateixes interfícies disponibles per a l'usuari. Quan s'executa el &kdesrc-build;, se segueix la següent seqüència: </para>

<orderedlist>
<listitem
><para
>El &kdesrc-build; llegeix a la <link linkend="cmdline"
>línia d'ordres</link
> i en un <link linkend="configure-data"
>fitxer de configuració</link
>, per a determinar quins construir, les opcions de construcció per utilitzar, a on instal·lar, &etc;</para
></listitem>

<listitem
><para
>El &kdesrc-build; realitza una actualització del codi font per a cada <link linkend="module-concept"
>mòdul</link
>. L'actualització continuarà fins que s'hagin actualitzat tots els mòduls. Els mòduls que fallin en actualitzar normalment no aturaran la construcció i, al final, se us notificarà quins mòduls no s'han actualitzat.</para
></listitem>

<listitem
><para
>Els mòduls que s'hagin actualitzat correctament seran construïts, executant el seu conjunt de proves i després s'instal·laran. Per a reduir el temps total emprat, de manera predeterminada, el &kdesrc-build; començarà a construir el codi tan aviat com el primer mòdul hagi completat l'actualització, i permetrà que les actualitzacions restants continuïn darrere d'escena. </para
></listitem>
</orderedlist>

<tip
><para
>En un article en línia sobre l'aplicació &krita; del &kde; es proporciona una <emphasis
>molt bona</emphasis
> visió general sobre <ulink url="https://www.davidrevoy.com/article193/guide-building-krita-on-linux-for- cats"
>com es construeixen els mòduls &kde;</ulink
>, inclosos diagrames informatius. Aquest flux de treball és el que automatitza el &kdesrc-build; per a tots els mòduls &kde;.</para>
</tip>

</sect2>
</sect1>

<sect1 id="intro-toc">
<title
>Resum de la documentació</title>

<para
>Aquesta guia és un resum per a descriure els següents aspectes de l'operació de &kdesrc-build;: </para>

<itemizedlist>
<listitem
><para
>Un <link linkend="getting-started"
>resum</link
> dels passos necessaris per a començar.</para
></listitem>
<listitem
><para
><link linkend="features"
>Característiques</link
> notables.</para
></listitem>
<listitem
><para
>La sintaxi i les opcions del <link linkend="configure-data"
>fitxer de configuració</link
>.</para
></listitem>
<listitem
><para
>Les <link linkend="cmdline"
>opcions de la línia d'ordres</link
>.</para
></listitem>
</itemizedlist>

<para
>També es documenten els passos que haureu de realitzar amb altres eines (&ead;, passos que no es realitzen automàticament amb el &kdesrc-build;). </para>

</sect1>
</chapter>

<chapter id="getting-started">
<title
>Com començar</title>

<para
>En aquest capítol, hem mostrat com utilitzar el &kdesrc-build; per extreure els mòduls des del repositori del &kde; i construir-los. També proporcionem una explicació bàsica de l'estructura del codi font del &kde; i els passos que haureu de realitzar abans d'executar l'script. </para>

<para
>Tots els temes presents en aquest capítol estan coberts amb encara més detalls en l'article <ulink url="https://community.kde.org/Guidelines_and_HOWTOs/Build_from_source"
>Build from Source</ulink
>, al <ulink url="https://community.kde.org/"
>wiki de la comunitat &kde;</ulink
>. Si esteu construint el &kde; per primera vegada, és una bona idea llegir-lo o consultar-lo com a font de referència. Trobareu informació detallada sobre les eines i requisits per empaquetar, dificultats i estratègies comunes en la compilació, i informació sobre com executar la vostra nova instal·lació del &kde;. </para>

<sect1 id="before-building">
<title
>Preparar el sistema per a construir el &kde;</title>

<sect2 id="before-building-users">
<title
>Configurar un compte d'usuari nou</title>

<para
>Es recomana que utilitzeu un compte d'usuari diferent per a construir, instal·lar i executar el programari &kde;, ja que es requereixen menys permisos i per evitar interferir amb els paquets de la vostra distribució. Si ja teniu instal·lats els paquets del &kde;, la millor opció seria crear un usuari diferent (dedicat) per a construir i executar el nou &kde;. </para>

<tip
><para
>Deixar el sistema &kde; intacte també permet tenir una recuperació d'emergència en el cas que un error en el codi faci que la vostra última construcció de programari quedi inutilitzable. </para
></tip>

<para
>Si voleu, també podreu configurar per a instal·lar-lo en un directori de tot el sistema (&pex;, <filename class="directory"
>/usr/src/local</filename
>). Aquest document no cobreix aquest tipus d'instal·lació, ja que suposem que sabeu el que esteu fent. </para>

</sect2>
<sect2 id="before-building-preparation">
<title
>Assegureu-vos que el sistema està preparat per a construir programari &kde;</title>

<para
>Abans d'utilitzar l'script &kdesrc-build; (o qualsevol altra estratègia de construcció) haureu d'instal·lar les eines de desenvolupament i les biblioteques necessàries per al &kde;. La llista gairebé completa de les eines requerides es troba a la pàgina <ulink url="https://community.kde.org/Guidelines_and_HOWTOs/Build_from_source#Install_required_devel_packages"
>«Build Requirements» al wiki de la comunitat &kde;</ulink
>. </para>

<para
>Aquí hi ha una llista d'algunes de les coses que necessitareu:</para>
<itemizedlist>

<listitem
><para
>Us cal el &cmake;, aquest programari és el que fa servir el &kde; per a gestionar la configuració del codi font en temps de construcció i la generació de les ordres de construcció específiques per al vostre sistema. La versió requerida variarà segons les versions del programari &kde; que estigueu creant (consulteu la TechBase per obtenir informació específica), però amb les distribucions modernes, el &cmake; inclòs amb la distribució hauria de ser suficient. </para
></listitem>

<listitem
><para
>També haureu d'instal·lar els clients per al control del codi font necessaris per a extreure el codi font del &kde;. Això vol dir que almenys necessitareu el següent:</para>

<itemizedlist>
<listitem
><para
>El <ulink url="https://git-scm.com/"
>gestor Git per al control del codi font</ulink
>, el qual s'utilitza per a tot el <ulink url="https://commits.kde.org/"
>codi font</ulink
> del &kde;.</para
></listitem>

<listitem
><para
>Encara que no és obligatori, el gestor <ulink url="http://bazaar.canonical.com/"
>Bazaar</ulink
> per al control del codi font s'utilitza per a un únic mòdul (libdbusmenu-qt), el qual es requereix per a les biblioteques del &kde;. La majoria dels usuaris poden instal·lar aquesta biblioteca a través dels seus paquets de distribució, però si voleu, el &kdesrc-build; també admet la seva construcció. Però per a construir la libdbusmenu-qt, haureu de tenir instal·lat el Bazaar.</para
></listitem>
</itemizedlist
></listitem>

<listitem
><para
>El llenguatge Perl per a crear scripts és necessari per al &kdesrc-build;, alguns repositoris del &kde; i les &Qt; (si construïu des del codi font).</para>

<para
>El Perl que ve amb la seva distribució hauria de ser adequat (almenys haurà de ser el Perl 5.14), però també necessitareu alguns mòduls addicionals (el &kdesrc-build; us avisarà si no hi són presents):</para>

<itemizedlist>
    <listitem
><para
>IO::Socket::SSL</para
></listitem>
    <listitem
><para
>JSON::PP o JSON::XS</para
></listitem>
    <listitem
><para
>YAML::PP, YAML::XS o YAML::Syck</para
></listitem>
</itemizedlist>
</listitem>

<listitem
><para
>Us cal un entorn de desenvolupament C++ complet (compilador, biblioteca estàndard, temps d'execució i qualsevol altre paquet de desenvolupament requerit). Les versions mínimes requerides variaran segons el mòdul &kde;: la col·lecció Frameworks 5 del &kde; admet compiladors més antics, mentre que el Plasma 5 del &kde; i les aplicacions &kde; tendeixen a requerir compiladors més recents.</para>
<para
>Els compiladors GCC 4.8 o Clang 4 són el mínim recomanat. Moltes distribucions admeten la instal·lació senzilla d'aquestes eines utilitzant un paquet <quote
>build-essentials</quote
>, una opció per instal·lar les «dependències de construcció» amb les &Qt;, o característiques similars. El wiki de la comunitat &kde; té una pàgina que fa el <ulink url="https://community.kde.org/Guidelines_and_HOWTOs/Build_from_source/Install_the_dependencies"
>seguiment dels paquets recomanats per a les principals distribucions</ulink
>. </para>
</listitem>

<listitem
><para
>Us cal una eina de construcció que en realitat realitzi els passos de compilació (generats pel &cmake;). Es recomana el Make de GNU i haurà d'estar disponible a través del gestor de paquets. El &cmake; admet altres opcions, com l'eina de construcció &ninja;, la qual pot ser utilitzada pel &kdesrc-build; utilitzant l'opció <link linkend="conf-custom-build-command"
>custom-build-command</link
> del fitxer de configuració. </para
></listitem>

<listitem
><para
>Finalment, necessitareu les biblioteques de les &Qt; apropiades (inclosos els paquets de desenvolupament) per a la versió del programari &kde; que esteu construint. El &kdesrc-build; no admet oficialment la construcció de les &Qt; 5 (la versió principal actual), per la qual cosa es recomana utilitzar els paquets de desenvolupament de la vostra distribució o veure la pàgina wiki de la comunitat &kde; a «<ulink url="https://community.kde.org/Guidelines_and_HOWTOs/Build_from_source/OwnQt5"
>self-building Qt 5</ulink
>». </para
></listitem>
</itemizedlist>

<note
><para
>La majoria de les distribucions de sistema operatiu inclouen un mètode per a instal·lar amb facilitat les eines de desenvolupament requerides. Consulteu la pàgina wiki «<ulink url="https://community.kde.org/Guidelines_and_HOWTOs/Build_from_source#Install_required_devel_packages"
>Required devel packages</ulink
>» de la comunitat &kde; per a veure si aquestes instruccions ja estan disponibles.</para
></note>

<important
><para
>Alguns d'aquests paquets es divideixen en biblioteques (o programes, o utilitats) i paquets de desenvolupament. Almenys necessitareu el programa o biblioteca <emphasis
>i</emphasis
> el seu paquet de desenvolupament. </para
></important>

</sect2>

<sect2 id="before-building-prepare-script">
<title
>Configurar el &kdesrc-build;</title>

<sect3 id="get-kdesrc-build">
<title
>Instal·lar el &kdesrc-build;</title>
<para
>Els desenvolupadors del &kde; realitzen canvis freqüents en el &kdesrc-build; per a mantenir-lo sincronitzat amb els avenços en el desenvolupament del &kde;, incloses millores en la configuració recomanada del &kdesrc-build;, mòduls afegits, millores en els indicadors de &cmake;, &etc;</para>

<para
>A causa d'això, recomanem obtenir el &kdesrc-build; directament des del seu repositori de codi font i després actualitzar-lo periòdicament.</para>

<para
>Podeu obtenir el &kdesrc-build; des del seu repositori de codi font executant:</para>
<programlisting
><prompt
>$ </prompt
><userinput
><command
>git <option
>clone</option
> <option
>https://invent.kde.org/sdk/kdesrc-build.git</option
> <option
><filename class="directory"
><replaceable
>~/kdesrc-build</replaceable
></filename
></option
></command
></userinput
>
</programlisting>

<para
>Substituïu <option
><replaceable
>~/kdesrc-build</replaceable
></option
> amb el directori on voleu instal·lar-lo. </para>

<para
>Podeu actualitzar més tard el &kdesrc-build; executant:</para>
<programlisting
><prompt
>$ </prompt
><userinput
><command
>cd <option
><filename class="directory"
><replaceable
>~/kdesrc-build</replaceable
></filename
></option
></command
></userinput>
<prompt
>$ </prompt
><userinput
><command
>git <option
>pull</option
></command
></userinput
>
</programlisting>

<tip
><para
>Recomanem afegir el directori d'instal·lació de &kdesrc-build; a la vostra variable d'entorn <envar
>PATH</envar
>, de manera que pugueu executar el &kdesrc-build; sense haver d'especificar completament el seu camí cada vegada.</para
></tip>
</sect3>

<sect3 id="setup-rcfile">
<title
>Preparar el fitxer de configuració</title>

<para
>El &kdesrc-build; utilitza un <link linkend="configure-data"
>fitxer de configuració</link
> per a controlar quins mòduls es construeixen, on s'instal·laran, &etc; Aquest fitxer es troba a <filename
>~/.config/kdesrc-buildrc</filename
> (<filename
>$XDG_CONFIG_HOME/kdesrc-buildrc</filename
>, si està establerta <envar
>$XDG_CONFIG_HOME</envar
>).</para>

<para
>Podeu utilitzar un programa inclòs amb el &kdesrc-build;, anomenat <application
>kdesrc-build-setup</application
> per a preparar una configuració senzilla de kdesrc-build. Després podreu editar el fitxer de configuració <filename
>~/.config/kdesrc-buildrc</filename
> per a fer els canvis que considereu adients.</para>

<para
>El <application
>kdesrc-build-setup</application
> s'executa des d'un terminal (en lloc d'utilitzar una interfície gràfica), com també el &kdesrc-build;, de manera que podreu utilitzar-lo fins i tot si encara no teniu una interfície gràfica disponible.</para>

<sect4 id="setup-rcfile-manually">
<title
>Configurar manualment el fitxer de configuració</title>

<para
>També podreu configurar el fitxer de configuració manualment, copiant el fitxer de configuració de mostra <filename
>kdesrc-buildrc-kf5-sample</filename
> inclòs a <filename
>~/.config/kdesrc-buildrc</filename
> i després editant-lo. El <xref linkend="kdesrc-buildrc"/> serà una referència útil per a això, especialment la seva <link linkend="conf-options-table"
>taula per a les opcions de configuració</link
>. </para>

<para
>El &kdesrc-build; conté molts fitxers de configuració recomanats per admetre els Frameworks 5 del &kde;, el &plasma; 5 i altres aplicacions &kde;. El <application
>kdesrc-build-setup</application
> es refereix a aquests fitxers al fitxer de configuració que genera, però també podeu utilitzar-los vosaltres mateixos. Vegeu <xref linkend="kdesrc-buildrc-including"/> per obtenir informació sobre com utilitzar altres fitxers de configuració des del vostre propi <filename
>kdesrc-buildrc</filename
>. </para>

<para
>Trobareu més informació sobre la sintaxi en el <link linkend="configure-data"
>fitxer de configuració</link
> a <xref linkend="configure-data"/> i al <xref linkend="kdesrc-buildrc"/>. </para>
</sect4>
</sect3>
</sect2>
</sect1>

<sect1 id="configure-data">
<title
>Establir les dades de configuració</title>

<para
>Per utilitzar el &kdesrc-build;, haureu de tenir un fitxer en el vostre directori d'inici anomenat <filename
>~/.config</filename
> (o a <envar
>$XDG_CONFIG_HOME</envar
>, si està establerta), el qual especifica les opcions generals i els mòduls que voleu descarregar i construir. </para>

<note
><para
>És possible utilitzar diferents fitxers de configuració per al &kdesrc-build;, el qual es descriu en el <xref linkend="kdesrc-buildrc"/>. Si necessiteu utilitzar múltiples configuracions, consulteu aquesta secció. Aquí, assumirem que la configuració està emmagatzemada en el <filename
>~/.config/kdesrc-buildrc</filename
>. </para
></note>

<para
>La manera més fàcil de procedir és utilitzar el fitxer <filename
>kdesrc-buildrc-kf5-sample</filename
> com a plantilla, canviar les opcions globals perquè coincideixi amb el que voleu, i també canviar la llista de mòduls que voleu construir. </para>

<para
>L'opció predeterminada hauria de ser apropiada per a realitzar una construcció del &kde;. Algunes opcions de configuració que és possible que vulgueu modificar inclouen: </para>

<itemizedlist>
<listitem
><para
><link linkend="conf-kdedir"
>kdedir</link
>, la qual canvia el directori de destinació en què es troba instal·lat el vostre programari &kde;. De manera predeterminada és <filename class="directory"
>~/kde</filename
>, el qual és per a una instal·lació d'un únic usuari.</para
></listitem>

<listitem
><para
><link linkend="conf-branch-group"
>branch-group</link
>, la qual es pot utilitzar per a triar la branca de desenvolupament adequada per als mòduls del &kde; com a un conjunt. Hi ha moltes configuracions de construcció admeses, però és probable que vulgueu triar <option
>kf5-qt5</option
> de manera que el &kdesrc-build; descarregui el codi més recent basat en les &Qt; 5 i els Frameworks 5 del &kde;.</para>

<tip
><para
>El &kdesrc-build; utilitzarà un grup predeterminat de branca si no en trieu un, però aquest predeterminat canviarà amb el temps, de manera que és millor triar-ne un perquè el grup de branca no canviï de forma inesperada.</para
></tip>
</listitem>

<listitem
><para
><link linkend="conf-source-dir"
>source-dir</link
>, per a controlar el directori que utilitza el &kdesrc-build; per a descarregar el codi font, executar el procés de construcció i desar els registres. De manera predeterminada és <filename class="directory"
>~/kdesrc</filename
>.</para
></listitem>

<listitem
><para
><link linkend="conf-cmake-options"
>cmake-options</link
>, la qual estableix les opcions per a passar a l'ordre &cmake; en compilar cada mòdul. Normalment, això es fa servir per a establir entre les construccions <quote
>debug</quote
> o <quote
>release</quote
>, per a habilitar (o inhabilitar) característiques opcionals, o per passar informació al procés de construcció sobre la ubicació de les biblioteques requerides. </para
></listitem>

<listitem
><para
><link linkend="conf-make-options"
>make-options</link
>, la qual estableix les opcions utilitzades quan s'executa l'ordre <application
>make</application
> per a compilar cada mòdul (una vegada que el &cmake; ha establert el sistema de construcció). </para>

<para
>L'opció més típica és <option
>-j<replaceable
>N</replaceable
></option
>, on <replaceable
>N</replaceable
> s'haurà de substituir amb el nombre màxim de tasques de compilació que voleu permetre. Un nombre major (fins al nombre de CPU lògiques que hi ha disponibles al vostre sistema) conduirà a construccions més ràpides, però requerirà més recursos del sistema. </para>

<tip
><para
>El &kdesrc-build; estableix l'opció <option
><link linkend="conf-num-cores"
>num-cores</link
></option
> al nombre detectat de nuclis de processament disponibles. Feu servir aquest valor en el fitxer de configuració per a evitar haver de configurar-ho manualment. </para
></tip>

<example id="make-options-example">
<title
>Configurar el Make per a emprar totes les CPU disponibles, amb excepcions</title>
<screen
>global
    # El «make» utilitza automàticament aquesta variable d'entorn,
    # incloses les ordres de «make» que no s'executen directament
    # en el kdesrc-build, com les «configure» de les Qt
    set-env MAKEFLAGS -j<literal
>${num-cores}</literal>
    &hellip;
end global

&hellip;

module-set <replaceable
>big-module-set</replaceable>
    repository kde-projects
    use-modules <replaceable
>calligra</replaceable>
    make-options -j2 # Redueix del nombre de tasques de construcció per a aquests mòduls
end module-set
</screen>
</example>

<note
><para
>Alguns repositoris Git molt grans poden saturar el sistema si intenteu compilar amb massa tasques de construcció alhora, en especial els repositoris com els repositoris WebKit de les &Qt; i WebEngine de les &Qt;. Per a mantenir la interactivitat del sistema, és possible que hàgiu de reduir el nombre de tasques de construcció per a certs mòduls.</para>
<para
><xref linkend="make-options-example"/> dona un exemple de com fer això.</para>
</note>

</listitem>
</itemizedlist>

<para
>Possiblement voldreu seleccionar diferents mòduls per construir, el qual es descriu a <xref linkend="selecting-modules"/>.</para>

</sect1>

<sect1 id="building-and-troubleshooting">
<title
>Emprar l'script &kdesrc-build;</title>
<para
>Amb les dades de configuració establertes, ara estareu a punt per executar l'script. Fins i tot si encara teniu alguns ajustos o altres lectures que voleu fer, és una bona idea almenys carregar les metadades del projecte &kde;.</para>

<sect2 id="loading-kdesrc-build-metadata">
<title
>Carregar les metadades del projecte</title>

<para
>Des d'una finestra de terminal, accediu amb l'usuari que utilitzeu per a compilar el programari &kde; i executeu l'script: </para>
<screen
><prompt
>&percnt;</prompt
> <userinput
><command
>kdesrc-build</command
> <option
>--metadata-only</option
></userinput
>
</screen>

<para
>Aquesta ordre configurarà el directori de codi font i connectarà amb els repositoris &git; del &kde; per a descarregar la seva base de dades i la base de dades amb les metadades de dependències, sense realitzar cap canvi més. És útil executar això per separat, ja que aquestes metadades són útils per a altres ordres de &kdesrc-build;. </para>

</sect2>

<sect2 id="pretend-mode">
<title
>Vista prèvia del que succeirà quan s'executi el kdesrc-build</title>

<para
>Amb les metadades del projecte instal·lades, és possible obtenir una vista prèvia del que farà el &kdesrc-build; quan es llanci. Això es pot fer amb l'opció <option
><link linkend="cmdline-pretend"
>--pretend</link
></option
> de la línia d'ordres.</para>

<screen
><prompt
>&percnt; </prompt
><command
>./kdesrc-build</command
> <option
>--pretend</option
>
</screen>

<para
>Hauríeu de veure un missatge indicant que alguns paquets s'han construït correctament (encara que en realitat no s'hagi de construir res). Si no es mostren problemes significatius, podreu continuar executant l'script.</para>

<screen
><prompt
>&percnt;</prompt
> <userinput
><command
>kdesrc-build</command
> <option
>--stop-on-failure</option
></userinput
>
</screen>

<para
>Aquesta ordre descarregarà el codi font apropiat, i construirà i instal·larà cada mòdul en ordre, però s'aturarà si un mòdul no es construeix (a causa de l'opció <option
>--stop-on-failure</option
>). Després, hauríeu de veure una sortida similar a la de l'<xref linkend="example-build-sequence"/>:</para>

<example id="example-build-sequence">
<title
>Sortida d'exemple d'una execució de kdesrc-build</title>
<screen
><prompt
>&percnt;</prompt
> <userinput
><command
>kdesrc-build</command
></userinput>
Updating kde-build-metadata (to branch master)
Updating sysadmin-repo-metadata (to branch master)

Building libdbusmenu-qt (1/200)
        No changes to libdbusmenu-qt source, proceeding to build.
        Compiling... succeeded (after 0 seconds)
        Installing.. succeeded (after 0 seconds)

Building taglib (2/200)
        Updating taglib (to branch master)
        Source update complete for taglib: 68 files affected.
        Compiling... succeeded (after 0 seconds)
        Installing.. succeeded (after 0 seconds)

Building extra-cmake-modules from &lt;module-set at line 32&gt; (3/200)
        Updating extra-cmake-modules (to branch master)
        Source update complete for extra-cmake-modules: 2 files affected.
        Compiling... succeeded (after 0 seconds)
        Installing.. succeeded (after 0 seconds)

        ...

Building kdevelop from kdev (200/200)
        Updating kdevelop (to branch master)
        Source update complete for kdevelop: 29 files affected.
        Compiling... succeeded (after 1 minute, and 34 seconds)
        Installing.. succeeded (after 2 seconds)

&lt;&lt;&lt;  PACKAGES SUCCESSFULLY BUILT  &gt;&gt;&gt;
Built 200 modules

Your logs are saved in /home/kde-src/kdesrc/log/2018-01-20-07
</screen>
</example>
</sect2>

<sect2 id="fixing-build-failures">
<title
>Resolució de les fallades de construcció</title>

<para
>Depenent de quants mòduls estigueu descarregant, és possible que el &kdesrc-build; no tingui èxit la primera vegada que compileu el programari &kde;. No desespereu! </para>

<para
>El &kdesrc-build; registra la sortida de cada ordre que s'executa. De manera predeterminada, els fitxers de registre es mantenen a <filename class="directory"
>~/kdesrc/log</filename
>. Per a veure què va provocar un error per a un mòdul en la darrera ordre de &kdesrc-build;, en general és suficient amb mirar a <filename class="directory"
>~/kdesrc/log/latest/<replaceable
>nom_mòdul</replaceable
>/error.log</filename
>.</para>

<tip
><para
>Potser la manera més fàcil d'esbrinar quin error va causar que un mòdul no es pogués construir és cercar cap enrere amb una cerca que no distingeixi entre majúscules i minúscules, començant des del final del fitxer a la cerca de la paraula <literal
>error</literal
>. Una vegada la trobeu, desplaceu-vos-hi per assegurar-vos que no hi hagi altres missatges d'error a prop. El primer missatge d'error en un grup sol ser el problema subjacent.</para
></tip>

<para
>En aquest fitxer, veureu l'error que va fer que la compilació fallés per a aquest mòdul. Si el fitxer diu (a la part inferior) que li falten alguns paquets, intenteu instal·lar el paquet (inclosos els paquets «-dev» apropiats) abans de construir de nou aquest mòdul. Quan executeu de nou el &kdesrc-build;, assegureu-vos de passar l'opció <link linkend="cmdline-reconfigure"
>--reconfigure</link
> perquè el &kdesrc-build; forci el mòdul a comprovar de nou els paquets que falten.</para>

<para
>O, si l'error sembla un error de construcció (com un error de sintaxi, <quote
>prototip incorrecte</quote
>, <quote
>tipus desconegut</quote
> o similar), llavors és probable que sigui un error amb el codi font del &kde;, el qual amb sort es resoldrà en uns pocs dies. Si no es resol dins d'aquest temps, sou lliure d'enviar a la llista de correu <email
>kde-devel@kde.org</email
> (és possible que primer es requereixi una subscripció) per informar de la fallada de construcció.</para>

<para
>Trobareu exemples més comuns de coses que poden sortir malament i les seves solucions, així com consells i estratègies generals per a construir el programari &kde; al <ulink url="https://community.kde.org/Guidelines_and_HOWTOs/Build_from_source"
>Build from Source</ulink
>. </para>

<para
>D'altra banda, suposant que tot ha anat bé, hauríeu de tenir una instal·lació nova del &kde; a l'ordinador, i ara és simplement qüestió d'executar-la, el qual es descriu a continuació a <xref linkend="environment"/>.</para>

<note
><para
>Per obtenir més informació sobre les característiques de registre de &kdesrc-build;, vegeu el <xref linkend="kdesrc-build-logging"/>.</para
></note>
</sect2>

</sect1>

<sect1 id="building-specific-modules">
<title
>Construir mòduls específics</title>

<para
>En lloc de construir cada mòdul tot el temps, és possible que només vulgueu construir un sol mòdul o un altre petit subconjunt. En lloc d'editar el fitxer de configuració, simplement podeu passar els noms dels mòduls o conjunts de mòduls a construir a la línia d'ordres.</para>

<example id="example-subset-build">
<title
>Sortida d'exemple de la construcció d'un mòdul específic amb el kdesrc-build</title>
<screen
><prompt
>&percnt;</prompt
> <userinput
><command
>kdesrc-build</command
> <option
>--include-dependencies</option
> <replaceable
>dolphin</replaceable
></userinput>
Updating kde-build-metadata (to branch master)
Updating sysadmin-repo-metadata (to branch master)

Building extra-cmake-modules from frameworks-set (1/79)
        Updating extra-cmake-modules (to branch master)
        No changes to extra-cmake-modules source, proceeding to build.
        Running cmake...
        Compiling... succeeded (after 0 seconds)
        Installing.. succeeded (after 0 seconds)

Building phonon from phonon (2/79)
        Updating phonon (to branch master)
        No changes to phonon source, proceeding to build.
        Compiling... succeeded (after 0 seconds)
        Installing.. succeeded (after 0 seconds)

Building attica from frameworks-set (3/79)
        Updating attica (to branch master)
        No changes to attica source, proceeding to build.
        Compiling... succeeded (after 0 seconds)
        Installing.. succeeded (after 0 seconds)

        ...

Building dolphin from base-apps (79/79)
        Updating dolphin (to branch master)
        No changes to dolphin source, proceeding to build.
        Compiling... succeeded (after 0 seconds)
        Installing.. succeeded (after 0 seconds)

&lt;&lt;&lt;  PACKAGES SUCCESSFULLY BUILT  &gt;&gt;&gt;
Built 79 modules

Your logs are saved in /home/kde-src/kdesrc/log/2018-01-20-07
</screen>
</example>

<para
>En aquest cas, encara que només heu especificat l'aplicació <replaceable
>dolphin</replaceable
>, l'indicador <option
>--include-dependencies</option
> ha fet que el &kdesrc-build; inclogués les dependències llistades per al <replaceable
>dolphin</replaceable
> (en establir «<link linkend="conf-include-dependencies"
>include-dependencies</link
>»). </para>

<note
><para
>La resolució de dependències ha funcionat en aquest cas, només perquè es va especificar <replaceable
>dolphin</replaceable
> en un conjunt de mòduls basat en el «<literal
>kde-projects</literal
>» (en aquest exemple, anomenat «<literal
>base-apps</literal
>»). Vegeu el <xref linkend="module-sets-kde"/>. </para
></note>

</sect1>

<sect1 id="environment">
<title
>Establir l'entorn per executar el vostre Escriptori &plasma; del &kde;</title>

<para
>Assumint que utilitzeu un usuari dedicat per a construir el &plasma; del &kde;, i que ja teniu instal·lada una versió de &plasma;, executar el nou &plasma; pot ​​ser una mica complicat, ja que aquest té prioritat sobre l'anterior. Haureu de canviar les variables d'entorn dels vostres scripts d'inici de sessió per assegurar-vos que s'utilitza l'escriptori recentment creat. </para>

<sect2 id="session-driver">
<title
>Instal·lar un controlador d'inici de sessió automàtic</title>

<para
>A partir de la versió 1.16, el &kdesrc-build; intentarà instal·lar un controlador d'inici de sessió apropiat, el qual us permetrà iniciar la sessió en el vostre escriptori &kde; construït amb el &kdesrc-build; des del vostre gestor d'inici de sessió. Això es pot inhabilitar utilitzant l'opció «<option
><link linkend="conf-install-session-driver"
>install-session-driver</link
></option
>» del fitxer de configuració.</para>

<note
><para
>La configuració de la sessió no succeeix mentre s'executa el &kdesrc-build; en el mode simulació.</para
></note>

<para
>Aquest controlador funciona configurant un tipus de sessió <quote
><literal
>xsession</literal
></quote
> personalitzada. Aquest tipus de sessió hauria de funcionar de manera predeterminada amb el gestor d'inici de sessió &kdm; (on apareix com una sessió <quote
>Personalitzada</quote
>), però altres gestors d'inici de sessió (com <application
>LightDM</application
> i <application
>gdm</application
>) poden requerir la instal·lació de fitxers addicionals per habilitar el suport de <literal
>xsession</literal
>.</para>

<sect3 id="xsession-distribution-setup">
<title
>Afegir el suport «xsession» per a les distribucions</title>

<para
>Els gestors d'inici de sessió predeterminats per a algunes distribucions poden requerir la instal·lació de paquets addicionals per a admetre inicis de sessió de <literal
>xsession</literal
>.</para>

<itemizedlist>
<listitem
><para
>La distribució <ulink url="https://getfedora.org/"
>Fedora</ulink
> &Linux; requereix que s'instal·li el paquet <literal
>xorg-x11-xinit-session</literal
> per al suport personalitzat d'inici de sessió <literal
>xsession</literal
>.</para
></listitem>

<listitem
><para
>La distribució <ulink url="https://www.debian.org/"
>Debian</ulink
> &Linux; i derivades han d'admetre inicis de sessió personalitzats de <literal
>xsession</literal
>, però requereixen que s'estableixi l'opció «<option
><userinput
>allow-user-xsession</userinput
></option
>» al <filename
>/etc/X11/Xsession.options</filename
>. Vegeu també la <ulink url="https://www.debian.org/doc/manuals/debian-reference/ch07.en.html#_customizing_the_x_session_classic_method"
>documentació de Debian sobre la personalització de la sessió X</ulink
>.</para
></listitem>

<listitem
><para
>Per a les altres distribucions, aneu a <xref linkend="xsession-manual-setup"/>.</para
></listitem>
</itemizedlist>

</sect3>

<sect3 id="xsession-manual-setup">
<title
>Afegir manualment suport per a «xsession»</title>

<para
>Si no hi ha hagut instruccions específiques de la distribució per a la vostra distribució a la <xref linkend="xsession-distribution-setup"/>, podreu afegir manualment una entrada <quote
>Inici de sessió personalitzat xsession</quote
> a la llista de tipus de sessió de la vostra distribució de la següent manera:</para>

<procedure id="proc-adding-xsession-type">
<title
>Afegir un tipus de sessió a «.xsession» per accedir.</title>

<note
><para
>Aquest procediment probablement requerirà privilegis administratius per a completar-lo. </para
></note>

<step performance="required">
<para
>Creeu el fitxer <filename
>/usr/share/xsessions/kdesrc-build.desktop</filename
>.</para>
</step>

<step performance="required">
<para
>Assegureu-vos que el fitxer acabat de crear contingui el següent text:</para>
<literallayout
><userinput>
Type=XSession
Exec=<co id="session-homedir"/><replaceable
>$HOME</replaceable
>/.xsession
Name=KDE Plasma Desktop (unstable; kdesrc-build)
</userinput
></literallayout>

<calloutlist>
<callout arearefs="session-homedir"
><para
>L'entrada <replaceable
>$HOME</replaceable
> s'haurà de substituir pel camí complet cap al vostre directori d'inici (exemple, <filename class="directory"
><replaceable
>/home/usuari</replaceable
></filename
>). L'especificació de l'entrada d'escriptori no permet fitxers genèrics d'usuari. </para
></callout>

</calloutlist>
</step>

<step performance="optional"
><para
>Quan es reinicia el gestor d'inici de sessió, s'hauria de mostrar un nou tipus de sessió, <quote
>KDE Plasma Desktop (unestable; kdesrc-build)</quote
> a la seva llista de sessions, el qual hauria d'intentar executar el fitxer <filename
>.xsession</filename
> instal·lat pel &kdesrc-build; si és seleccionat quan inicieu la sessió.</para>

<note
><para
>Pot ser més fàcil reiniciar l'ordinador per a reiniciar el gestor d'inici de la sessió, si el gestor d'inici de la sessió no realitza un seguiment de les actualitzacions en el directori <filename class="directory"
>/usr/share/xsessions</filename
>.</para
></note>

</step>

</procedure>

</sect3>

</sect2>

<sect2 id="old-profile-instructions">
<title
>Configurar l'entorn manualment</title>
<para
>Aquesta documentació sol incloure instruccions sobre quines variables d'entorn establir per a carregar l'escriptori recentment creat. Aquestes instruccions s'han traslladat a un apèndix (<xref linkend="old-profile-setup"/>).</para>

<para
>Si teniu la intenció de configurar el vostre propi suport d'inici de sessió, podeu consultar aquest apèndix o veure el fitxer <filename
>sample-kde-env-master.sh</filename
> inclòs amb el codi font de &kdesrc-build;.</para>

</sect2>

</sect1>

<sect1 id="kde-modules-and-selection">
<title
>Organitzar i seleccionar els mòduls</title>

<sect2 id="kde-layers">
<title
>Organització del programari KDE</title>

<para
>El programari &kde; es divideix en diferents components, molts dels quals poden ser construïts pel &kdesrc-build;. Comprendre aquesta organització us ajudarà a seleccionar adequadament els mòduls de programari que voleu construir. </para>

<orderedlist>
<listitem
><para
>En el nivell més baix es troba la biblioteca de les &Qt;, la qual és una biblioteca de <quote
>joc d'eines</quote
> multiplataforma molt potent. El &kde; es basa en les &Qt;, i algunes de les biblioteques que no són &kde; requerides pel &kde; també es basen en les &Qt;. El &kdesrc-build; pot construir les &Qt;, o fer servir el que ja es troba en el vostre sistema si és una versió prou recent.</para
></listitem>

<listitem
><para
>Per sobre de les &Qt;, es requereixen les biblioteques necessàries perquè el programari &kde; funcioni. Algunes d'aquestes biblioteques no es consideren part del &kde; a causa de la seva naturalesa genèrica, però segueixen sent essencials per a la Plataforma &kde;. Aquestes biblioteques es recopilen sota una agrupació de mòduls <literal
>kdesupport</literal
>, però no es consideren part de les biblioteques <quote
>Frameworks</quote
>.</para>
</listitem>

<listitem
><para
>A més d'aquestes biblioteques essencials, venen els <ulink url="https://community.kde.org/Frameworks"
>Frameworks del &kde;</ulink
>, de vegades abreujats com a KF5, els quals són les biblioteques essencials per a l'escriptori de Plasma del &kde;, les aplicacions &kde; i un altre programari de tercers. </para
> </listitem>

<listitem
><para
>A més dels Frameworks, venen diverses coses diferents:</para>
    <itemizedlist>
        <listitem
><para
>Aplicacions <quote
>de tercers</quote
>. Aquestes són les aplicacions que fan servir els Frameworks del &kde; o que estan dissenyades per executar-se sota el Plasma del &kde; però que no estan creades ni associades amb el projecte &kde;.</para
></listitem>

        <listitem
><para
>Plasma, el qual és un entorn d'escriptori complet d'<quote
>espai de treball</quote
>. Això és el que els usuaris veuen normalment quan <quote
>inicien la sessió en el &kde;</quote
>.</para
></listitem>

        <listitem
><para
>El conjunt d'aplicacions del &kde;. Aquesta és una col·lecció de programari útil inclòs amb la Plataforma i l'escriptori &plasma;, agrupats en mòduls individuals, que inclouen utilitats com el &dolphin;, jocs com el <application
>KSudoku</application
> i programari de productivitat llançat pel &kde; com el &kontact;.</para
></listitem>

        <listitem
><para
>Finalment, hi ha una col·lecció de programari (també recopilada en mòduls) el desenvolupament és compatible amb els recursos del &kde; (com la traducció, control del codi font, seguiment d'errors, &etc;) però el &kde; no l'allibera com a part del Plasma o el conjunt d'aplicacions. Aquests mòduls es coneixen com a <quote
>Extragear</quote
>. </para
></listitem>
    </itemizedlist>
</listitem>
</orderedlist>
</sect2>

<sect2 id="selecting-modules">
<title
>Seleccionar els mòduls a construir</title>

<para
>La selecció de quins dels mòduls possibles per a construir estan controlats pel <link linkend="kdesrc-buildrc"
>fitxer de configuració</link
>. Després de la secció <literal
>global</literal
> hi ha una llista de mòduls per a construir, entre claudàtors per mòdul... línies de mòdul final. Es mostra una entrada d'exemple per a un mòdul a l'<xref linkend="conf-module-example"/>.</para>

<example id="conf-module-example">
<title
>Exemple d'una entrada «module» al fitxer de configuració</title>
<programlisting
>module <replaceable
>kdesrc-build-git</replaceable>
    # Les opcions per a aquest mòdul van aquí, exemple:
    <link linkend="conf-repository"
>repository</link
> kde:kdesrc-build
    <link linkend="conf-make-options"
>make-options</link
> -j4 # Executa 4 compilacions alhora
end module
</programlisting>
</example>

<note
><para
>A la pràctica, aquesta construcció de mòdul generalment no s'utilitza directament. En canvi, la majoria dels mòduls s'especifiquen mitjançant conjunts de mòduls com es descriu a continuació.</para
></note>

<para
>Quan només s'utilitzen entrades <literal
>module</literal
>, el &kdesrc-build; les construeix en l'ordre en què els llisteu, i no intenta descarregar cap altre repositori que no sigui el que especifiqueu directament. </para>

</sect2>

<sect2 id="module-sets">
<title
>Conjunts de mòduls</title>

<para
>El codi font del &kde; es descompon en una gran quantitat de repositoris relativament petits basats en Git. Per a facilitar la gestió de la gran quantitat de repositoris involucrats en qualsevol instal·lació útil basada en el &kde;, el &kdesrc-build; admet l'agrupació de múltiples mòduls i el tractament del grup com a un <quote
>conjunt de mòduls</quote
>. </para>

<sect3 id="module-set-concept">
<title
>El concepte bàsic del conjunt de mòduls</title>

<para
>En utilitzar un conjunt de mòduls, podreu declarar amb rapidesa molts mòduls de Git que es descarregaran i construiran, com si haguéssiu escrit una declaració de mòdul separada per a cadascun. L'opció «<link linkend="conf-repository"
>repository</link
>» es gestiona especialment per a configurar des d'on es descarregarà cada mòdul, i totes les altres opcions contingudes en el conjunt de mòduls es copiaran a cada mòdul generat d'aquesta manera.</para>

<example id="example-using-module-sets">
<title
>Emprar conjunts de mòduls</title>
<programlisting
>global
    <option
><link linkend="conf-git-repository-base"
>git-repository-base</link
></option
> <replaceable
>kde-git</replaceable
> <replaceable
>kde:</replaceable>
end global

module <replaceable
>qt</replaceable>
    # Opcions eliminades per brevetat:
end module

module-set <replaceable
>kde-support-libs</replaceable>
    <option
><link linkend="conf-repository"
>repository</link
></option
> <replaceable
>kde-git</replaceable>
    <option
><link linkend="conf-use-modules"
>use-modules</link
></option
> <replaceable
>automoc</replaceable
> <replaceable
>attica</replaceable
> <replaceable
>akonadi</replaceable>
end module-set

# Altres mòduls segons sigui necessari...
module <replaceable
>kdesupport</replaceable>
end module
</programlisting>
</example>

<para
>En l'<xref linkend="example-using-module-sets"/> es mostra un breu conjunt de mòduls. Quan el &kdesrc-build; troba aquest conjunt de mòduls, actua com si, per a cada mòdul indicat a «<option
>use-modules</option
>», s'hagués declarat un mòdul individual, amb el seu «<option
>repository</option
>» igual que «<option
>repository</option
>» del «module-set» seguit immediatament pel nom del mòdul indicat.</para>

<para
>A més, es poden passar altres opcions en un conjunt de mòduls, les quals es copiaran a cada mòdul nou que es crea d'aquesta manera. En utilitzar el conjunt de mòduls, és possible declarar amb rapidesa molts mòduls Git que es basen en el mateix URL del fitxer. A més, és possible assignar un nom als conjunts de mòduls (com es mostra a l'exemple), el qual permet consultar amb rapidesa tot el grup de mòduls des de la línia d'ordres.</para>

</sect3>
<sect3 id="module-sets-kde">
<title
>Suport especial per a conjunts de mòduls del KDE</title>

<para
>El suport del conjunt de mòduls descrit fins ara és general per a qualsevol mòdul basat en Git. Per als repositoris Git del &kde;, el &kdesrc-build; inclou característiques addicionals per a facilitar les coses als usuaris i desenvolupadors. Aquest suport s'habilita especificant «<literal
>kde-projects</literal
>» com el «<option
>repository</option
>» per al conjunt de mòduls. </para>

<para
>El &kdesrc-build; normalment només construeix els mòduls que heu llistat en el fitxer de configuració, en l'ordre en què els heu llistat. Però amb un conjunt de mòduls del «<literal
>kde-projects</literal
>», el &kdesrc-build; pot fer una resolució de dependències dels mòduls específics del &kde;, i a més inclou automàticament mòduls en la construcció, fins i tot si només s'especifica indirectament.</para>

<example id="example-using-kde-module-sets">
<title
>Emprar conjunts de mòduls «kde-projects»</title>
<programlisting
># Només afegeix un mòdul per al juk (el repo kde/kdemultimedia/juk)
module-set <replaceable
>juk-set</replaceable>
    <option
>repository</option
> kde-projects
    <option
>use-modules</option
> <replaceable
>juk</replaceable>
end module-set

# Afegeix tots els mòduls a kde/multimedia/*, inclòs el juk,
# però no les altres dependències
module-set <replaceable
>multimedia-set</replaceable>
    <option
>repository</option
> kde-projects
    <option
>use-modules</option
> <replaceable
>kde/multimedia</replaceable>
end module-set

# Afegeix tots els mòduls que es troben a kde/multimedia/*,
# i totes les dependències a «kde-projects» des de fora del
# kde/kdemultimedia
module-set <replaceable
>multimedia-deps-set</replaceable>
    <option
>repository</option
> kde-projects
    <option
>use-modules</option
> <replaceable
>kde/multimedia</replaceable>
    <option
>include-dependencies</option
> <replaceable
>true</replaceable>
end module-set

# Tots els mòduls creats a partir d'aquests tres conjunts de mòduls es
# col·locaran automàticament en l'ordre de dependència adequat,
# independentment de la configuració de les dependències d'inclusió
</programlisting>
</example>

<tip
><para
>Aquesta construcció del conjunt de mòduls «<literal
>kde-projects</literal
>» és el mètode principal per a declarar quins mòduls voleu construir.</para
></tip>

<para
>Tots els conjunts de mòduls utilitzen les opcions «<link linkend="conf-repository"
>repository</link
>» i «<link linkend="conf-use-modules"
>use-modules</link
>». Els conjunts de mòduls «<link linkend="kde-projects-module-sets"
><literal
>kde-projects</literal
></link
>» té un valor «<option
>repository</option
>» predefinit, però altres tipus de conjunts de mòduls també utilitzaran l'opció «<link linkend="conf-git-repository-base"
>git-repository-base</link
>». </para>
</sect3>

</sect2>

<sect2 id="kde-projects-module-sets">
<title
>La base de dades oficial de mòduls del &kde;</title>

<para
>Els repositoris Git del &kde; permeten agrupar mòduls Git relacionats en col·leccions de mòduls relacionats (&pex;, kdegraphics). Git no reconeix aquestes agrupacions, però el &kdesrc-build; les pot comprendre, utilitzant <link linkend="module-sets"
>conjunts de mòduls</link
> amb una opció «<option
>repository</option
>» establerta a <quote
><literal
>kde-projects</literal
></quote
>.</para>

<para
>El &kdesrc-build; reconeixerà que el repositori «<literal
>kde-projects</literal
>» necessita un tractament especial i ajustarà el procés de construcció adequadament. Entre altres coses, el &kdesrc-build; farà:</para>

<itemizedlist>

<listitem
><para
>Descarrega l'última base de dades de mòduls des de l'<ulink url="https://commits.kde.org/"
>arxiu git del &kde;</ulink
>.</para
></listitem>

<listitem
><para
>Intenteu trobar un mòdul amb el nom indicat a l'opció «<option
>use-modules</option
>» del conjunt de mòduls en aquesta base de dades.</para
></listitem>

<listitem
><para
>Per a cada mòdul que es trobi, el &kdesrc-build; cercarà el repositori apropiat a la base de dades, en funció de l'opció «<link linkend="conf-branch-group"
>branch-group</link
>» vigent. Si hi ha un repositori i està actiu per al grup branca, el &kdesrc-build; el farà servir automàticament per a descarregar o actualitzar el codi font. </para
></listitem>

</itemizedlist>

<note
><para
>A la base de dades actual, alguns grups de mòduls no només tenen una col·lecció de mòduls, sinó que <emphasis
>també</emphasis
> declaren el seu propi repositori &git;. En aquestes situacions, el &kdesrc-build; preferirà el repositori &git; del grup en lloc d'incloure els repositoris dels fills. </para
></note>

<para
>El següent exemple mostra com utilitzar la base de dades del mòdul &kde; per a instal·lar la biblioteca multimèdia Phonon.</para>

<informalexample>
<programlisting
>module-set <replaceable
>media-support</replaceable>
    # Aquesta opció haurà de ser «kde-projects» per utilitzar la base de dades dels mòduls.
    <option
><link linkend="conf-repository"
>repository</link
></option
> <literal
>kde-projects</literal>

    # Aquesta opció tria quins mòduls cercar a la base de dades.
    <option
><link linkend="conf-use-modules"
>use-modules</link
></option
> <replaceable
>phonon/phonon</replaceable
> <replaceable
>phonon-gstreamer</replaceable
> <replaceable
>phonon-vlc</replaceable>
end module-set
</programlisting>
</informalexample>

<tip
><para
>S'utilitza <literal
>phonon/phonon</literal
>, ja que (amb la base de dades del projecte actual) el &kdesrc-build; hauria de decidir entre el grup de projectes anomenat <quote
>phonon</quote
> o el projecte individual anomenat <quote
>phonon</quote
>. Actualment, el &kdesrc-build; triarà el primer, el qual generarà molts més dorsals dels necessaris.</para
></tip>

<para
>El següent exemple potser és més realista i mostra una característica només disponible amb la base de dades de mòduls del &kde;: construir totes les aplicacions gràfiques del &kde; amb una sola declaració.</para>

<informalexample>
<programlisting
>module-set <replaceable
>kdegraphics</replaceable>
    # Aquesta opció haurà de ser «kde-projects» per utilitzar la base de dades dels mòduls.
    <option
><link linkend="conf-repository"
>repository</link
></option
> <literal
>kde-projects</literal>

    # Aquesta opció tria quins mòduls cercar a la base de dades.
    <option
><link linkend="conf-use-modules"
>use-modules</link
></option
> <literal
>kdegraphics/libs</literal
> <literal
>kdegraphics/*</literal>
end module-set
</programlisting>
</informalexample>

<para
>Aquí es demostren dues habilitats importants:</para>

<orderedlist>

<listitem
><para
>El &kdesrc-build; permet especificar mòduls que són descendents d'un mòdul indicat, sense construir el mòdul pare, utilitzant la sintaxi <userinput
><replaceable
>nom_mòdul</replaceable
>/*</userinput
>. En realitat, es requereix en aquest cas, ja que el mòdul base, kdegraphics, està marcat com a inactiu perquè no es construeixi accidentalment juntament amb els seus mòduls fills. L'especificació dels mòduls descendents permet que el &kdesrc-build; ometi el mòdul inhabilitat. </para
></listitem>

<listitem
><para
>El &kdesrc-build; tampoc afegirà un mòdul indicat a la llista de construcció més d'una vegada. Això permet configurar manualment <literal
>kdegraphics/libs</literal
> per a construir-lo primer, abans que la resta del <literal
>kdegraphics</literal
>, sense intentar construir <literal
>kdegraphics/libs</literal
> dues vegades. Això solia ser necessari per al maneig adequat de les dependències, i avui segueix sent una opció alternativa en cas que la base de dades del projecte &kde; no tingui metadades sobre les dependències. </para
></listitem>
</orderedlist>
</sect2>

<sect2 id="ignoring-project-modules">
<title
>Filtrar mòduls del projecte &kde;</title>

<para
>Podeu decidir que voleu construir tots els programes dins d'una agrupació de mòduls del &kde;, <emphasis
>excepte</emphasis
> un programa indicat.</para>

<para
>Per exemple, el grup <literal
>kdeutils</literal
> inclou un programa anomenat <application
>kremotecontrol</application
>. Si el vostre ordinador no té el maquinari adequat per a rebre els senyals enviats pels controls remots, llavors podríeu decidir que preferiu no descarregar, construir i instal·lar el <application
>kremotecontrol</application
> cada vegada que actualitzeu el <literal
>kdeutils</literal
>.</para>

<para
>Podeu aconseguir això utilitzant l'opció de configuració <link linkend="conf-ignore-modules"
>ignore-modules</link
>. A la línia d'ordres, l'<link linkend="ignoring-modules"
>opció &cmd-ignore-modules;</link
> fa el mateix, però és més oportú per a filtrar un mòdul només una vegada. </para>

<example id="example-ignoring-a-module">
<title
>Exemple per ignorar un mòdul «kde-project» en un grup</title>
<programlisting
>module-set <replaceable
>utils</replaceable>
    <option
><link linkend="conf-repository"
>repository</link
></option
> <literal
>kde-projects</literal>

    # Aquesta opció tria quins mòduls cercar a la base de dades.
    <option
><link linkend="conf-use-modules"
>use-modules</link
></option
> <replaceable
>kdeutils</replaceable>

    # Aquesta opció «manlleva» aquests mòduls dels mòduls escollits
    # anteriorment per «use-modules».
    <option
><link linkend="conf-ignore-modules"
>ignore-modules</link
></option
> <replaceable
>kremotecontrol</replaceable>
end module-set

module-set <replaceable
>graphics</replaceable>
    <option
><link linkend="conf-repository"
>repository</link
></option
> <literal
>kde-projects</literal>

    # Aquesta opció tria quins mòduls cercar a la base de dades.
    <option
><link linkend="conf-use-modules"
>use-modules</link
></option
> <replaceable
>extragear/graphics</replaceable>

    # Aquesta opció «manlleva» aquests mòduls dels mòduls escollits
    # anteriorment per «use-modules».
    # En aquest cas, *ambdós* extragear/graphics/kipi-plugins i
    # extragear/graphics/kipi-plugins/kipi-plugins-docs seran ignorats
    <option
><link linkend="conf-ignore-modules"
>ignore-modules</link
></option
> <replaceable
>extragear/graphics/kipi-plugins</replaceable>
end module-set
</programlisting>
</example>

</sect2>

</sect1>

<sect1 id="quick-start-conclusion">
<title
>Conclusions</title>
<para
>Aquestes són les principals característiques i conceptes necessaris per a començar amb el &kdesrc-build;.</para>

<para
>Per obtenir informació addicional, podeu seguir llegint aquesta documentació. En particular, la <link linkend="supported-cmdline-params"
>llista d'opcions de la línia d'ordres</link
> i la <link linkend="conf-options-table"
>taula d'opcions del fitxer de configuració</link
> són referències útils.</para>

<para
>La Comunitat &kde; també manté <ulink url="https://community.kde.org/Guidelines_and_HOWTOs/Build_from_source"
>una referència wiki en línia sobre com construir el codi font</ulink
>, la qual es refereix al &kdesrc-build; i inclou consells i altres pautes sobre com utilitzar l'eina.</para>

</sect1>

</chapter>

<chapter id="features">
<title
>Característiques de l'script</title>

<sect1 id="features-overview">
<title
>Resum de les característiques</title>

<para
>Característiques incloses de &kdesrc-build;: </para>

<itemizedlist>

<listitem
><para
>Podeu <quote
>fingir</quote
> fer les operacions. Si passeu <option
>--pretend</option
> o <option
>-p</option
> a la línia d'ordres, l'script donarà una descripció detallada de les ordres que esteu a punt d'executar, sense executar-lo realment. No obstant això, si mai heu executat el &kdesrc-build;, voldreu executar primer l'ordre <command
>kdesrc-build <option
><link linkend="cmdline-metadata-only"
>--metadata-only</link
></option
></command
> només perquè funcioni <option
>--pretend</option
>. <tip
><para
>Per obtenir una descripció encara més detallada del que està fent el &kdesrc-build;, intenteu utilitzar l'opció <option
>--debug</option
>. </para
></tip>

</para
></listitem>

<listitem
><para
>El &kdesrc-build; pot (amb l'ajuda del servidor FTP del &kde;) permetre extreure ràpidament alguns mòduls de Subversion. Si el mòdul que esteu extraient ja s'ha empaquetat en el lloc web, llavors el &kdesrc-build; descarregarà la instantània i la prepararà per utilitzar-la al vostre ordinador. </para>

<tip
><para
>En general, no hi ha necessitat de cap preparació especial per a realitzar l'extracció inicial d'un mòdul Git, ja que el repositori Git complet haurà de descarregar-se igualment, de manera que és fàcil per al servidor determinar què enviar.</para
></tip>

<para
>Això és més ràpid i ajuda a manllevar la càrrega en els servidors anònims de &subversion; de kde.org.</para>
</listitem>

<listitem
><para
>Es proporciona una altra acceleració en iniciar el procés de construcció d'un mòdul tan aviat com s'hagi descarregat el codi font d'aquest mòdul. (Disponible des de la versió 1.6). </para
></listitem>

<listitem
><para
>Excel·lent suport per a compilar la biblioteca de les &Qt; (en cas que el programari &kde; que esteu intentant compilar depengui d'unes &Qt; recents no disponibles a la vostra distribució). </para
></listitem>

<listitem
><para
>El &kdesrc-build; no requereix una <acronym
>IGU</acronym
> present per a funcionar. Per tant, podreu construir el programari &kde; sense necessitat d'un entorn gràfic. </para
></listitem>

<listitem
><para
>Admet la configuració d'opcions predeterminades per a tots els mòduls (com la configuració de la compilació o les opcions de configuració). Aquestes opcions normalment també es poden canviar per a mòduls específics.</para>

<para
>A més, el &kdesrc-build; <link linkend="kdesrc-build-std-flags"
>afegirà indicadors estàndard</link
> segons correspongui per evitar-vos problemes i possibles errors en escriure. Nota Bene: això no s'aplica quan es configura una cadena d'eines (personalitzada) a través de, &pex;: «<link linkend="conf-cmake-toolchain"
>cmake-toolchain</link
>» </para
></listitem>

<listitem
><para
>El &kdesrc-build; pot extreure una <link linkend="using-branches"
>branca o etiqueta</link
> específica d'un mòdul. També podeu assegurar-vos que s'extregui una <link linkend="conf-revision"
>revisió</link
> d'un mòdul. </para
></listitem>

<listitem
><para
>El &kdesrc-build; pot canviar automàticament un directori de codi font per extreure des d'un repositori, branca o etiqueta diferent. Això succeeix automàticament quan canvieu una opció que canvia quin hauria de ser l'&url; del repositori, però haureu d'utilitzar l'opció <link linkend="cmdline-src-only"
>--src-only</link
> perquè el &kdesrc-build; sàpiga que és acceptable fer el canvi. </para
></listitem>

<listitem
><para
>El &kdesrc-build; pot <link linkend="partial-builds"
>extreure només parts d'un mòdul</link
>, per a aquelles situacions en què només necessiteu un programa d'un mòdul gran. </para
></listitem>

<listitem
><para
>Per als desenvolupadors: el &kdesrc-build; <link linkend="ssh-agent-reminder"
>recordarà</link
> si feu servir svn+ssh:// però que el <application
>ssh-agent</application
> no s'està executant, ja que això conduirà a repetides sol·licituds de la contrasenya per a &ssh;. </para
></listitem>

<listitem
><para
>Podeu <link linkend="deleting-build-dir"
>suprimir el directori de construcció</link
> d'un mòdul després de la seva instal·lació per estalviar espai a costa del temps de compilació futur. </para
></listitem>

<listitem
><para
>Les ubicacions dels directoris utilitzats pel &kdesrc-build; són configurables (fins i tot per mòdul). </para
></listitem>

<listitem
><para
>Feu servir el &sudo;, o una ordre diferent especificada per l'usuari per a <link linkend="root-installation"
>instal·lar mòduls</link
> de manera que el &kdesrc-build; no necessiti executar-se com a superusuari. </para
></listitem>

<listitem
><para
>El &kdesrc-build; s'executa de manera predeterminada <link linkend="build-priority"
>amb prioritat reduïda</link
> per a permetre-us seguir amb el vostre ordinador mentre està funcionant el &kdesrc-build;. </para
></listitem>

<listitem
><para
>Té suport per utilitzar les <link linkend="using-branches"
>etiquetes i branques</link
> del &kde;. </para
></listitem>

<listitem
><para
>Hi ha suport per a <link linkend="resuming"
>reprendre una construcció</link
> des d'un mòdul indicat. Fins i tot podreu <link linkend="ignoring-modules"
>ignorar alguns mòduls</link
> temporalment per a una construcció indicada. </para
></listitem>

<listitem
><para
>El &kdesrc-build; mostrarà el <link linkend="build-progress"
>progrés de la vostra construcció</link
> quan feu servir el &cmake;, i sempre cronometrarà el procés de construcció de manera que conegueu després quant temps ha trigat. </para
></listitem>

<listitem
><para
>Ve integrat amb un conjunt sensat d'opcions predeterminades apropiades per a construir una instal·lació bàsica del &kde; d'un únic usuari des dels repositoris anònims de codi font. </para
></listitem>

<listitem
><para
>Expansió per a les opcions de configuració. Per exemple, podeu especificar: <programlisting
>qtdir ~/kdesrc/build/qt</programlisting>
</para
></listitem>

<listitem
><para
>Estableix de manera automàtica un sistema de construcció, amb el directori de codi font no és el mateix que el directori de construcció, per a mantenir impecable el directori de codi font. </para
></listitem>

<listitem
><para
>Podeu especificar opcions globals per aplicar a cada mòdul per extreure, i també donar opcions per aplicar a mòduls individuals. </para
></listitem>

<listitem
><para
>Reconstruccions forçades completes, executant el &kdesrc-build; amb l'opció <option
>--refresh-build</option
>. </para
></listitem>

<listitem
><para
>Podeu especificar diversos valors d'entorn per utilitzar durant la construcció, inclosos <envar
>KDEDIR</envar
>, <envar
>QTDIR</envar
>, <envar
>DO_NOT_COMPILE</envar
> i <envar
>CXXFLAGS</envar
>. </para
></listitem>

<listitem
><para
>Registre de les ordres. Els registres estan datats i numerats perquè sempre tingueu un registre d'un script executat. A més, es crea un enllaç simbòlic especial cridat últim per apuntar sempre a l'entrada de registre més recent en el directori de registre. </para
></listitem>

<listitem
><para
>Podeu extreure només una part d'un mòdul de &subversion; del &kde;. Per exemple, podeu extreure només la <application
>taglib</application
> des de <application
>kdesupport</application
>. </para
></listitem>

</itemizedlist>

</sect1>

<sect1 id="kdesrc-build-logging">
<title
>Registre de construcció de &kdesrc-build;</title>

<sect2 id="logging-overview">
<title
>Resum del registre</title>

<para
>El registre és una característica de &kdesrc-build; per la qual el resultat de cada ordre que executa es desa en un fitxer per al seu posterior examen, si cal. Això es fa perquè sovint és necessari tenir la sortida d'aquests programes quan hi ha una fallada de construcció, perquè hi ha moltes raons per les quals una construcció pot fallar.</para>

<sect3 id="log-directory-layout">
<title
>Disposició del directori de registre</title>

<para
>Els registres sempre s'emmagatzemen sota el directori de registre. La destinació del directori de registre està controlada per l'opció «<link linkend="conf-log-dir"
>log-dir</link
>», la qual de manera predeterminada és <filename class="directory"
><symbol
>${source-dir}</symbol
>/log</filename
> (on <symbol
>${source-dir}</symbol
> és el valor de l'opció «<link linkend="conf-source-dir"
>source-dir</link
>». A la resta d'aquesta secció, aquest valor s'anomenarà <symbol
>${log-dir}</symbol
>).</para>

<para
>Sota <symbol
>${log-dir}</symbol
>, hi ha un conjunt de directoris, un per a cada vegada que s'ha executat el &kdesrc-build;. Cada directori s'anomena amb la data i el número d'execució. Per exemple, la segona vegada que s'executa el &kdesrc-build; el 26 de maig de 2004, crearia un directori anomenat <filename
>2004-05-26-02</filename
>, on 2004-05-26 és per a la data, i -02 és el número d'execució.</para>

<para
>Per a la vostra comoditat, el &kdesrc-build; també crearà un enllaç amb els registres per a la vostra última execució, anomenada <filename class="directory"
>latest</filename
> (última). Per tant, els registres de la darrera execució de &kdesrc-build; sempre estaran sota <filename class="directory"
><symbol
>${log-dir}</symbol
>/latest</filename
>. </para>

<para
>Ara, cada directori per a una execució de &kdesrc-build; contindrà un conjunt de directoris, un per a cada mòdul del &kde; que intenteu construir. A més, d'un fitxer anomenat <filename
>build-status</filename
> (estat de la construcció), el qual us permetrà determinar quins mòduls s'han compilat i quins han fallat.</para>

<note
><para
>Si un mòdul en si té un submòdul (com extragear/multimèdia, playground/utils o KDE/kdelibs), llavors hi haurà d'haver una disposició coincident en el directori de registre. Per exemple, els registres per a KDE/kdelibs després de l'última execució de &kdesrc-build; es trobaran a <filename class="directory"
><symbol
>${log-dir}</symbol
>/latest/KDE/kdelibs</filename
>, i no a <filename class="directory"
><symbol
>${log-dir}</symbol
>/latest/kdelibs</filename
>. </para
></note>

<para
>A cada directori de registre del mòdul, trobareu un conjunt de fitxers per a cada operació que realitza el &kdesrc-build;. Si el &kdesrc-build; actualitza un mòdul, és possible que vegeu noms de fitxer com <filename
>svn-co.log</filename
> (per a extreure un mòdul) o <filename
>svn-up.log</filename
> (en actualitzar un mòdul que ja s'ha extret). Si s'ha executat l'ordre <command
>configure</command
>, llavors esperaríeu veure un <filename
>configure.log</filename
> en aquest directori.</para>

<para
>Si succeeix un error, hauríeu de poder veure una explicació de per què en un dels fitxers. Per ajudar a determinar quin fitxer conté l'error, el &kdesrc-build; crearà un enllaç des del fitxer que conté l'error (com <filename
>build-1.log</filename
> cap a un fitxer anomenat <filename
>error.log</filename
>).</para>

<para
>El resultat de tot això és que per a veure perquè un mòdul no s'ha pogut construir després de l'última execució de &kdesrc-build;, el fitxer que haureu de mirar primer és <filename
><symbol
>${log-dir}</symbol
>/latest/<replaceable
>nom_mòdul</replaceable
>/error.log</filename
>. </para>

<tip
><para
>Si el fitxer <filename
>error.log</filename
> està buit (especialment després d'una instal·lació), llavors potser no hi ha hagut cap error. Algunes de les eines utilitzades pel sistema de construcció del &kde;, de vegades informen erròniament d'un error quan no n'hi havia cap.</para>

<para
>A més, algunes ordres evadiran la redirecció de la sortida de &kdesrc-build; i obviaran el fitxer de registre en certes circumstàncies (normalment quan es realitza la primera extracció des de &subversion;), i la sortida d'error en aquest cas no estarà en el fitxer de registre sinó al &konsole; o terminal on vàreu executar el &kdesrc-build;.</para>
</tip>

</sect3>
</sect2>
</sect1>

</chapter>

<chapter id="kdesrc-buildrc">
<title
>Configurar el &kdesrc-build;</title>

<sect1 id="kdesrc-buildrc-overview">
<title
>Resum de la configuració de &kdesrc-build;</title>

<para
>Per utilitzar l'script, haureu de tenir un fitxer en el directori d'inici anomenat <filename
>.kdesrc-buildrc</filename
>, el qual descriu els mòduls que us agradaria descarregar i construir, i qualsevol opció o paràmetre de configuració a utilitzar per a aquests mòduls. </para>

<sect2 id="kdesrc-buildrc-layout">
<title
>Disposició del fitxer de configuració</title>

<sect3 id="kdesrc-buildrc-layout-global">
<title
>Configuració global</title>

<para
>El fitxer de configuració comença amb les opcions globals, especificades com les següents: </para>

<programlisting
>global
<replaceable
>nom_opció valor_opció</replaceable>
<replaceable
>[...]</replaceable>
end global
</programlisting>

</sect3>
<sect3 id="kdesrc-buildrc-layout-modules">
<title
>Configuració del mòdul</title>

<para
>Després li segueixen una o més seccions de mòdul, especificades en una de les dues formes següents: </para>

<itemizedlist>
<listitem>
<programlisting
>module <replaceable
>nom_mòdul</replaceable>
<replaceable
>nom_opció valor_opció</replaceable>
<replaceable
>[...]</replaceable>
end module
</programlisting>
</listitem>

<listitem>
<programlisting
>module-set <replaceable
>nom_conjunt_mòduls</replaceable>
  repository <userinput
>kde-projects</userinput
> or <userinput
><replaceable
>git://amfitrió.org/camí/al/repo.git</replaceable
></userinput>
  use-modules <replaceable
>noms_mòduls</replaceable>

# També es poden establir altres opcions
<replaceable
>nom_opció valor_opció</replaceable>
<replaceable
>[...]</replaceable>
end module-set
</programlisting>
</listitem>
</itemizedlist>

<important
><para
>Recordeu que la segona forma, els «module-set», <emphasis
>només funcionarà per als mòduls basats en Git</emphasis
>.</para
></important>

<para
>Per als mòduls basats en Subversion, el <replaceable
>nom_mòdul</replaceable
> haurà de ser un mòdul del repositori de &subversion; del &kde; (per exemple, kdeartwork o kde-wallpapers), encara que és possible evitar-ho si <link linkend="conf-override-url"
>especifiqueu manualment l'URL de &subversion;</link
>. </para>

<para
>Per als mòduls basats en Git, el <replaceable
>nom_mòdul</replaceable
> podrà ser essencialment el que vulgueu, sempre que no dupliqueu cap altre nom de mòdul a la configuració. Recordeu que la disposició del directori de codi font i de construcció es basarà en el nom del mòdul si no utilitzeu l'opció <link linkend="conf-dest-dir"
>dest-dir</link
>. </para>

<para
>No obstant això, per als <emphasis
>conjunts de mòduls</emphasis
> de Git, els <replaceable
>noms_mòduls</replaceable
> s'hauran de correspondre amb els mòduls git reals en el «<option
>repository</option
>» triat. Vegeu «<link linkend="conf-git-repository-base"
>git-repository-base</link
>» o «<link linkend="conf-use-modules"
>use-modules</link
>» per a més informació. </para>

</sect3>

<sect3 id="kdesrc-buildrc-option-values">
<title
>Processament dels valors de les opcions</title>

<para
>En general, s'utilitza el contingut de tota la línia després de la secció <replaceable
>nom_opció</replaceable
>, així com el <replaceable
>valor_opció</replaceable
>.</para>

<para
>Una modificació que realitza el &kdesrc-build; és que se substitueix una seqüència <userinput
>${<replaceable
>nom_opció</replaceable
>}</userinput
> amb el valor d'aquesta opció des de la configuració global. Això permet fer referència al valor de les opcions existents, incloses les opcions ja establertes pel &kdesrc-build;.</para>

<para
>Per a veure un exemple d'aquest ús, vegeu l'<xref linkend="make-options-example"/>.</para>

</sect3>

<sect3 id="kdesrc-buildrc-options-groups">
<title
><quote
>Opcions</quote
> dels mòduls</title>

<para
>Hi ha un tipus final d'entrada al fitxer de configuració, grups «<literal
>options</literal
>», els quals es poden indicar sempre que es pugui utilitzar «<literal
>module</literal
>» o «<literal
>module-set</literal
>».</para>

<programlisting
>options <replaceable
>nom_mòdul</replaceable>
<replaceable
>nom_opció valor_opció</replaceable>
<replaceable
>[...]</replaceable>
end options
</programlisting>

<para
>Un grup «<literal
>options</literal
>» pot tenir conjunts d'opcions com una declaració de mòdul, i està associat amb un mòdul existent. Qualsevol opció establerta d'aquesta manera s'utilitzarà per a <emphasis
>superposar</emphasis
> les opcions establertes per al mòdul associat.</para>

<important
><para
>El nom del mòdul associat <emphasis
>haurà</emphasis
> de coincidir amb el nom indicat a la declaració «<literal
>options</literal
>». Aneu amb compte de no escriure malament el nom.</para
></important>

<para
>Això és útil per a permetre la declaració de tot un «<literal
>module-set</literal
>», tots amb les mateixes opcions i després utilitzant grups «<literal
>options</literal
>» per a fer canvis individuals.</para>

<para
>Els grups «<literal
>options</literal
>» també poden aplicar-se a conjunts de mòduls amb nom. Això permet als usuaris experts utilitzar un fitxer de configuració comú (el qual inclourà les declaracions de «<literal
>module-set</literal
>») com a línia de base, i després fer canvis a les opcions utilitzades per aquests conjunts de mòduls en els fitxers de configuració que fan servir l'ordre «<literal
><link linkend="kdesrc-buildrc-including"
>include</link
></literal
>» per a fer referència a la configuració base.</para>

<example id="ex-options-group">
<title
>Exemple d'ús de les opcions</title>

<para
>En aquest exemple, hem triat construir tots els mòduls de l'agrupació de programari multimèdia del &kde;. No obstant això, volem utilitzar una versió diferent de l'aplicació &kmix; (potser per a provar una correcció d'error). Funciona de la següent manera:</para>

<programlisting
>module-set <replaceable
>kde-multimedia-set</replaceable>
  repository <userinput
>kde-projects</userinput>
  use-modules <replaceable
>kde/kdemultimedia</replaceable>
  branch <replaceable
>master</replaceable>
end module-set

# kmix forma part del grup kde/kdemultimedia, encara que no hem anomenat
# mai el kmix en aquest fitxer, el &kdesrc-build; esbrinarà el canvi.
options <replaceable
>kmix</replaceable>
  branch <replaceable
>KDE/4.12</replaceable>
end options
</programlisting>

<para
>Ara, quan executeu el &kdesrc-build;, es construiran tots els programes multimèdia del &kde; des de la branca <quote
>master</quote
> del repositori de codi font, però el &kmix; es crearà des de la branca més antiga <quote
>KDE/4.12</quote
>. Per utilitzar «<literal
>options</literal
>», no haureu de llistar individualment tots els <emphasis
>altres</emphasis
> programes multimèdia del &kde; per a indicar l'opció de la branca correcta.</para>

</example>

<note>
<para
>Recordeu que aquesta característica només està disponible en el &kdesrc-build; a partir de la versió 1.16, o utilitzant la versió de desenvolupament després de la 2014-01-12.</para
></note>

</sect3>

</sect2>

<sect2 id="kdesrc-buildrc-including">
<title
>Incloure altres fitxers de configuració</title>

<para
>Dins del fitxer de configuració, podreu fer referència a altres fitxers utilitzant la paraula clau «<literal
>include</literal
>» amb un fitxer, el qual actuarà com si el fitxer a què es fa referència s'hagi inserit en el fitxer de configuració en aquest punt. </para>

<informalexample
><para
>Per exemple, podríeu tenir quelcom com això:</para>
<programlisting
>global
    include <replaceable
>~/common-kdesrc-build-options</replaceable>

    # Inseriu aquí les opcions específiques.

end global
</programlisting>
</informalexample>

<note
><para
>Si no especifiqueu el camí complet cap al fitxer a incloure, llavors se cercarà començant des del directori que conté el fitxer d'origen. Això també funciona de manera recursiva.</para
></note>

</sect2>

<sect2 id="kdesrc-buildrc-common">
<title
>Opcions de configuració d'ús habitual</title>

<para
>La següent és una llista d'opcions d'ús comú. Feu clic sobre l'opció per obtenir més informació referent a això. Per a veure la llista completa d'opcions, vegeu la <xref linkend="conf-options-table"/>. </para>

<itemizedlist>
<listitem
><para
><link linkend="conf-cmake-options"
>cmake-options</link
>, per a definir amb quins indicadors configurar un mòdul utilitzant el &cmake;.</para
></listitem>
<listitem
><para
><link linkend="conf-branch"
>branch</link
>, per extreure des d'una branca en lloc de /trunk (per a &subversion;) o <literal
>master</literal
> (per a Git).</para
></listitem>
<listitem
><para
><link linkend="conf-configure-flags"
>configure-flags</link
>, per a definir amb quins indicadors configurar les &Qt;.</para
></listitem>
<listitem
><para
><link linkend="conf-kdedir"
>kdedir</link
>, per a establir el directori en el qual instal·lar el &kde;.</para
></listitem>
<listitem
><para
><link linkend="conf-make-options"
>make-options</link
>, per a passar opcions al programa &make; (com el nombre de CPU a utilitzar).</para
></listitem>
<listitem
><para
><link linkend="conf-qtdir"
>qtdir</link
>, per a establir el camí cap a les &Qt;.</para
></listitem>
<listitem
><para
><link linkend="conf-source-dir"
>source-dir</link
>, per a canviar on descarregar el codi font.</para
></listitem>
</itemizedlist>

</sect2>
</sect1>
<sect1 id="conf-options-table">
<title
>Taula de les opcions de configuració disponibles</title>

<para
>Aquí hi ha una taula de les diverses opcions, conté la següent informació:</para>

<itemizedlist>

<listitem
><para
>El nom de l'opció</para
></listitem>

<listitem
><para
>Una descripció de com respondrà el &kdesrc-build; si l'opció s'estableix tant a la secció global com a la secció del mòdul al <link linkend="configure-data"
>fitxer de configuració</link
>, mentre es crea un mòdul.</para
></listitem>

<listitem
><para
>Comentaris especials sobre la finalitat i ús de l'opció.</para
></listitem>

</itemizedlist>

<table id="option-table">
<title
>Taula d'opcions</title>
<tgroup cols="3">

<thead>
<row>
<entry
>Nom de l'opció</entry>
<entry
>Mòdul -&gt; Comportament global</entry>
<entry
>Notes</entry>
</row>
</thead>

<tbody>

<row>
<entry
>apidox</entry>
<entry
></entry>
<entry
><para
>Aquesta opció s'utilitza per a la construcció de la documentació de l'API per als mòduls del &kde;. S'ha eliminat en el &kdesrc-build; 1.6.3 a causa de la falta de suport. La documentació de l'API està disponible en línia a <ulink url="https://api.kde.org/"
>kde.org</ulink
>. A més, és possible crear la documentació de l'API del &kde; utilitzant l'script <command
>kdedoxygen.sh</command
> inclòs en el mòdul kde-dev-scripts. Vegeu la <ulink url="https://techbase.kde.org/Development/Tools/apidox"
>TechBase del &kde;</ulink
> per a més detalls.</para>
</entry>
</row>

<row>
<entry
>apply-qt-patches</entry>
<entry
></entry>
<entry
>Aquesta opció es va eliminar en el &kdesrc-build; 1.10. Per obtenir el mateix efecte, vegeu la <xref linkend="using-qt"/> i l'opció «<link linkend="conf-repository"
>repository</link
>».</entry>
</row>

<row id="conf-async">
<entry
>async</entry>
<entry
>No es pot superposar</entry>
<entry
><para
>Aquesta opció permet el mode d'operació asíncron, on l'actualització del codi font i el procés de construcció es realitzaran en paral·lel, en lloc d'esperar totes les actualitzacions del codi font abans de començar amb el procés de construcció. Aquesta opció permet el mode asíncron. Per a inhabilitar-la, establiu aquesta opció a «<userinput
>false</userinput
>» (fals).</para>
<para
>Aquesta opció està disponible des de la versió 1.6.</para
></entry>
</row>

<row id="conf-binpath">
<entry
>binpath</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Establiu aquesta opció per a establir la variable d'entorn <envar
>PATH</envar
> mentre es construeix. No podreu superposar aquesta opció en una opció de mòdul. De manera predeterminada és la $<envar
>PATH</envar
> que s'estableix quan s'inicia l'script. Aquesta variable d'entorn haurà d'incloure els camins separats per dos punts de la vostra cadena d'eines de desenvolupament. Els camins <filename class="directory"
>$<envar
>KDEDIR</envar
>/bin</filename
> i <filename class="directory"
>$<envar
>QTDIR</envar
>/bin</filename
> s'afegiran de manera automàtica. Feu servir la titlla (~) per a qualsevol camí que afegiu utilitzant aquesta opció.</para>
</entry>
</row>

<row id="conf-branch">
<entry
>branch</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Establiu aquesta opció per a extreure des d'una branca del &kde; en lloc de la <replaceable
>master</replaceable
> predeterminada (per a mòduls de &git;) o ​​<replaceable
>trunk</replaceable
> (per a mòduls de &subversion;), on es realitza el desenvolupament del &kde;.</para>

<para
>Per exemple, per a extreure la branca 4.6 del &kde;, establireu aquesta opció a <replaceable
>4.6</replaceable
>.</para>

<para
>Si el &kdesrc-build; falla en descarregar correctament una branca amb aquesta opció, és possible que hàgiu d'especificar manualment l'&url; per a descarregar utilitzant les opcions «<link linkend="conf-module-base-path"
>module-base-path</link
>» o «<link linkend="conf-override-url"
>override-url</link
>».</para>

<note
><para
>Per a la majoria dels mòduls del &kde;, és probable que vulgueu utilitzar l'opció «<link linkend="conf-branch-group"
>branch-group</link
>» en el seu lloc i utilitzar aquesta opció per a excepcions cas per cas.</para
></note>

</entry>
</row>

<row id="conf-branch-group">
<entry
>branch-group</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry>

<para
>Establiu aquesta opció a un grup general del qual voleu triar els mòduls.</para>

<para
>Per als tipus de mòduls de &git;, el &kdesrc-build; determinarà la branca real que s'utilitzarà automàticament segons les regles codificades pels desenvolupadors del &kde; (aquestes regles es poden veure a «<literal
>kde-build-metadata</literal
>» del repositori del codi font al vostre directori de codi font). Després de determinar una branca, aquesta s'utilitzarà com si l'haguéssiu especificat utilitzant l'opció «<link linkend="conf-branch"
>branch</link
>». </para>

<para
>Això és útil si només intenteu mantenir actualitzada alguna pista de desenvolupament normal sense haver de prestar atenció a tots els canvis en el nom de la branca.</para>

<para
>Els «branch-group» actuals (des de 2013-08-11) són:</para>

<itemizedlist>

<listitem
><para
><literal
>stable-qt4</literal
>, per a fer el seguiment de les correccions d'error a les biblioteques i aplicacions &kde; basades en les &Qt; 4.</para
></listitem>

<listitem
><para
><literal
>latest-qt4</literal
>, per a fer el seguiment del desenvolupament i noves característiques a les biblioteques i aplicacions &kde; basades en les &Qt; 4.</para
></listitem>

<listitem
><para
><literal
>kf5-qt5</literal
>, per a fer el seguiment del desenvolupament <quote
>avantguardista</quote
> per als propers Frameworks 5 del &kde; basats en les &Qt; 5, espai de treball &plasma; 2, &etc;</para
></listitem>

</itemizedlist>

<para
>Recordeu que si <emphasis
>trieu</emphasis
> una «<literal
>branch</literal
>», se superposarà aquesta opció. El mateix passarà amb les altres opcions de selecció d'una branca específica, com a <link linkend="conf-tag"
>etiqueta</link
>.</para>

<para
>Aquesta opció es va introduir en el &kdesrc-build; 1.16-pre2.</para>

<note
><para
>Aquesta opció només s'aplica als mòduls de &git; de «<literal
>kde-projects</literal
>» (el cas habitual). Vegeu també <xref linkend="kde-projects-module-sets"/>. </para
></note>

</entry>
</row>

<row id="conf-build-dir">
<entry
>build-dir</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
>Utilitzeu aquesta opció per a canviar el directori que conté el codi font compilat. Hi ha tres maneres diferents d'utilitzar-la: <orderedlist
> <listitem
><para
>Relativa al directori de codi font de &subversion; del &kde; (vegeu l'opció «<link linkend="conf-source-dir"
>source-dir</link
>»). Aquest és el valor predeterminat i se selecciona si escriviu un nom de directori que no comenci amb una titlla (~) o una barra diagonal (/).</para
> <para
>El valor predeterminat és «<filename class="directory"
>build</filename
>».</para
></listitem
> <listitem
><para
>Camí absolut. Si especifiqueu un camí que comença amb una /, s'utilitzarà directament aquest camí. Per exemple, <filename class="directory"
>/tmp/kde-obj-dir/</filename
>.</para
></listitem
> <listitem
><para
>Relativa al vostre directori d'inici. Si especifiqueu un camí que comença amb un «~», llavors s'utilitzarà el camí en relació amb el vostre directori d'inici, de forma anàloga a l'expansió de la titlla a l'intèrpret d'ordres. Per exemple, <filename class="directory"
>~/builddir</filename
> establirà el directori de construcció a <filename class="directory"
>/home/nom_usuari/builddir</filename
>.</para
></listitem
> </orderedlist
> Potser resultarà sorprenent, aquesta opció es pot canviar per mòdul. </entry>
</row>

<row id="conf-build-when-unchanged">
<entry
>build-when-unchanged</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Utilitzeu aquesta opció per a controlar si el &kdesrc-build; intentarà construir sempre un mòdul que no hagi tingut actualitzacions en el codi font.</para>

<para
>En establir «<option
>build-when-unchanged</option
>» a «<userinput
>true</userinput
>» (cert), el &kdesrc-build; sempre intentarà la fase de construcció per a un mòdul, encara que no tingui actualitzacions en el codi font. Aquesta és l'opció predeterminada, ja que és més probable que condueixi a una construcció amb èxit.</para>

<para
>En establir «<option
>build-when-unchanged</option
>» a «<userinput
>false</userinput
>» (fals), el &kdesrc-build; només intentarà executar la fase de construcció per a un mòdul, si aquest té una actualització en el codi font, o en altres situacions on és probable que sigui necessària una reconstrucció. Això pot estalviar temps, especialment si executeu diàriament el &kdesrc-build;, o amb més freqüència.</para>

<important
><para
>Aquesta característica es proporciona només com una optimització. Com moltes altres optimitzacions, hi ha compensacions per a l'exactitud de la vostra instal·lació. Per exemple, els canvis en els mòduls qt o kdelibs poden fer que sigui necessari reconstruir altres mòduls, encara que el codi font no hagi canviat.</para
></important>
</entry>
</row>

<row id="conf-checkout-only">
<entry
>checkout-only</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Aquesta opció es va eliminar el gener de 2022. Solia controlar la capacitat d'extreure subconjunts d'un mòdul des d'un repositori de Subversion.</para>
</entry>
</row>

<row id="conf-cmake-generator">
<entry
>cmake-generator</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Utilitzeu aquesta opció per especificar quin generador utilitzar amb el &cmake;. Actualment s'admeten tant els <literal
>Ninja</literal
> com els <literal
>Makefile</literal
> d'<literal
>Unix</literal
>, així com generadors addicionals basats en ells com <literal
>Eclipse CDT4 - Ninja</literal
>. Els valors no vàlids (no admesos) seran ignorats i es tractaran com si no s'haguessin establert. Si no està establerta, s'utilitzaran de manera predeterminada els <literal
>Makefile</literal
> d'<literal
>Unix</literal
>. </para>

<para
>Tingueu en compte que si també s'especifica un generador vàlid mitjançant l'opció «<link linkend="conf-cmake-options"
>cmake-options</link
>», se superposarà el valor de «<literal
>cmake-generator</literal
>».</para
></entry>
</row>

<row id="conf-cmake-toolchain">
<entry
>cmake-toolchain</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Utilitzeu aquesta opció per especificar un fitxer de cadena d'eines per utilitzar-lo amb el &cmake;. </para>
<para
>Quan es configura un fitxer de cadena d'eines vàlid, el &kdesrc-build; <emphasis
>ja no establirà automàticament les variables d'entorn</emphasis
>. Utilitzeu «&set-env;», «&binpath;» i «&libpath;» per arreglar l'entorn manualment si el vostre fitxer de cadena d'eines no funciona de manera predeterminada amb el &kdesrc-build;. Per a més informació consulteu <link linkend="kdesrc-build-std-flags"
>el resum dels indicadors estàndard afegits pel &kdesrc-build;</link
>. </para>
<para
>Tingueu en compte que si també s'especifica una cadena d'eines vàlida mitjançant l'opció «<link linkend="conf-cmake-options"
>cmake-options</link
>», se superposarà el valor de «<literal
>cmake-toolchain</literal
>».</para
></entry>
</row>

<row id="conf-cmake-options">
<entry
>cmake-options</entry>
<entry
>Afegeix opcions globals per al sistema de construcció predeterminat, superposarà les opcions globals per als altres sistemes de construcció.</entry>
<entry
><para
>Utilitzeu aquesta opció per especificar quins indicadors passar al &cmake; en crear el sistema de construcció per al mòdul. Quan s'utilitza com una opció global, s'aplicarà a tots els mòduls que construeixi aquest script. Quan s'utilitza com una opció de mòdul, s'afegirà al final de les opcions globals. Això permet especificar opcions habituals al &cmake; en la secció global.</para>

<para
>Aquesta opció no s'aplicarà a les qt (les quals no utilitzen el &cmake;). En el seu lloc utilitzeu «<link linkend="conf-configure-flags"
>configure-flags</link
>».</para>

<para
>Si s'especifica un generador vàlid entre les opcions llistades, se superposarà el valor de «<link linkend="conf-cmake-generator"
>cmake-generator</link
>». Els generadors no vàlids (no admesos) seran ignorats i no es passaran al &cmake;. </para>

<para
>Si s'especifica un fitxer de cadenes d'eines vàlid entre les opcions llistades, se superposarà el valor de «<link linkend="conf-cmake-toolchain"
>cmake-toolchain</link
>». Les cadenes d'eines no vàlides (no admeses) seran ignorades i no es passaran al &cmake;. </para>

<para
>Atès que aquestes opcions es passen directament a la línia d'ordres de &cmake;, s'hauran de proporcionar com s'escriurien dins del &cmake;. Per exemple:</para>

<screen
>cmake-options -DCMAKE_BUILD_TYPE=RelWithDebInfo
</screen>

<para
>Atès que això és una molèstia, el &kdesrc-build; s'esforça per a garantir que, sempre que la resta de les opcions estiguin establertes correctament, hauríeu de poder deixar aquesta opció en blanc. (En altres paraules, els paràmetres <emphasis
>necessaris</emphasis
> de &cmake; s'establiran automàticament).</para
></entry>
</row>

<row id="conf-colorful-output">
<entry
>colorful-output</entry>
<entry
>No es pot superposar</entry>
<entry
>Establiu aquesta opció a «<userinput
>false</userinput
>» (fals) per a inhabilitar la sortida amb color de &kdesrc-build;. Aquesta opció està de manera predeterminada a «<replaceable
>true</replaceable
>» (cert). Recordeu que el &kdesrc-build; no generarà els codis de color enlloc més que no sigui un terminal (com xterm, &konsole; o la consola normal de &Linux;). </entry>
</row>

<row id="conf-compile-commands-export">
<entry
>compile-commands-export</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry>
<para
>Permet la generació d'un <literal
>compile_commands.json</literal
> a través de CMake a dins el directori de construcció. Aquesta opció està de manera predeterminada a «<replaceable
>true</replaceable
>» (cert), establiu-la a «<userinput
>false</userinput
>» (fals) per a inhabilitar aquest comportament. </para>
</entry>
</row>

<row id="conf-compile-commands-linking">
<entry
>compile-commands-linking</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry>
<para
>Permet la creació d'enllaços simbòlics des del <literal
>compile_commands.json</literal
> generats a través de CMake a dins el directori de construcció amb el directori de codi font corresponent. Aquesta opció està de manera predeterminada a «<replaceable
>false</replaceable
>» (fals), establiu-la a «<userinput
>true</userinput
>» (cert) per a habilitar la creació automàtica dels enllaços simbòlics. </para>
</entry>
</row>

<row id="conf-configure-flags">
<entry
>configure-flags</entry>
<entry
>Afegeix opcions globals per al sistema de construcció predeterminat, superposarà les opcions globals per als altres sistemes de construcció.</entry>
<entry
><para
>Utilitzeu aquesta opció per especificar quins indicadors passar a ./configure en crear el sistema de construcció per al mòdul. Quan s'utilitza això com una opció global, s'aplicarà a tots els mòduls que construeixi aquest script. <emphasis
>Aquesta opció només funcionarà per a les qt.</emphasis
></para>

<para
>Per a canviar les opcions de la configuració per als mòduls del &kde;, vegeu «<link linkend="conf-cmake-options"
>cmake-options</link
>». </para>
</entry>
</row>

<row id="conf-custom-build-command">
<entry
>custom-build-command</entry>
<entry
>La configuració del mòdul superposa la global (opció del sistema de construcció)</entry>
<entry>
    <para
>Aquesta opció es pot establir per a executar una ordre diferent (que no sigui <command
>make</command
>, per exemple) per a realitzar el procés de construcció. En general, el &kdesrc-build; hauria de fer el correcte, per la qual cosa no hauríeu de necessitar establir aquesta opció. No obstant això, podria ser útil utilitzar sistemes de construcció alternatius. </para>

    <para
>El valor d'aquesta opció s'utilitzarà com la línia d'ordres on executar, modificat de forma normal per l'opció «<link linkend="conf-make-options"
>make-options</link
>». </para>
</entry>
</row>

<row id="conf-cxxflags">
<entry
>cxxflags</entry>
<entry
>Afegeix opcions globals per al sistema de construcció predeterminat, superposarà les opcions globals per als altres sistemes de construcció.</entry>
<entry
><para
>Utilitzeu aquesta opció per especificar quins indicadors utilitzar per a construir el mòdul. Aquesta opció s'especifica aquí en lloc d'amb «<link linkend="conf-configure-flags"
>configure-flags</link
>» o «<link linkend="conf-cmake-options"
>cmake-options</link
>» perquè aquesta opció també establirà la variable d'entorn <envar
>CXXFLAGS</envar
> durant el procés de construcció.</para>

<para
>Recordeu que per al &kde; 4 i qualsevol altre mòdul que utilitzi el &cmake;, cal establir l'opció CMAKE_BUILD_TYPE a «<userinput
>none</userinput
>» (cap) en configurar el mòdul. Això es pot fer utilitzant l'opció «<link linkend="conf-cmake-options"
>cmake-options</link
>». </para>
</entry>
</row>

<row id="conf-dest-dir">
<entry
>dest-dir</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
>Utilitzeu aquesta opció per a canviar el nom que se li dona a un mòdul en el disc. Per exemple, si el mòdul era extragear/network, podreu canviar-li el nom a extragear-network amb aquesta opció. Recordeu que encara que això canvia el nom del mòdul en el disc, no és una bona idea incloure directoris o separadors de directoris en el nom, ja que això interferirà amb les opcions «<link linkend="conf-build-dir"
>build-dir</link
>» o «<link linkend="conf-source-dir"
>source-dir</link
>». </entry>
</row>

<row id="conf-disable-agent-check">
<entry
>disable-agent-check</entry>
<entry
>No es pot superposar</entry>
<entry
>Normalment, si esteu utilitzant &ssh; per a descarregar el codi font de &subversion; (com quan s'utilitza el protocol svn+ssh), el &kdesrc-build; intentarà assegurar-se que si utilitzeu el ssh-agent, en realitat s'estaran gestionant algunes identitats &ssh;. Això és per evitar que &ssh; sol·liciti una contrasenya per a cada mòdul. És possible inhabilitar aquesta verificació establint «<option
>disable-agent-check</option
>» a «<userinput
>true</userinput
>» (cert). </entry>
</row>

<row id="conf-do-not-compile">
<entry
>do-not-compile</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Utilitzeu aquesta opció per a seleccionar un conjunt específic de directoris que no es construiran en un mòdul (en lloc de tots). Els directoris que no es construiran hauran d'estar separats per espais.</para>

<para
>Recordeu que el codi font dels programes encara es descarregarà.</para>

<para
>Per exemple, per a inhabilitar la creació dels directoris <literal
>codeeditor</literal
> i <literal
>minimaltest</literal
> del marc de treball <literal
>syntaxhighlighting</literal
>, afegireu a la compilació <userinput
>do-not-compile codeeditor minimaltest</userinput
>, afegireu <quote
>do-not-compile juk kscd</quote
> a les vostres opcions de ressaltat de la sintaxi.</para>

<para
>Per a un exemple, vegeu <xref linkend="not-compiling"/>.</para>
</entry>
</row>

<row id="conf-email-address">
<entry
>email-address</entry>
<entry
>No es pot superposar</entry>
<entry>
<para
>Aquesta opció es va eliminar en la versió 1.14. </para>
</entry>
</row>

<row id="conf-email-on-compile-error">
<entry
>email-on-compile-error</entry>
<entry
>No es pot superposar</entry>
<entry>
<para
>Aquesta opció es va eliminar en la versió 1.14. </para>
</entry>
</row>

<row>
<entry
>inst-apps</entry>
<entry
></entry>
<entry
>Aquesta opció es va eliminar en la versió 1.10. </entry>
</row>

<row id="conf-git-desired-protocol">
<entry
>git-desired-protocol</entry>
<entry
>No es pot superposar</entry>
<entry
><para
>Aquesta opció només s'aplicarà als mòduls des d'un repositori de <link linkend="kde-projects-module-sets"
>projecte del &kde;</link
>.</para>

<para
>El que realment fa aquesta opció és configurar quin protocol de xarxa preferiu per a obtenir el codi font per a aquests mòduls. Normalment s'utilitza el protocol <literal
>git</literal
>, el qual és molt eficient, però pot estar bloquejat en algunes xarxes (&pex;, intranets corporatives, Wi-Fi públic). Un protocol alternatiu que és molt millor admès és el protocol <literal
>https</literal
> utilitzat per als llocs web d'Internet.</para>

<para
>Si utilitzeu una d'aquestes xarxes restringides, podreu establir aquesta opció a <userinput
>http</userinput
> per a preferir-lo en comptes de les comunicacions <literal
>https</literal
>.</para>

<tip
><para
>També podríeu necessitar l'opció <link linkend="conf-http-proxy"
>http-proxy</link
> si també es necessita un intermediari HTTP per al trànsit de xarxa.</para
></tip>

<para
>En qualsevol altra situació, no haureu d'establir aquesta opció, ja que el protocol predeterminat és més eficient.</para>

<para
>Aquesta opció es va afegir en el &kdesrc-build; 1.16. Abans de la 20.06, aquesta opció s'utilitzava per a configurar l'URL de cerca en lloc de l'URL d'obtenció. A partir de la 20.06, s'utilitzarà sempre <literal
>https</literal
> en actualitzar els projectes del &kde;.</para>
</entry>
</row>

<row id="conf-git-repository-base">
<entry
>git-repository-base</entry>
<entry
>No es pot superposar</entry>
<entry
><para
>Aquesta opció, afegida a la versió 1.12.1, s'utilitza per a crear un nom curt per a fer referència a un URL base del repositori Git específic, en les declaracions de <link linkend="module-sets"
>conjunts de mòduls</link
> posteriors, la qual cosa és útil per a declarar amb rapidesa la creació de molts mòduls de Git.</para>

<para
>Haureu d'especificar dues coses (separades per un espai): el nom que s'assignarà a l'URL base i l'URL base real en si. Per exemple:</para>

<para>
<informalexample>
<programlisting
>global
   # Altres opcions

   # Aquest és el camí habitual per a tots els mòduls de servidor Git anònim.
   git-repository-base <replaceable
>kde-git</replaceable
> <replaceable
>kde:</replaceable>
end global

# Declaracions del mòdul

module-set
   # Ara podreu fer servir àlies que heu definit amb anterioritat,
   # però <emphasis
>només</emphasis
> sobre un conjunt de mòduls.
   repository <replaceable
>kde-git</replaceable>

   <link linkend="conf-use-modules"
>use-modules</link
> <replaceable
>mòdul_1.git</replaceable
> <replaceable
>mòdul_2.git</replaceable>
end module-set
</programlisting>
</informalexample>
</para>

<para
>L'opció «<literal
>use-modules</literal
>» del conjunt de mòduls ha creat dos mòduls internament, amb el &kdesrc-build; comportant-se com si hagués llegit:</para>

<programlisting
>module module1
    repository kde:<replaceable
>mòdul_1.git</replaceable>
end module

module module2
    repository kde:<replaceable
>mòdul_2.git</replaceable>
end module
</programlisting>

<para
>El prefix de repositori &git; és <literal
>kde:</literal
>, utilitzat abans és una drecera que el &kdesrc-build; configurarà automàticament. Consulteu l'article <ulink url="https://techbase.kde.org/Development/Git/Configuration#URL_Renaming"
>URL Renaming</ulink
> de TechBase per obtenir més informació. Recordeu que, a diferència de la majoria de les altres opcions, aquesta opció es pot especificar múltiples vegades per a crear tants àlies com sigui necessari.</para>

<tip
><para
>No es requereix utilitzar aquesta opció per aprofitar el conjunt de mòduls, aquesta opció existeix per a facilitar l'ús del mateix repositori en molts conjunts de mòduls diferents.</para
></tip>
</entry>
</row>

<row id="conf-git-user">
<entry
>git-user</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry>
<para
>Aquesta opció està destinada als desenvolupadors del &kde;. Si es configura, s'utilitzarà per a configurar automàticament la informació d'identitat per al programari de control del codi font de &git; per als mòduls de &git; <emphasis
>descarregats recentment</emphasis
> (inclosa la gran majoria dels mòduls &kde;).</para>

<para
>Específicament, el nom de l'usuari i els camps de correu electrònic per a cada repositori nou de &git; es completen amb els valors establerts per aquesta opció.</para>

<para
>El valor s'haurà d'especificar en la forma <option
><replaceable
>Nom Usuari</replaceable
> &lt;<replaceable
>correu_electrònic@exemple.com</replaceable
>&gt;</option
>.</para>

<para>
<informalexample>
<para
>Per exemple, un desenvolupador anomenat <quote
>Foo Barbaroja</quote
> amb l'adreça de correu electrònic <quote
>foo@abc.xyz</quote
> faria servir:</para>

<screen
><symbol
>git-user</symbol
> <replaceable
>Foo Barbaroja</replaceable
> &lt;<replaceable
>foo@abc.xyz</replaceable
>&gt;
</screen>
</informalexample>
</para>

<para
>Aquesta opció es va introduir en el &kdesrc-build; 15.09. </para>
</entry>
</row>

<row id="conf-http-proxy">
<entry
>http-proxy</entry>
<entry
>La configuració del mòdul superposa la global</entry>

<entry
><para
>Aquesta opció, si està establerta, utilitzarà l'URL especificat com un servidor intermediari per a utilitzar-lo en qualsevol comunicació de xarxa HTTP (per exemple, en descarregar instantànies per a mòduls nous o la <link linkend="kde-projects-module-sets"
>base de dades del projecte &kde;</link
>).</para>

<para
>A més, el &kdesrc-build; intentarà assegurar que les eines de les quals depèn també utilitzaran aquest servidor intermediari, si és possible, establint la variable d'entorn <envar
>http_proxy</envar
> al servidor indicat, <emphasis
>si aquesta variable d'entorn encara no està establerta</emphasis
>.</para>

<para
>Aquesta opció es va introduir en el &kdesrc-build; 1.16.</para>
</entry>
</row>

<row id="conf-ignore-kde-structure">
<entry
>ignore-kde-structure</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry>
<para
>Aquesta opció està obsoleta i s'eliminarà (de nou) en una futura versió.</para>

<para
>Utilitzeu l'opció «<option
><link linkend="conf-directory-layout"
>directory-layout</link
></option
>» en el seu lloc, la qual ofereix més opcions.</para>
</entry>
</row>

<row id="conf-directory-layout">
<entry
>directory-layout</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Aquesta opció s'utilitza per a configurar la disposició que ha d'emprar el &kdesrc-build; quan crea els directoris de codi font i de construcció.</para>
<para
>Actualment, hi ha tres valors possibles: <userinput
>flat</userinput
>, <userinput
>invent</userinput
> i <userinput
>metadata</userinput
>.</para>
<para
>La disposició <userinput
>flat</userinput
> és el valor predeterminat, i agruparà tots els mòduls directament sota dels directoris de construcció i de codi font de nivell superior. Per exemple, <literal
>source/extragear/network/telepathy/ktp-text-ui</literal
> en la disposició <userinput
>metadata</userinput
> seria <literal
>source/ktp-text-ui</literal
> emprant la disposició <userinput
>flat</userinput
> en el seu lloc. </para>
<para
>La disposició <userinput
>invent</userinput
> crea una jerarquia de directoris que reflecteix els camins relatius dels repositoris a <ulink url="https://invent.kde.org/"
>invent.kde.org</ulink
>. Per exemple, <literal
>source/kde/applications/kate</literal
> a la disposició <userinput
>metadata</userinput
> seria <literal
>source/utilities/kate</literal
> emprant la disposició <userinput
>invent</userinput
> al seu lloc. Aquesta disposició només afecta els projectes del &kde;. És una bona opció per a les persones que comencen amb el &kdesrc-build;. </para>
<para
>Finalment, la disposició <userinput
>metadata</userinput
> és la mateixa que en l'antic comportament predeterminat. Aquesta disposició organitza els projectes del &kde; d'acord amb els camins de projecte especificats en les metadades del projecte per a aquests mòduls. Aquesta és una bona opció si voleu una disposició de directoris que faci un seguiment de certs processos del &kde; i cal tenir en compte que, per tant, aquest camí no serà sempre estable. Com a resultat, el &kdesrc-build; pot abandonar una còpia antiga del repositori i clonar-ne una de nova a causa dels canvis en les metadades del projecte.</para>
</entry>
</row>

<row id="conf-ignore-modules">
<entry
>ignore-modules</entry>
<entry
>No es pot superposar</entry>
<entry
><para
>Els mòduls nomenats per aquesta opció, els quals serien triats pel &kdesrc-build; a causa d'una opció «<link linkend="conf-use-modules"
>use-modules</link
>», s'ometran completament. Utilitzeu aquesta opció quan vulgueu construir una tota agrupació de projectes «<link linkend="kde-projects-module-sets"
>kde-projects</link
>», excepte alguns mòduls específics.</para>

<para
>El valor de l'opció no necessàriament haurà de nomenar el mòdul directament. S'ignorarà qualsevol mòdul que tingui parts consecutives completes del seu <link linkend="kde-projects-module-sets"
>camí de mòduls de projectes del &kde;</link
> que coincideixi amb un dels valors de l'opció, d'aquesta manera es podran ignorar múltiples mòduls.</para>

<para
>Per exemple, un valor d'opció «<replaceable
>libs</replaceable
>» donaria lloc a l'exclusió de <symbol
>kde/kdegraphics/libs</symbol
> i de <symbol
>playground/libs</symbol
> (encara que no <symbol
>kde/kdelibs</symbol
>, ja que es compara la part completa <quote
>kdelibs</quote
>).</para>

<tip
><para
>Vegeu també l'<xref linkend="example-ignoring-a-module"/>.</para
></tip>

<para
>Aquesta opció es va introduir en el &kdesrc-build; 1.16.</para>
</entry>
</row>

<row id="conf-include-dependencies">
<entry
>include-dependencies</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry>
<para
>Aquesta opció, quan s'estableix a «<userinput
>true</userinput
>» (cert), les sol·licituds del &kdesrc-build; també inclouran les dependències conegudes d'aquest mòdul en la seva construcció, sense requerir que les esmenteu (fins i tot indirectament).</para>

<note
><para
>Aquesta opció només funciona per als mòduls basats en «<link linkend="kde-projects-module-sets"
><literal
>kde-project</literal
></link
>» i requereix que les metadades mantingudes pels desenvolupadors del &kde; siguin exactes per al «<link linkend="conf-branch-group"
>branch-group</link
>» seleccionat.</para
></note>

<para
>De manera predeterminada aquesta opció està habilitada, per admetre aplicacions de construcció que necessiten versions de les &Qt; o &plasma; més recents que les admeses en els sistemes operatius habituals.</para>
</entry>
</row>

<row id="conf-install-after-build">
<entry
>install-after-build</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
>Aquesta opció s'utilitza per a instal·lar el paquet després que es construeixi amb èxit. De manera predeterminada està habilitada. Si la voleu inhabilitar, haureu d'establir aquesta opció a «<userinput
>false</userinput
>» (fals) al <link linkend="configure-data"
>fitxer de configuració</link
>. També podreu utilitzar l'indicador <link linkend="cmdline-no-install"
><option
>--no-install</option
></link
> de la línia d'ordres. </entry>
</row>

<row id="conf-install-environment-driver">
<entry
>install-environment-driver</entry>
<entry
>No es pot superposar</entry>
<entry
><para
>De manera predeterminada, el &kdesrc-build; instal·larà un script d'intèrpret d'ordres que pot obtenir-se en els scripts de configuració del perfil d'un usuari per establir amb facilitat les variables d'entorn necessàries per executar l'escriptori Plasma creat pel &kdesrc-build;.</para>

<para
>Aquest controlador modificarà els següents fitxers:</para>

<itemizedlist>
<listitem
><para
><filename
>$XDG_CONFIG_HOME/kde-env-master.sh</filename
> (normalment es troba a <filename
>~/.config/kde-env-master.sh</filename
>).</para
></listitem>
<listitem
><para
><filename
>$XDG_CONFIG_HOME/kde-env-user.sh</filename
> (normalment es troba a <filename
>~/.config/kde-env-user.sh</filename
>).</para
></listitem>
</itemizedlist>

<para
>El <filename
>kde-env-user.sh</filename
> és opcional. Està destinat a les personalitzacions de l'usuari (vegeu la secció <ulink url="https://userbase.kde.org/KDE_System_Administration/Environment_Variables#Troubleshooting_and_Debugging"
>Troubleshooting and Debugging</ulink
> (Solució de problemes i depuració) de la &kde; UserBase per a veure exemples d'opcions personalitzades), però l'usuari podrà establir aquestes opcions en altres llocs en els seus scripts existents per a la configuració del perfil.</para>

<para
>És possible inhabilitar aquesta característica establint aquesta opció a «<replaceable
>false</replaceable
>» (fals) i assegurant-vos que l'opció «<link linkend="conf-install-session-driver"
>install-session-driver</link
>» també està inhabilitada.</para>

<para
>Aquesta opció es va introduir en el &kdesrc-build; 17.08.</para>

<tip
><para
>El &kdesrc-build; no sobreescriurà els vostres fitxers existents (si n'hi ha) a menys que també passeu l'opció <option
><link linkend="cmdline-delete-my-settings"
>--delete-my-settings</link
></option
> de la línia d'ordres.</para
></tip>
</entry>
</row>

<row id="conf-install-session-driver">
<entry
>install-session-driver</entry>
<entry
>No es pot superposar</entry>
<entry
><para
>Si està habilitada, el &kdesrc-build; intentarà instal·lar un controlador per al gestor d'inici de sessió gràfic, el qual us permetrà iniciar la sessió a l'escriptori &kde; construït amb el &kdesrc-build;.</para>

<para
>Aquest controlador modificarà els següents fitxers:</para>

<itemizedlist>
<listitem
><para
><filename
>~/.xsession</filename
></para
></listitem>
<listitem
><para
><filename
>$XDG_CONFIG_HOME/kde-env-master.sh</filename
> (normalment es troba a <filename
>~/.config/kde-env-master.sh</filename
>).</para
></listitem>
<listitem
><para
><filename
>$XDG_CONFIG_HOME/kde-env-user.sh</filename
> (normalment es troba a <filename
>~/.config/kde-env-user.sh</filename
>).</para
></listitem>
</itemizedlist>

<para
>Si manteniu el vostre propi controlador d'inici de sessió, podreu inhabilitar aquesta característica establint aquesta opció a «<replaceable
>false</replaceable
>» (fals). Si està habilitada, aquesta característica també habilitarà la característica «<link linkend="conf-install-environment-driver"
>install-environment-driver</link
>».</para>

<para
>Aquesta opció es va introduir en el &kdesrc-build; 1.16.</para>

<tip
><para
>El &kdesrc-build; no sobreescriurà els vostres fitxers existents (si n'hi ha) a menys que també passeu l'opció <option
><link linkend="cmdline-delete-my-settings"
>--delete-my-settings</link
></option
> de la línia d'ordres.</para
></tip>
</entry>
</row>

<row id="conf-kdedir">
<entry
>kdedir</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
>Aquesta opció estableix el directori en el qual s'instal·larà el &kde; després de la seva construcció. De manera predeterminada és <filename class="directory"
>~/kde</filename
>. Si ho canvieu a un directori al qual es necessita accedir com a superusuari (root), és possible que també vulgueu llegir sobre l'opció «<link linkend="conf-make-install-prefix"
>make-install-prefix</link
>».</entry>
</row>

<row id="conf-kde-languages">
<entry
>kde-languages</entry>
<entry
>No es pot superposar</entry>
<entry
><para
>Aquesta opció permet escollir triar, descarregar i instal·lar els paquets de localització juntament amb el &kde;. Podreu fer això, si no viviu als Estats Units i us agradaria emprar el &kde; traduït al vostre idioma nadiu.</para>

<para
>Per a utilitzar aquesta opció, establiu-la en una llista separada per espais amb els idiomes per instal·lar. Cada idioma té un codi d'idioma associat, el qual podeu consultar en aquesta pàgina: <ulink url="https://l10n.kde.org/teams-list.php"
>https://l10n.kde.org/teams-list.php</ulink
>. </para>

<para
>Està bé triar només un idioma. De manera predeterminada, no se'n descarregarà cap, el qual voldrà dir que el &kde; es mostrarà en anglès americà.</para>

<para
>Per exemple, per a triar instal·lar el català, establireu l'opció en quelcom com: <userinput
><option
>kde-languages</option
> <replaceable
>ca</replaceable
></userinput
>. No obstant això, encara haureu d'utilitzar l'&systemsettings; per a triar l'idioma català.</para>
</entry>
</row>

<row id="conf-libname">
<entry
>libname</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
>Establiu aquesta opció per a canviar el nom predeterminat del directori de la biblioteca instal·lada dins de $<envar
>KDEDIR</envar
> i $<envar
>QTDIR</envar
>. En molts sistemes això és «lib» o «lib64». La detecció automàtica s'intenta establir el nom correcte per defecte, però si la suposició és incorrecta, es pot canviar amb aquesta opció. </entry>
</row>

<row id="conf-libpath">
<entry
>libpath</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
>Establiu aquesta opció per a establir la variable d'entorn <envar
>LD_LIBRARY_PATH</envar
> mentre es construeix. No podreu superposar aquesta opció en una opció de mòdul. El valor predeterminat és en blanc, però els camins <filename class="directory"
>$<envar
>KDEDIR</envar
>/$<envar
>LIBNAME</envar
></filename
> i <filename class="directory"
>$<envar
>QTDIR</envar
>/$<envar
>LIBNAME</envar
></filename
> s'afegiran de manera automàtica. Utilitzeu la titlla (~) per a qualsevol camí que afegiu utilitzant aquesta opció. </entry>
</row>

<row id="conf-log-dir">
<entry
>log-dir</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
>Utilitzeu aquesta opció per a canviar el directori utilitzat per a mantenir els fitxers de registre generats per l'script. </entry>
</row>

<row id="conf-make-install-prefix">
<entry
>make-install-prefix</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
>Establiu aquesta variable en una llista separada per espais, la qual s'interpretarà com una ordre i les seves opcions per a precedir a l'ordre <userinput
><command
>make</command
> <option
>install</option
></userinput
> utilitzada per a instal·lar els mòduls. Això és útil per a instal·lar paquets amb el &sudo;, per exemple, però aneu amb compte en tractar amb els privilegis del superusuari (root).</entry>
</row>

<row id="conf-make-options">
<entry
>make-options</entry>
<entry
>La configuració del mòdul superposa la global (opció del sistema de construcció)</entry>
<entry
><para
>Establiu aquesta variable per a passar les opcions de línia d'ordres a l'ordre <command
>make</command
>. Això és útil per als programes com <ulink url="https://github.com/distcc/distcc"
><application
>distcc</application
></ulink
> o els sistemes amb més d'un nucli de processador.</para>
<para
>Tingueu en compte que no tots els sistemes de construcció admesos utilitzen el <command
>make</command
>. Per als sistemes de construcció que utilitzen el <command
>ninja</command
> per a la construcció (com el <link linkend="conf-override-build-system"
>sistema de construcció <application
>Meson</application
></link
>), vegeu l'opció «<link linkend="conf-ninja-options"
>ninja-options</link
>».</para>
</entry>
</row>

<row id="conf-manual-build">
<entry
>manual-build</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
>Establiu el valor de l'opció a «<userinput
>true</userinput
>» (cert) per evitar que el procés de construcció intenti construir aquest mòdul. Encara es mantindrà actualitzat quan s'actualitzi des de &subversion;. Aquesta opció és exactament equivalent a l'opció <link linkend="cmdline-no-build"
><option
>--no-build</option
></link
> de la línia d'ordres. </entry>
</row>

<row id="conf-manual-update">
<entry
>manual-update</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
>Establiu el valor de l'opció a «<userinput
>true</userinput
>» (cert) per evitar que el procés de construcció intenti actualitzar (i, per extensió, construir o instal·lar) aquest mòdul. Si establiu aquesta opció per a un mòdul, essencialment l'haureu de descomentar. </entry>
</row>

<row id="conf-module-base-path">
<entry
>module-base-path</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Establiu aquesta opció per a superposar el camí del directori predeterminat de &kdesrc-build; al mòdul en qüestió. Això es pot utilitzar, per exemple, per obtenir branques específiques o versions etiquetades de les biblioteques. El <ulink url="https://websvn.kde.org/"
>Visualitzador de codi font del &kde;</ulink
> és molt valuós per ajudar a triar el camí correcte.</para>

<para
>Recordeu que el &kdesrc-build; construeix el camí final d'acord amb la següent plantilla: <filename class="directory"
><varname
>$svn-server</varname
>/home/kde/<varname
>$module-base-path</varname
></filename
>. </para>

<para
>El valor predeterminat és <filename class="directory"
>trunk/<varname
>$module</varname
></filename
> o <filename class="directory"
>trunk/KDE/<varname
>$module</varname
></filename
>, segons el nom del mòdul.</para>

<tip
><para
>Utilitzeu les opcions «<link linkend="conf-branch"
>branch</link
>» (branca) o «<link linkend="conf-tag"
>tag</link
>» (indicador) sempre que siguin aplicables. </para
></tip>
</entry>
</row>

<row id="conf-niceness">
<entry
>niceness</entry>
<entry
>No es pot superposar</entry>
<entry
>Establiu aquesta opció a un número entre el 20 i el 0. Com més gran sigui el número, menor serà la prioritat que establirà el &kdesrc-build; per si mateix, &ead;, com més gran sigui el número, més «agradable» serà el programa. El valor predeterminat és 10. </entry>
</row>

<row id="conf-ninja-options">
<entry
>ninja-options</entry>
<entry
>La configuració del mòdul superposa la global (opció del sistema de construcció)</entry>
<entry
><para
>Establiu aquesta variable per passar les opcions de la línia d'ordres a l'ordre de construcció <command
>ninja</command
>. Això pot ser útil per habilitar la sortida <quote
>detallada</quote
> o per a reduir manualment el nombre de tasques de construcció en paral·lel que faria servir el <command
>ninja</command
>.</para>

<note
><para
>Recordeu que aquesta opció només controla el ninja quan utilitzeu el &kdesrc-build;. El mòdul <quote
>webengine</quote
> de les &Qt; utilitza indirectament el <command
>ninja</command
>, però només admet oficialment la construcció amb el <command
>make</command
>. En aquesta situació, podreu configurar <literal
>NINJAFLAGS</literal
> com una forma de fer passar els indicadors apropiats quan després es cridi al <command
>ninja</command
>, utilitzant «<link linkend="conf-make-options"
>make-options</link
>».</para>

<informalexample>
<programlisting
>options <replaceable
>qtwebengine</replaceable>
    # Restringeix el make i el ninja a l'ús de no més de 6 tasques de
    # compilació separades, fins i tot quan hi hagi més CPU disponible,
    # per evitar quedar-se sense memòria
    <option
><link linkend="conf-make-options"
>make-options</link
></option
> -j<replaceable
>6</replaceable
> NINJAFLAGS=-j<replaceable
>6</replaceable>
end options
</programlisting>
</informalexample>
</note>
</entry>
</row>

<row id="conf-no-svn">
<entry
>no-svn</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
>Si aquesta opció s'estableix a «<userinput
>true</userinput
>» (cert), el &kdesrc-build; no actualitzarà automàticament el codi font del mòdul. Encara intentarà construir el mòdul si normalment ho hagués intentat de totes maneres.</entry>
</row>

<row>
<entry
>no-rebuild-on-fail</entry>
<entry
></entry>
<entry
>Aquesta opció es va eliminar en la versió 1.10, ja que aquest comportament ja no ajuda a causa de les correccions en el sistema de construcció subjacent.</entry>
</row>

<row id="conf-num-cores">
<entry
>num-cores</entry>
<entry
>No es pot superposar</entry>
<entry>
<para
>Aquesta opció està definida pel &kdesrc-build; (quan s'utilitza l'eina kdesrc-build-setup o <command
>kdesrc-build --initial-setup</command
>), establerta al nombre de CPU disponibles (com ho indica l'aplicació externa <application
>nproc</application
>). Si el &kdesrc-build; no pot detectar el nombre de CPU, aquest valor s'establirà a 4.</para>

<para
>Vegeu <xref linkend="make-options-example"/> per a un exemple de l'ús d'aquesta opció. Aquesta opció es va introduir en el &kdesrc-build; 20.07.</para>
</entry>
</row>

<row id="conf-num-cores-low-mem">
<entry
>num-cores-low-mem</entry>
<entry
>No es pot superposar</entry>
<entry>
<para
>Aquesta opció està definida pel &kdesrc-build; (quan s'utilitza l'eina kdesrc-build-setup o <command
>kdesrc-build --initial-setup</command
>), establerta al nombre de CPU, això es considera segur per mòduls pesats o altres mòduls altament intensius, com el <literal
>qtwebengine</literal
>, per a evitar quedar-se sense memòria durant la compilació.</para>

<para
>El càlcul típic és un nucli de CPU per cada 2 gigabytes (GiB) de memòria total. Almenys s'especificarà 1 nucli, i no s'especificaran més que a <option
><link linkend="conf-num-cores"
>num-cores</link
></option
>.</para>

<para
>Tot i que aquesta opció està pensada per a admetre els mòduls de les &Qt;, podeu utilitzar-la per a qualsevol mòdul de la mateixa manera que s'utilitza <option
>num-cores</option
>.</para>

<para
>Si el &kdesrc-build; no pot detectar la memòria disponible, aquest valor s'establirà a 2.</para>

<para
>Aquesta opció es va introduir en el &kdesrc-build; 20.07.</para>
</entry>
</row>

<row id="conf-override-build-system">
<entry
>override-build-system</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Aquesta és una opció avançada, es va introduir en el &kdesrc-build; 1.16.</para>

<para
>Normalment, el &kdesrc-build; detectarà el sistema de construcció adequat a utilitzar per a un mòdul després de descarregar-lo. Això es realitza comprovant l'existència de certs fitxers en el directori de codi font del mòdul.</para>

<para
>Alguns mòduls poden incloure més d'un conjunt requerit de fitxers, el qual podria confondre la detecció automàtica. En aquest cas, podreu especificar manualment el tipus de construcció correcte.</para>

<para
>Els tipus de construcció actualment admesos que es poden establir són:</para>

<variablelist>
    <varlistentry>
        <term
>KDE</term>
        <listitem
><para
>S'utilitza per a construir els mòduls del &kde;. En realitat, es pot utilitzar per a construir gairebé qualsevol mòdul que utilitzi el &cmake;, però és millor no confiar-hi.</para
></listitem>
    </varlistentry>
    <varlistentry>
        <term
>Qt</term>
        <listitem
><para
>S'utilitza per a construir la biblioteca de les &Qt;.</para
></listitem>
    </varlistentry>
    <varlistentry>
        <term
>qmake</term>
        <listitem
><para
>S'utilitza per a construir els mòduls de les &Qt; que utilitzen fitxers <literal
>.pro</literal
> a l'estil de <application
>qmake</application
>.</para
></listitem>
    </varlistentry>
    <varlistentry>
        <term
>generic</term>
        <listitem
><para
>S'utilitza per a construir els mòduls que utilitzen els <filename
>Makefile</filename
> senzills i que no requereixen cap configuració especial.</para
></listitem>
    </varlistentry>
    <varlistentry>
        <term
>autotools</term>
        <listitem
><para
>Aquesta és l'eina de configuració estàndard utilitzada per la majoria del programari lliure i de codi obert que no es troba en cap de les altres categories.</para
></listitem>
    </varlistentry>
    <varlistentry>
        <term
>meson</term>
        <listitem
><para
>Aquesta és una <ulink url="https://mesonbuild.com"
>eina relativament nova</ulink
> que està guanyant popularitat com a substitució de les «autotools», i pot ser necessària per a alguns mòduls que no són del &kde;.</para
></listitem>
    </varlistentry>
</variablelist>

</entry>
</row>

<row id="conf-override-url">
<entry
>override-url</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
>Si establiu aquesta opció, el &kdesrc-build; utilitzarà el seu valor com l'&url; per passar a &subversion; <emphasis
>completament sense canvis</emphasis
>. En general, haureu d'utilitzar aquesta opció si voleu descarregar una versió específica, però el &kdesrc-build; no pot entendre el que voleu dir utilitzant «<link linkend="conf-branch"
>branch</link
>» (branca). </entry>
</row>

<row id="conf-persistent-data-file">
<entry
>persistent-data-file</entry>
<entry
>No es pot superposar</entry>
<entry
><para
>Aquesta opció permet canviar on emmagatzema el &kdesrc-build; les seves dades persistents. De manera predeterminada s'emmagatzemen en un fitxer anomenat <filename
>.kdesrc-build-data</filename
>, ubicat al mateix directori que el fitxer de configuració en ús. Si s'utilitza el fitxer de configuració global, es desarà a <filename
>~/.local/state/kdesrc-build-data</filename
> (<filename
>$XDG_STATE_HOME/kdesrc-build-data</filename
>, si està establerta <envar
>$XDG_STATE_HOME</envar
>). Si teniu múltiples configuracions disponibles al mateix directori, és possible que vulgueu establir aquesta opció manualment perquè les diferents configuracions no acabin amb dades persistents en conflicte. </para>

<para
>Aquesta opció es va introduir en el &kdesrc-build; 1.15.</para>
</entry>
</row>

<row id="conf-prefix">
<entry
>prefix</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Aquesta opció controla a on instal·lar el mòdul (normalment s'utilitza l'opció «<option
><link linkend="conf-kdedir"
>kdedir</link
></option
>»). L'ús d'aquesta opció permet instal·lar un mòdul en un directori diferent d'on estan instal·lades les biblioteques de la plataforma &kde;, com si estiguéssiu utilitzant el &kdesrc-build; només per a compilar aplicacions.</para>
<para
>Podeu utilitzar <varname
>${MODULE}</varname
> o <varname
>$MODULE</varname
> en el camí per expandir el nom del mòdul.</para>
</entry>
</row>

<row id="conf-purge-old-logs">
<entry
>purge-old-logs</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Aquesta opció controla si els directoris de registre antics se suprimiran automàticament o no. El valor predeterminat és «<replaceable
>true</replaceable
>» (cert).</para>
</entry>
</row>

<row id="conf-qmake-options">
<entry
>qmake-options</entry>
<entry
>La configuració del mòdul superposa la global</entry>

<entry
><para
>Qualsevol opció especificada aquí es passarà a l'ordre <command
>qmake</command
>, per als mòduls que utilitzen el sistema de construcció <symbol
>qmake</symbol
>. Per exemple, podeu utilitzar l'opció <userinput
>PREFIX=/camí/a/qt</userinput
> per al qmake per a superposar a on instal·larà el mòdul. </para>
<para
>Aquesta opció es va introduir en el &kdesrc-build; 1.16.</para>
</entry>
</row>

<row id="conf-qtdir">
<entry
>qtdir</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
>Establiu aquesta opció per a establir la variable d'entorn <envar
>QTDIR</envar
> durant la construcció. Si no especifiqueu aquesta opció, el &kdesrc-build; assumirà que el sistema operatiu proporciona les &Qt;. </entry>
</row>

<row id="conf-remove-after-install">
<entry
>remove-after-install</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Si teniu poc espai al disc dur, és possible que vulgueu utilitzar aquesta opció per a suprimir automàticament el directori de construcció (o els directoris de codi font i de construcció per a les instal·lacions d'una vegada) després que el mòdul s'hagi instal·lat correctament. </para>
<para
>Els valors possibles per a aquesta opció són: <itemizedlist>
<listitem
><para
>none: no se suprimeix res (aquest és el valor predeterminat).</para
></listitem>
<listitem
><para
>builddir: se suprimirà el directori de construcció, però no el de codi font.</para
></listitem>
<listitem
><para
>all: se suprimirà tant el directori de codi font com el de construcció.</para
></listitem>
</itemizedlist>
</para>

<para
>Recordeu que l'ús d'aquesta opció podria tenir un impacte perjudicial significatiu tant en l'ús en l'amplada de banda (si utilitzeu «<replaceable
>all</replaceable
>») com en el temps necessari per a compilar el programari &kde;, ja que el &kdesrc-build; no pot realitzar construccions incrementals.</para>
</entry>
</row>

<row id="conf-repository">
<entry
>repository</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Aquesta opció es va introduir amb la versió 1.10, i s'utilitza per especificar el repositori de &git; des d'on descarregar el codi font del mòdul. Les &Qt; (i per tant, qt) necessitaran aquesta opció, així com diversos mòduls del &kde; que estan en procés de conversió per utilitzar &git;.</para
></entry>
</row>

<row id="conf-revision">
<entry
>revision</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Si aquesta opció s'estableix en un valor diferent de 0 (zero), el &kdesrc-build; forçarà l'actualització del codi font per portar el mòdul a la revisió exacta indicada, fins i tot si estan vigents opcions com la «<link linkend="conf-branch"
>branch</link
>» (branca). Si el mòdul ja es troba en la revisió indicada, no s'actualitzarà més a menys que aquesta opció es canviï o s'elimini de la configuració.</para>

<note
><para
>Aquesta opció no va funcionar per als mòduls basats en git (inclosos els mòduls de «<link linkend="kde-projects-module-sets"
>kde-projects</link
>») fins a la versió 1.16 de &kdesrc-build;.</para
></note>

</entry>
</row>

<row id="conf-run-tests">
<entry
>run-tests</entry>
<entry
>La configuració del mòdul superposa la global (opció del sistema de construcció)</entry>
<entry
>Si s'estableix a «<userinput
>true</userinput
>» (cert), el mòdul es construirà amb suport per a executar el seu conjunt de proves, i el conjunt de proves s'executarà com a part del procés de construcció. El &kdesrc-build; mostrarà un informe senzill dels resultats de les proves. Això és útil per als desenvolupadors o aquells que volen assegurar-se que el seu sistema està configurat correctament.</entry>
</row>

<row id="conf-set-env">
<entry
>set-env</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Aquesta opció accepta un conjunt de valors separats per espais, on el primer valor és la variable d'entorn per establir, i la resta dels valors són el que voleu que estableixi la variable. Per exemple, per establir la variable <envar
>RONALD</envar
> a McDonald, haureu de posar aquesta ordre a la secció corresponent:</para>
<screen
><command
>set-env</command
> <envar
>RONALD</envar
> <userinput
>McDonald</userinput
></screen>
<para
>Aquesta opció és especial perquè pot repetir-se sense superposar la configuració anterior de «set-env» a la mateixa secció del <link linkend="configure-data"
>fitxer de configuració</link
>. D'aquesta manera, podreu establir més d'una variable d'entorn per mòdul (o globalment).</para>
</entry>
</row>

<row id="conf-source-dir">
<entry
>source-dir</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
>Aquesta opció s'utilitza per a configurar el directori a l'ordinador per emmagatzemar el codi font de &subversion; del &kde;. Si no especifiqueu aquest valor, el valor predeterminat és <filename class="directory"
>~/kdesrc</filename
>. Si utilitzeu aquesta opció, utilitzeu la titlla (~) per a representar el directori d'inici. </entry>
</row>

<row id="conf-ssh-identity-file">
<entry
>ssh-identity-file</entry>
<entry
>No es pot superposar</entry>
<entry>
<para
>Establiu aquesta opció per a controlar quin fitxer de clau SSH privat es passarà a l'ordre <command
>ssh-add</command
> quan el &kdesrc-build; està descarregant el codi font des dels repositoris que requereixen autenticació. Vegeu també: les <xref linkend="ssh-agent-reminder"/>.</para>

<para
>Aquesta opció es va introduir en el &kdesrc-build; 1.14.2.</para>
</entry>
</row>

<row id="conf-stop-on-failure">
<entry
>stop-on-failure</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
>Establiu el valor d'aquesta opció a «<userinput
>true</userinput
>» (cert) perquè l'script aturi l'execució després que succeeixi un error durant el procés de construcció o instal·lació. De manera predeterminada aquesta opció està desactivada. </entry>
</row>

<row id="conf-svn-server">
<entry
>svn-server</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Aquesta opció s'utilitza per a configurar el servidor que s'utilitzarà per extreure des de &subversion;. De manera predeterminada és el repositori anònim de &subversion;, <filename
>svn://anonsvn.kde.org/</filename
></para>
<note
><para
>Si esteu desenvolupant per al &kde;, utilitzeu el repositori de &subversion; que se us ha proporcionat quan vàreu rebre el vostre compte de desenvolupador, en lloc del repositori anònim.</para
></note>
</entry>
</row>

<row id="conf-tag">
<entry
>tag</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
><para
>Empreu aquesta opció per a descarregar una versió específica d'un mòdul.</para>
<para
><emphasis
>Nota:</emphasis
> Les probabilitats són molt bones <emphasis
>perquè no vulgueu</emphasis
> utilitzar aquesta opció. Les versions del &kde; estan disponibles en format arxiu tar des del <ulink url="https://download.kde.org/"
>lloc de descàrrega del &kde;</ulink
>.</para>

<note
><para
>Aquesta opció només s'admet per als mòduls basats en git a partir de &kdesrc-build; 1.16.</para
></note>
</entry>
</row>

<row id="conf-use-clean-install">
<entry
>use-clean-install</entry>
<entry
>La configuració del mòdul superposa la global (opció del sistema de construcció)</entry>
<entry
><para
>Establiu aquesta opció a «<userinput
>true</userinput
>» (cert) perquè el &kdesrc-build; executi <command
>make uninstall</command
> directament abans d'executar <command
>make install</command
>.</para>

<para
>Això pot ser útil per assegurar que no hi hagi fitxers antics de biblioteca que estan perduts, les metadades de &cmake;, &etc; que puguin causar problemes a les instal·lacions del &kde; de llarga durada. Tanmateix, això només funciona en els sistemes de construcció que admeten la desinstal·lació.</para>

<para
>Aquesta opció es va introduir en el &kdesrc-build; 1.12, però no ha estat documentada fins al &kdesrc-build; 1.16.</para>
</entry>
</row>

<row>
<entry
>use-cmake</entry>
<entry
></entry>
<entry
>Aquesta opció es va eliminar en el &kdesrc-build; 1.4, ja que tots els mòduls del &kde; 4 requereixen el &cmake;, i l'ús de &cmake; no està permès en cap altre mòdul. </entry>
</row>

<row id="conf-use-idle-io-priority">
<entry
>use-idle-io-priority</entry>
<entry
>No es pot superposar</entry>
<entry
>Aquesta opció, afegida al &kdesrc-build; 1.12, farà que s'utilitzi una prioritat més baixa per al disc i altres usos de l'E/S, el qual pot millorar significativament la capacitat de resposta de la resta de sistema amb un cost en el temps d'execució una mica més llarg per al &kdesrc-build;. El valor predeterminat és inhabilitada, per habilitar una prioritat inferior per al disc, establiu això a «<userinput
>true</userinput
>» (cert). </entry>
</row>

<row id="conf-use-inactive-modules">
<entry
>use-inactive-modules</entry>
<entry
>No es pot superposar</entry>
<entry
>Quan està habilitada, permetrà que el kdesrc-build també faci «clone» i «pull» des dels repositoris marcats com inactius. El valor predeterminat és inhabilitat, per a permetre que els mòduls inactius estableixin això a «<userinput
>true</userinput
>» (cert). </entry>
</row>

<row id="conf-use-modules">
<entry
>use-modules</entry>
<entry
>Només es pot utilitzar en «<link linkend="module-sets"
>module-set</link
>».</entry>
<entry
><para
>Aquesta opció, afegida en el &kdesrc-build; 1.12.1, permet especificar amb facilitat molts mòduls diferents per construir en el mateix punt al <link linkend="kdesrc-buildrc"
>fitxer de configuració</link
>.</para>

<para
>Aquesta opció <emphasis
>s'haurà</emphasis
> d'utilitzar dins d'un «<literal
>module-set</literal
>». Cada identificador passat a aquesta opció es convertirà internament a un mòdul de &kdesrc-build;, amb una opció «<link linkend="conf-repository"
><option
>repository</option
></link
>» establerta al repositori del conjunt de mòduls combinada amb el nom de l'identificador per a configurar el repositori final des d'on descarregar. Totes les altres opcions que s'assignin en el conjunt de mòduls també es copiaran sense modificacions als mòduls generats.</para>

<para
>L'ordre en què es defineixen els mòduls en aquesta opció és important, perquè aquest serà també l'ordre en què el &kdesrc-build; processarà els mòduls generats en actualitzar, construir i instal·lar. Tots els mòduls definits en el conjunt de mòduls indicat es gestionaran abans que el &kdesrc-build; passi al següent mòdul després del conjunt de mòduls.</para>

<para
>Si necessiteu canviar les opcions per a un mòdul generat, simplement declareu el mòdul de nou després que estigui definit en el conjunt de mòduls i establiu les opcions segons sigui necessari. Encara que canvieu d'aquesta manera les opcions establertes per al mòdul, el mòdul se seguirà actualitzant i construint en l'ordre establert pel conjunt de mòduls (&ead;, fent això no podreu tornar a ordenar la seqüència de construcció).</para>

<important
><para
>El nom a utilitzar per al mòdul si feu això, serà el nom que vàreu passar a «<option
>use-modules</option
>», amb l'excepció que s'elimina qualsevol <literal
>.git</literal
>.</para
></important>

<para
>Vegeu <xref linkend="module-sets"/> i «<link linkend="conf-git-repository-base"
>git-repository-base</link
>» per obtenir una descripció del seu ús i un exemple.</para>
</entry>
</row>

<row id="conf-use-qt-builddir-hack">
<entry
>use-qt-builddir-hack</entry>
<entry
>La configuració del mòdul superposa la global</entry>
<entry
>Aquesta opció es va eliminar a causa de millores en el sistema de construcció de les &Qt;. </entry>
</row>

<row id="conf-use-stable-kde">
<entry
>use-stable-kde</entry>
<entry
>No es pot superposar</entry>
<entry>
<para
>Aquesta opció està obsoleta i s'eliminarà (de nou) en una futura versió.</para>

<para
>Utilitzeu l'opció «<option
><link linkend="conf-branch-group"
>branch-group</link
></option
>» en el seu lloc, la qual ofereix més selectivitat.</para>
</entry>
</row>

</tbody>

</tgroup>
</table>

</sect1>
</chapter>

<chapter id="cmdline">
<title
>Opcions de la línia d'ordres i les variables d'entorn</title>

<sect1 id="cmdline-usage">
<title
>Ús de la línia d'ordres</title>

<para
>El &kdesrc-build; està dissenyat per a executar-se de la següent manera:</para>

<cmdsynopsis
><command
>kdesrc-build</command
> <arg rep="repeat"
><replaceable
>--options</replaceable
></arg
> <arg rep="repeat"
><replaceable
>mòduls a construir</replaceable
></arg
> </cmdsynopsis>

<para
>Si no s'especifica cap mòdul per construir a la línia d'ordres, llavors el &kdesrc-build; construirà tots els mòduls definits al fitxer de configuració, en l'ordre indicat en aquest fitxer (encara que això pot ser modificat per diverses opcions del fitxer de configuració).</para>

<sect2 id="cmdline-usage-options">
<title
>Opcions d'ús habitual a la línia d'ordres</title>

<para
>La llista completa d'opcions de línia d'ordres es proporciona als <xref linkend="supported-cmdline-params"/>. Les opcions utilitzades més sovint inclouen:</para>

<variablelist>
  <varlistentry>
    <term
><option
>--pretend</option
> (o <option
>-p</option
>)</term>
    <listitem
><para
>Aquesta opció fa que el &kdesrc-build; indiqui quines accions prendria, sense fer-les. Això pot ser útil per assegurar-vos que els mòduls que creieu que està construint, en realitat es construiran.</para
></listitem>
  </varlistentry>

  <varlistentry>
    <term
><option
>--refresh-build</option
></term>
    <listitem
><para
>Aquesta opció força al &kdesrc-build; a construir els mòduls indicats des d'un punt d'inici absolutament nou. Qualsevol directori de construcció existent per a aquest mòdul s'eliminarà i es reconstruirà. Aquesta opció és útil si obteniu errors en construir un mòdul, i de vegades és necessària quan canvien les biblioteques de les &Qt; o del &kde;.</para
></listitem>
  </varlistentry>

  <varlistentry>
    <term
><option
>--no-src</option
></term>
    <listitem
><para
>Aquesta opció omet el procés d'actualització del codi font. Podeu utilitzar-la si heu actualitzat recentment el codi font (potser ho heu fet manualment o executant recentment el &kdesrc-build;) però encara voleu reconstruir alguns mòduls.</para
></listitem>
  </varlistentry>

  <varlistentry>
    <term
><option
>--no-build</option
></term>
    <listitem
><para
>Aquesta opció és similar a <option
>--no-src</option
> anterior, però aquesta vegada s'omet el procés de construcció.</para
></listitem>
  </varlistentry>
</variablelist>

</sect2>

<sect2 id="cmdline-usage-modules">
<title
>Especificar els mòduls a construir</title>

<para
>En general, especificar els mòduls per construir és tan senzill com passar el nom del mòdul tal com l'heu definit al fitxer de configuració. També podeu passar mòduls que formen part d'un conjunt de mòduls, ja sigui com s'anomena a «<link linkend="conf-use-modules"
>use-modules</link
>», o el nom de tot el conjunt de mòduls, si li heu donat un nom.</para>

<para
>En el cas específic dels conjunts de mòduls basats en la <link linkend="kde-projects-module-sets"
>base de dades del projecte &kde;</link
>, el &kdesrc-build; expandirà els components del nom del mòdul per a determinar el mòdul exacte que voleu. Per exemple, l'entrada del projecte &kde; que el &kdesrc-build; situa el projecte a <literal
>extragear/utils/kdesrc-build</literal
>. Podreu especificar qualsevol dels següents per a construir el &kdesrc-build;:</para>

<informalexample>
<screen
><prompt
>&percnt;</prompt
> <command
>kdesrc-build</command
> <option
><replaceable
>+extragear/utils/kdesrc-build</replaceable
></option>
<prompt
>&percnt;</prompt
> <command
>kdesrc-build</command
> <option
><replaceable
>+utils/kdesrc-build</replaceable
></option>
<prompt
>&percnt;</prompt
> <command
>kdesrc-build</command
> <option
><replaceable
>+kdesrc-build</replaceable
></option
>
</screen>
</informalexample>

<note
><para
>Les ordres a l'exemple anterior van precedides pel nom del mòdul amb un <symbol
>+</symbol
>. Això forçarà que el nom del mòdul s'interpreti com un mòdul des de la base de dades del projecte &kde;, encara que aquest mòdul no s'ha definit en el fitxer de configuració. </para
></note>

<para
>Aneu amb compte especificant projectes molt genèrics (&pex;, <literal
>extragear/utils</literal
>), ja que això pot conduir a la construcció d'una gran quantitat de mòduls. Hauríeu d'utilitzar l'opció <option
>--pretend</option
> abans de construir un conjunt de mòduls nou per assegurar-vos que només esteu construint els mòduls que voleu.</para>

</sect2>
</sect1>

<sect1 id="supported-envvars">
<title
>Variables d'entorn admeses</title>

<para
>El &kdesrc-build; no utilitza les variables d'entorn. Si necessiteu establir variables d'entorn per al procés de construcció o instal·lació, vegeu l'opció «<link linkend="conf-set-env"
>set-env</link
>». </para>

</sect1>

<sect1 id="supported-cmdline-params">
<title
>Paràmetres admesos de la línia d'ordres</title>

<para
>L'script accepta les següents opcions de la línia d'ordres: </para>

<variablelist>

<varlistentry id="cmdline-async">
<term
><parameter
>--async</parameter
></term>
<listitem
><para
>Habilita el <link linkend="conf-async"
>mode asíncron</link
>, el qual pot realitzar les actualitzacions del codi font i la construcció dels mòduls al mateix temps. Aquest és el valor predeterminat, aquesta opció només es necessita especificar si l'heu inhabilitat a la configuració. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-help">
<term
><parameter
>--help</parameter
></term>
<listitem
><para
>Només mostra una ajuda senzilla sobre aquest script. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-version">
<term
><parameter
>--version</parameter
> (o <parameter
>-v</parameter
>)</term>
<listitem
><para
>Mostra la versió del programa. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-show-info">
<term
><parameter
>--show-info</parameter
></term>
<listitem
><para
>Mostra informació sobre el &kdesrc-build; i el sistema operatiu, el qual pot ser útil en els informes d'error o en demanar ajuda en els fòrums o les llistes de correu. </para>
<para
>Disponible des de la versió 18.11.</para>
</listitem>
</varlistentry>

<varlistentry id="cmdline-initial-setup">
<term
><parameter
>--initial-setup</parameter
></term>
<listitem
><para
>Fa que el &kdesrc-build; realitzi una única configuració inicial necessària per a preparar el sistema, de manera que funcioni el &kdesrc-build; i perquè s'executi el programari &kde; instal·lat. </para>
<para
>Això inclou:</para>
<itemizedlist>
<listitem
><para
>Instal·lar les dependències conegudes (en les distribucions admeses de &Linux;)</para
></listitem>
<listitem
><para
>Afegir les variables d'entorn necessàries al <literal
>~/.bashrc</literal
></para
></listitem>
<listitem
><para
>Configurar un <link linkend="setup-rcfile"
>fitxer de configuració</link
></para
></listitem>
</itemizedlist>

<para
>Disponible des de la versió 18.11.</para>
</listitem>
</varlistentry>

<varlistentry id="cmdline-author">
<term
><parameter
>--author</parameter
></term>
<listitem
><para
>Mostra la informació de contacte sobre l'autor. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-color">
<term
><parameter
>--color</parameter
></term>
<listitem
><para
>Habilitar la sortida amb color. (Aquest és el valor predeterminat per als terminals interactius). </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-nice">
<term
><parameter
>--nice=<replaceable
>valor</replaceable
></parameter
></term>
<listitem
><para
>Aquest valor ajusta la prioritat de la CPU de l'ordinador sol·licitada pel &kdesrc-build;, i haurà d'estar en l'interval de 0 a 20. El 0 és la prioritat més alta (perquè és la menys <quote
>agradable</quote
>), el 20 és la prioritat més baixa. L'opció predeterminada de &kdesrc-build; és de 10. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-no-async">
<term
><parameter
>--no-async</parameter
></term>
<listitem
><para
>Inhabilita el <link linkend="conf-async"
>mode asíncron</link
> d'actualització. En canvi, tota l'actualització es realitzarà abans que comenci la construcció. Aquesta opció alentirà el procés general, però si trobeu errors d'IPC mentre s'executa el &kdesrc-build;, proveu utilitzant aquesta opció i envieu un <ulink url="https://bugs.kde.org/"
>informe d'error</ulink
>. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-no-color">
<term
><parameter
>--no-color</parameter
></term>
<listitem
><para
>Inhabilita la sortida amb color. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-pretend">
<term
><parameter
>--pretend</parameter
> (o <parameter
>-p</parameter
>)</term>
<listitem
><para
>El &kdesrc-build; s'executarà a través del procés d'actualització i construcció, però en lloc de realitzar cap acció per actualitzar o compilar, generarà el que l'script hauria fet (&pex;, quines ordres executar, passos generals que s'estan prenent, &etc;).</para>

<note
><para
>Les ordres senzilles de només lectura (com llegir la informació del fitxer) encara poden executar-se per fer que la sortida sigui més rellevant (com simular correctament si el codi font s'extraurà o actualitzarà). </para
></note>

<important
><para
>Aquesta opció requereix que estiguin disponibles algunes metadades necessàries, que normalment es descarreguen automàticament, però les descàrregues estan inhabilitades en el mode simulat. Si mai heu executat el &kdesrc-build; (i per tant, no teniu aquestes metadades), haureu d'executar <command
>kdesrc-build <option
>--metadata-only</option
></command
> per a descarregar primer les metadades necessàries. </para
></important>
</listitem>
</varlistentry>

<varlistentry id="cmdline-quiet">
<term
><parameter
>--quiet</parameter
> (o <parameter
>-q</parameter
>)</term>
<listitem
><para
>No serà tan sorollós amb la sortida. Amb aquest interruptor només sortiran els elements bàsics. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-really-quiet">
<term
><parameter
>--really-quiet</parameter
></term>
<listitem
><para
>Només surten els avisos i errors. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-verbose">
<term
><parameter
>--verbose</parameter
></term>
<listitem
><para
>Serà molt descriptiu sobre el que està succeint i el que està fent el &kdesrc-build;. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-src-only">
<term
><parameter
>--src-only</parameter
> (o <parameter
>--svn-only</parameter
>)</term>
<listitem
><para
>Només realitza l'actualització del codi font. (El <parameter
>--svn-only</parameter
> només s'admet per compatibilitat amb els scripts antics). </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-build-only">
<term
><parameter
>--build-only</parameter
></term>
<listitem
><para
>Només realitza el procés de construcció. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-install-only">
<term
><parameter
>--install-only</parameter
></term>
<listitem
><para
>Només realitza el procés d'instal·lació. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-metadata-only">
<term
><parameter
>--metadata-only</parameter
></term>
<listitem
><para
>Només realitza el procés de descàrrega de les metadades. El &kdesrc-build; normalment gestiona això automàticament, però pot fer-ho manualment per a permetre que funcioni l'opció <option
><link linkend="cmdline-pretend"
>--pretend</link
></option
> de la línia d'ordres. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-rebuild-failures">
<term
><parameter
>--rebuild-failures</parameter
></term>
<listitem
><para
>Aquesta opció permet construir només aquells mòduls que no s'han pogut construir en una execució anterior de &kdesrc-build;. Això és útil si s'ha produït un nombre significatiu de fallades mesclades amb construccions amb èxit. Després de solucionar el problema que causa les fallades de construcció, podreu construir amb facilitat només els mòduls que van fallar anteriorment.</para>

<note
><para
>Tingueu en compte que la llista dels <quote
>mòduls amb fallades anteriors</quote
> es restableix cada vegada que finalitza una execució de &kdesrc-build; amb algunes fallades de mòduls. No obstant això, no es restableix amb una construcció completa amb èxit, així que podreu reconstruir amb èxit un o dos mòduls i aquest indicador seguirà funcionant.</para
></note>

<para
>Aquesta opció es va introduir en el &kdesrc-build; 15.09.</para>
</listitem>
</varlistentry>

<varlistentry id="cmdline-include-dependencies">
<term
><parameter
>--include-dependencies</parameter
></term>
<term
><parameter
>--no-include-dependencies</parameter
></term>
<listitem
><para
>Aquesta opció fa que el &kdesrc-build; inclogui automàticament altres mòduls del &kde; i les &Qt; a la construcció, si és necessari per als mòduls que heu sol·licitat construir a la línia d'ordres o al <link linkend="configure-data"
>fitxer de configuració</link
>.</para>

<para
>Els mòduls que s'afegeixen són registrats dins del sistema de gestió del codi font del &kde;. Vegeu la <xref linkend="kde-projects-module-sets"/>.</para>

<para
>L'opció del fitxer de configuració corresponent és <link linkend="conf-include-dependencies"
>include-dependencies</link
>.</para>

<para
>També podeu utilitzar <parameter
>--no-include-dependencies</parameter
>, la qual desactivarà la inclusió automàtica dels mòduls de dependència addicionals.</para>
</listitem>
</varlistentry>

<varlistentry id="cmdline-ignore-modules">
<term
><parameter
>--ignore-modules</parameter
></term>
<listitem
><para
>No inclourà els mòduls passats a la resta de la línia d'ordres en el procés d'actualització/construcció (això és útil si voleu construir la majoria dels mòduls en el <link linkend="configure-data"
>fitxer de configuració</link
> i ometre'n alguns). </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-no-src">
<term
><parameter
>--no-src</parameter
> (o <parameter
>--no-svn</parameter
>)</term>
<listitem
><para
>Omet posar-se en contacte amb el servidor de &subversion;. (El paràmetre <parameter
>--no-svn</parameter
> només és admès per a la compatibilitat amb les versions antigues de l'script). </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-no-build">
<term
><parameter
>--no-build</parameter
></term>
<listitem
><para
>Omet el procés de construcció. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-no-metadata">
<term
><parameter
>--no-metadata</parameter
></term>
<listitem
><para
>No descarrega automàticament les metadades addicionals necessàries per als mòduls git del &kde;. Les actualitzacions del codi font per als mòduls en si seguiran succeint a menys que també passeu l'opció <link linkend="cmdline-no-src"
>--no-src</link
>. </para
><para
>Això pot ser útil si esteu tornant a executar sovint el &kdesrc-build;, ja que les metadades no canvien amb molta freqüència. Fixeu-vos, que moltes altres característiques requereixen que les metadades estiguin disponibles. És possible que vulgueu considerar executar el &kdesrc-build; una vegada amb l'opció <link linkend="cmdline-metadata-only"
>--metadata-only</link
> i aleshores utilitzar aquesta opció per a les execucions posteriors. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-no-install">
<term
><parameter
>--no-install</parameter
></term>
<listitem
><para
>No instal·la automàticament els paquets després de construir-los. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-no-build-when-unchanged">
<term
><parameter
>--no-build-when-unchanged</parameter
></term>
<term
><parameter
>--force-build</parameter
></term>
<listitem
><para
>Aquesta opció inhabilita explícitament ometre el procés de construcció (una optimització controlada per l'opció «<link linkend="conf-build-when-unchanged"
>build-when-unchanged</link
>»). Això és útil per a fer que el &kdesrc-build; executi la construcció quan heu canviat quelcom que el &kdesrc-build; no pot comprovar.</para>

<para
><parameter
>--force-build</parameter
> realitzarà exactament la mateixa funció i potser és més fàcil de recordar.</para>
</listitem>
</varlistentry>

<varlistentry id="cmdline-debug">
<term
><parameter
>--debug</parameter
></term>
<listitem
><para
>Habilita el mode de depuració per a l'script. Actualment, això vol dir que tota la sortida es bolcarà a la sortida estàndard a més de registrar-se al directori de registre com de costum. A més, moltes funcions són molt més detallades sobre el que estan fent que en el mode de depuració. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-query">
<term
><parameter
>--query</parameter
>=<userinput
><replaceable
>mode</replaceable
></userinput
></term>
<listitem
><para
>Aquesta ordre fa que el &kdesrc-build; consulti un paràmetre dels mòduls a la llista de construcció (ja sigui passat sobre la línia d'ordres o llegit des del fitxer de configuració), enviant el resultat a la pantalla (un mòdul per línia).</para>

<para
>Aquesta opció s'haurà de proporcionar amb un <quote
>mode de consulta</quote
>, el qual haurà de ser un dels següents:</para>
    <itemizedlist>
    <listitem
><para
><option
>source-dir</option
>, el qual fa que el &kdesrc-build; generi el camí sencer a on s'emmagatzema el codi font del mòdul. </para
></listitem>
    <listitem
><para
><option
>build-dir</option
>, el qual fa que el &kdesrc-build; generi el camí sencer a on ocorre el procés de construcció del mòdul. </para
></listitem>
    <listitem
><para
><option
>install-dir</option
>, el qual fa que el &kdesrc-build; generi el camí sencer a on s'instal·larà el mòdul. </para
></listitem>
    <listitem
><para
><option
>project-path</option
>, el qual fa que el &kdesrc-build; doni com a sortida la ubicació del mòdul dins de la jerarquia de repositoris de codi font del &kde;. Vegeu la <xref linkend="kde-projects-module-sets"/> per a més informació sobre aquesta jerarquia. </para
></listitem>
    <listitem
><para
><option
>branch</option
>, el qual fa que el &kdesrc-build; doni com a sortida la branca de git que s'utilitzarà per a cada mòdul, en funció de les opcions vigents «<option
><link linkend="conf-tag"
>tag</link
></option
>», «<option
><link linkend="conf-branch"
>branch</link
></option
>» i «<option
><link linkend="conf-branch-group"
>branch-group</link
></option
>». </para
></listitem>
    <listitem
><para
>D'altra manera, es poden utilitzar els noms d'opció que siguin vàlids per a mòduls al <link linkend="conf-options-table"
>fitxer de configuració</link
>, es llistarà el valor resolt per a cada mòdul. </para
></listitem>
    </itemizedlist>

<para
>Si es passa un únic mòdul a la línia d'ordres, la sortida simplement serà el valor del paràmetre que s'està consultant. Si es passen múltiples mòduls (o cap) a la línia d'ordres, cada línia estarà prefixada amb el nom del mòdul. De qualsevol manera, el &kdesrc-build; s'aturarà una vegada doni com a sortida cada valor. </para>

<para
>Aquesta opció es va introduir en el &kdesrc-build; 16.05.</para>

<informalexample>
<para
>Per exemple, l'ordre <quote
><command
>kdesrc-build</command
> <parameter
>--query</parameter
> <parameter
><replaceable
>branch</replaceable
></parameter
> <parameter
><replaceable
>kactivities</replaceable
></parameter
> <parameter
><replaceable
>kdepim</replaceable
></parameter
></quote
> podria acabar amb resultats com:</para>
<screen
>kactivities: master
kdepim: master
</screen>
</informalexample>
</listitem>
</varlistentry>

<varlistentry id="cmdline-no-rebuild-on-fail">
<term
><parameter
>--no-rebuild-on-fail</parameter
></term>
<listitem
><para
>No intenta reconstruir els mòduls que han fallat en la construcció des de zero. El &kdesrc-build; mai intentarà fer això amb un mòdul que ja s'ha intentat construir des de zero. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-refresh-build">
<term
><parameter
>--refresh-build</parameter
></term>
<listitem
><para
>Torna a crear el sistema de construcció i el crea des de zero. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-reconfigure">
<term
><parameter
>--reconfigure</parameter
></term>
<listitem
><para
>Executa de nou el <command
>cmake</command
> (per als mòduls del &kde;) o el <command
>configure</command
> (per a les &Qt;), sense netejar el directori de construcció. Normalment no hauríeu d'especificar això, ja que el &kdesrc-build; detectarà quan es canviïn les opcions rellevants i tornarà a executar automàticament la configuració de la construcció. Aquesta opció està implícita si s'utilitza l'opció <parameter
><link linkend="cmdline-refresh-build"
>--refresh-build</link
></parameter
>. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-resume-from">
<term
><parameter
>--resume-from</parameter
></term>
<listitem
><para
>Aquesta opció s'utilitza per a reprendre la construcció a partir del mòdul indicat, el qual hauria de ser la següent opció a la línia d'ordres. No haureu d'especificar altres noms de mòduls a la línia d'ordres. </para>

<note
><para
>Aquesta opció anteriorment afegia <link linkend="cmdline-no-src"
><parameter
>--no-src</parameter
></link
>, però ja no (des del &kdesrc-build; 1.13). Si voleu evitar les actualitzacions del codi font en reprendre, simplement passeu <option
><userinput
>--no-src</userinput
></option
> a més de les altres opcions. </para
></note>

<para
>Vegeu també: <xref linkend="cmdline-resume-after"/> i <xref linkend="resuming-failed"/>. Preferiríeu utilitzar aquesta opció de la línia d'ordres si heu solucionat l'error de construcció i voleu que el &kdesrc-build; completi la construcció.</para
></listitem>
</varlistentry>

<varlistentry id="cmdline-resume-after">
<term
><parameter
>--resume-after</parameter
></term>
<listitem
><para
>Aquesta opció s'utilitza per a reprendre la construcció a partir del mòdul indicat, el qual hauria de ser la següent opció a la línia d'ordres. No haureu d'especificar altres noms de mòduls a la línia d'ordres. </para>

<note
><para
>Aquesta opció anteriorment afegia <link linkend="cmdline-no-src"
><parameter
>--no-src</parameter
></link
>, però ja no (des del &kdesrc-build; 1.13). Si voleu evitar les actualitzacions del codi font en reprendre, simplement passeu <option
><userinput
>--no-src</userinput
></option
> a més de les altres opcions. </para
></note>

<para
>Vegeu també: <xref linkend="cmdline-resume-from"/> i <xref linkend="resuming-failed"/>. Preferiríeu utilitzar aquesta opció de la línia d'ordres si heu solucionat l'error de construcció, i també heu construït i instal·lat el mòdul, i voleu que el &kdesrc-build; comenci de nou amb el següent mòdul.</para
></listitem>
</varlistentry>

<varlistentry id="cmdline-resume">
<term
><parameter
>--resume</parameter
></term>
<listitem
><para
>Aquesta opció es pot utilitzar per executar &kdesrc-build; després que s'hagi produït un error de construcció. </para
><para
>Reprèn la construcció des del mòdul que va fallar, utilitzant la llista de mòduls que esperen a ser compilats, i també inhabilita les actualitzacions del codi font i les metadades. El cas d'ús és quan un error senzill o manca d'una dependència causa la falla de la construcció. Una vegada corregiu l'error, podreu tornar ràpidament a construir els mòduls que es construïen abans, sense tocar <option
><link linkend="cmdline-resume-from"
>--resume-from</link
></option
> i <option
><link linkend="cmdline-stop-before"
>--stop-before</link
></option
>. </para
><para
>Això és encara més útil amb l'opció <option
><link linkend="cmdline-stop-on-failure"
>--stop-on-failure</link
></option
> de la línia d'ordres, especialment si esteu configurant inicialment el vostre entorn de desenvolupament. </para
><para
>Aquesta opció es va introduir en el &kdesrc-build; 1.16. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-stop-before">
<term
><parameter
>--stop-before</parameter
></term>
<listitem
><para
>Aquesta opció de la línia d'ordres s'utilitza per aturar el procés de construcció normal just <emphasis
>abans</emphasis
> que es construeixi normalment un mòdul. </para
><para
>Per exemple, si la llista de construcció normal era <simplelist type="inline"
> <member
>mòdul_A</member
><member
>mòdul_B</member
><member
>mòdul_C</member
></simplelist
>, llavors <option
>--stop-before=<replaceable
>mòdul_B</replaceable
></option
> farà que el &kdesrc-build; només construeixi el <literal
>mòdul_A</literal
>. </para
><para
>Aquesta opció de la línia d'ordres es va introduir en el &kdesrc-build; 1.16. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-stop-after">
<term
><parameter
>--stop-after</parameter
></term>
<listitem
><para
>Aquesta opció de la línia d'ordres s'utilitza per aturar el procés de construcció normal just <emphasis
>després</emphasis
> que es construeixi normalment un mòdul. </para
><para
>Per exemple, si la llista de construcció normal era <simplelist type="inline"
> <member
>mòdul_A</member
><member
>mòdul_B</member
><member
>mòdul_C</member
></simplelist
>, llavors <option
>--stop-after=<replaceable
>mòdul_B</replaceable
></option
> farà que el &kdesrc-build; construeixi el <literal
>mòdul_A</literal
> i el <literal
>mòdul_B</literal
>. </para
><para
>Aquesta opció de la línia d'ordres es va introduir en el &kdesrc-build; 1.16. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-stop-on-failure">
<term
><parameter
>--stop-on-failure</parameter
></term>
<listitem
><para
>Aquesta opció fa que la construcció s'interrompi tan aviat com passi una fallada. Útil quan configureu l'entorn de desenvolupament inicial. Sense aquest indicador, el &kdesrc-build; intentarà continuar amb la resta dels mòduls en la construcció per evitar perdre temps en cas que el problema sigui amb un sol mòdul. </para
><para
>Aquesta opció es va introduir en el &kdesrc-build; 1.16. Vegeu també l'opció «<link linkend="conf-stop-on-failure"
>stop-on-failure</link
>». </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-rc-file">
<term
><parameter
>--rc-file</parameter
></term>
<listitem
><para
>Això interpretarà el següent paràmetre a la línia d'ordres, així com el fitxer des del qual llegir les opcions de configuració. El valor predeterminat per a aquest paràmetre és <filename
>kdesrc-buildrc</filename
> (marcat en el directori de treball actual). Si aquest fitxer no existeix, en el seu lloc s'emprarà <filename
>~/.config/kdesrc-buildrc</filename
> (<filename
>$XDG_CONFIG_HOME/kdesrc-buildrc</filename
>, si està establerta <envar
>$XDG_CONFIG_HOME</envar
>). Vegeu també <xref linkend="kdesrc-buildrc"/>. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-print-modules">
<term
><parameter
>--print-modules</parameter
></term>
<listitem>
<para
>Realitza totes les accions i inclou el reordenament de dependències dels mòduls especificats a la línia d'ordres (o al fitxer de configuració), imprimeix un per línia els mòduls que es processaran i després surt sense més accions. </para>
<para
>Les metadades «<literal
>kde-project</literal
>» són baixades primer (però, vegeu <option
><link linkend="cmdline-pretend"
>--pretend</link
></option
> o <option
><link linkend="cmdline-no-src"
>--no-src</link
></option
>). </para>
<para
>La sortida no és totalment compatible amb l'ús dels scripts, ja que es poden generar altres missatges de sortida fins que es mostri la llista de mòduls. </para>
<para
>Això és principalment útil per a determinar amb rapidesa que el &kdesrc-build; entén que són les dependències d'un mòdul, el qual vol dir que només és útil per als mòduls de «<link linkend="kde-projects-module-sets"
><literal
>kde-projects</literal
></link
>». Aquesta opció també és acceptada amb <option
><link linkend="cmdline-resume-from"
>--resume-from</link
></option
>, <option
><link linkend="cmdline-resume-after"
>--resume-after</link
></option
>, <option
><link linkend="cmdline-stop-before"
>--stop-before</link
></option
> i <option
><link linkend="cmdline-stop-after"
>--stop-after</link
></option
>. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-list-build">
<term
><parameter
>--list-build</parameter
></term>
<listitem>
<para
>Llista els mòduls que es construirien, en l'ordre en què es construirien. Si correspon, la llista de la sortida també esmenta quin commit/branch/tag se seleccionaria per extreure. </para>
<para
>Aquesta opció és similar a <link linkend="cmdline-print-modules"
><option
>--print-modules</option
></link
>. Per obtenir informació més detallada sobre com els mòduls es relacionen entre si, vegeu també: <link linkend="cmdline-dependency-tree"
><option
>--dependency-tree</option
></link
>. </para>
</listitem>
</varlistentry>

<varlistentry id="cmdline-dependency-tree">
<term
><parameter
>--dependency-tree</parameter
></term>
<listitem>
<para
>Imprimeix informació sobre les dependències en els mòduls que es construiran utilitzant un format en arbre (recursiu). La informació llistada també inclou de quin commit/branch/tag específic es depèn i si es construirà o no la dependència. Nota: la sortida generada pot ser molt gran per a aplicacions amb moltes dependències. </para>
</listitem>
</varlistentry>

<varlistentry id="cmdline-run">
<term
><parameter
>--run</parameter
></term>
<listitem
><para
>Aquesta opció interpreta el següent element a la línia d'ordres com un programa per executar, i el &kdesrc-build; acabarà de llegir el fitxer de configuració, actualitzarà l'entorn de forma normal i després executarà el programa indicat.</para>

<para
>No obstant això, en la majoria dels casos això no funcionarà per iniciar un intèrpret d'ordres amb l'entorn del &kdesrc-build;, ja que els intèrprets d'ordres interactius generalment restableixen almenys part de les variables d'entorn (com <envar
>PATH</envar
> i <envar
>KDEDIRS</envar
>) en la seqüència d'inici. </para>

<tip
><para
>Si voleu veure l'entorn utilitzat pel &kdesrc-build;, podeu executar l'ordre <command
>printenv</command
>:</para>
<informalexample>
<screen
>$ <command
>kdesrc-build</command
> <parameter
>--run</parameter
> <parameter
>printenv</parameter>
KDE_SESSION_VERSION=4
SDL_AUDIODRIVER=alsa
LANGUAGE=
XCURSOR_THEME=Oxygen_Blue
LESS=-R -M --shift 5
QMAIL_CONTROLDIR=/var/qmail/control
... etc.
</screen>
</informalexample
></tip>
</listitem>
</varlistentry>

<varlistentry id="cmdline-prefix">
<term
><parameter
>--prefix=&lt;/camí/al/kde&gt;</parameter
></term>
<listitem
><para
>Això permet canviar el directori en el qual s'instal·larà el &kde; des de la línia d'ordres. Aquesta opció implica <link linkend="cmdline-reconfigure"
><parameter
>--reconfigure</parameter
></link
>, però encara podria ser necessari utilitzar <link linkend="cmdline-refresh-build"
><parameter
>--refresh-build</parameter
></link
>. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-revision">
<term
><parameter
>--revision</parameter
></term>
<listitem
><para
>Aquesta opció farà que el &kdesrc-build; extregui una revisió numerada específica per a cada mòdul de &subversion;, superposant qualsevol opció «<link linkend="conf-branch"
>branch</link
>», «<link linkend="conf-tag"
>tag</link
>» o «<link linkend="conf-revision"
>revision</link
>» ja establertes per a aquests mòduls.</para>

<para
>És probable que aquesta opció no sigui una bona idea, i només està admesa per compatibilitat amb scripts antics. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-build-system-only">
<term
><parameter
>--build-system-only</parameter
></term>
<listitem
><para
>Aquesta opció fa que el &kdesrc-build; interrompi la construcció d'un mòdul just abans que s'hagi executat l'ordre <command
>make</command
>. Això només està admès per a la compatibilitat amb versions antigues, aquest efecte no és útil per al sistema de compilació actual del &kde;. </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-install"
><term
><parameter
>--install</parameter
></term>
<listitem
><para
>Si aquesta és l'única opció de la línia d'ordres, intentarà instal·lar tots els mòduls continguts a <filename
>log/latest/build-status</filename
>. Si les opcions de la línia d'ordres s'especifiquen després de <parameter
>--install</parameter
>, se suposa que són mòduls per instal·lar (encara que no s'hagin construït correctament en la darrera execució). </para
></listitem>
</varlistentry>

<varlistentry id="cmdline-no-snapshots"
><term
><parameter
>--no-snapshots</parameter
></term>
<listitem
><para
>En proporcionar aquesta opció, farà que el &kdesrc-build; realitzi sempre una extracció inicial normal d'un mòdul en lloc d'utilitzar una instantània d'inici ràpid (només disponible per als mòduls Git des del repositori «<literal
>kde-projects</literal
>»). Recordeu que aquesta opció només s'haurà d'utilitzar si hi ha un error en utilitzar les instantànies, ja que la instantània d'inici ràpid redueix la càrrega en els repositoris de codi font del &kde;. </para>

<note
><para
>Les instantànies del mòdul <emphasis
>són</emphasis
> extraccions reals. No hauríeu de necessitar especificar aquesta opció, només és una ajuda per a la resolució de problemes.</para
></note>
</listitem>
</varlistentry>

<varlistentry id="cmdline-delete-my-patches">
<term
><parameter
>--delete-my-patches</parameter
></term>
<listitem
><para
>Aquesta opció s'utilitza per a permetre que el &kdesrc-build; suprimeixi els directoris de codi font que poden contenir dades de l'usuari, de manera que el mòdul es pugui tornar a descarregar. Això normalment només seria útil per als desenvolupadors del &kde; (podrien tenir canvis locals que seran suprimits).</para>

<para
>Actualment, això només s'utilitza per extreure els mòduls que s'han convertit des de &subversion; a &git;. No heu d'utilitzar aquesta opció normalment, si cal, el &kdesrc-build; sol·licitarà que es torni a executar amb ella.</para>
</listitem>
</varlistentry>

<varlistentry id="cmdline-delete-my-settings">
<term
><parameter
>--delete-my-settings</parameter
></term>
<listitem
><para
>Aquesta opció s'utilitza per a permetre que el &kdesrc-build; sobreescrigui els fitxers existents que poden contenir dades de l'usuari.</para>

<para
>Actualment, això només s'utilitza per a la configuració d'xsession per al gestor d'inici de la sessió. No heu d'utilitzar aquesta opció normalment, si cal, el &kdesrc-build; sol·licitarà que es torni a executar amb ella.</para>
</listitem>
</varlistentry>

<varlistentry id="cmdline-global-option">
<term
><parameter
>--<replaceable
>&lt;nom_opció&gt;</replaceable
>=</parameter
></term>
<listitem
><para
>Podeu utilitzar aquesta opció per a superposar una opció en el <link linkend="configure-data"
>fitxer de configuració</link
> per a cada mòdul. Per exemple, per a superposar l'opció «<link linkend="conf-log-dir"
>log-dir</link
>», faríeu el següent: <userinput
><parameter
>--log-dir=<filename class="directory"
><replaceable
>/camí/al/dir</replaceable
></filename
></parameter
></userinput
>. </para>

<note
><para
>Aquesta característica només es pot utilitzar per als noms d'opció ja reconeguts pel &kdesrc-build;, que no són admesos per les opcions rellevants de la línia d'ordres. Per exemple, l'opció <link linkend="conf-async"
>async</link
> del fitxer de configuració té les opcions específiques <link linkend="cmdline-async"
>--async</link
> i <link linkend="cmdline-no-async"
>--no-async</link
> de la línia d'ordres que són preferides pel &kdesrc-build;. </para
></note>

</listitem>
</varlistentry>

<varlistentry id="cmdline-module-option">
<term
><parameter
>--set-module-option-value=<replaceable
>&lt;nom_mòdul&gt;</replaceable
>,<replaceable
>&lt;nom_opció&gt;</replaceable
>,<replaceable
>&lt;valor_opció&gt;</replaceable
></parameter
></term>
<listitem
><para
>Podeu utilitzar aquesta opció per a superposar una opció en el <link linkend="configure-data"
>fitxer de configuració</link
> per a un mòdul específic. </para
></listitem>
</varlistentry>

</variablelist>

<para
>Es donarà per fet que qualsevol altra opció de línia d'ordres seran els mòduls per actualitzar i construir. Si us plau, no mescleu la construcció amb la instal·lació. </para>

</sect1>

</chapter>

<chapter id="using-kdesrc-build">
<title
>Ús de &kdesrc-build;</title>

<sect1 id="using-kdesrc-build-preface">
<title
>Prefaci</title>

<para
>Normalment, utilitzar el &kdesrc-build; després d'haver llegit el <xref linkend="getting-started"/> és tan fàcil com fer el següent des d'un intèrpret de terminal:</para>

<screen
><prompt
>&percnt;</prompt
> <command
><userinput
>kdesrc-build</userinput
></command
>
</screen>

<para
>El &kdesrc-build; descarregarà el codi font per al &kde;, intentarà configurar-lo i construir-lo, i després l'instal·larà.</para>

<para
>Seguiu llegint per a descobrir com farà això el &kdesrc-build; i què més podreu fer amb aquesta eina.</para>

</sect1>

<sect1 id="basic-features">
<title
>Característiques bàsiques de &kdesrc-build;</title>

<sect2 id="using-qt">
<title
>Implementació de les &Qt;</title>
<para
>El &kdesrc-build; admet la construcció del conjunt d'eines de les &Qt; utilitzat pel programari &kde; com a una comoditat per als usuaris. Aquest suport és gestionat per un mòdul especial anomenat qt.</para>

<note
><para
>Les &Qt; es desenvolupen sota un repositori separat del programari &kde; ubicat a <ulink url="http://code.qt.io/cgit/qt/"
>http://code.qt.io/cgit/qt/</ulink
>.</para
></note>

<para
>Per a construir les &Qt;, assegureu-vos que la configuració de «<link linkend="conf-qtdir"
>qtdir</link
>» estigui establerta al directori en el que esteu cercant les &Qt;, com es descriu a <xref linkend="configure-data"/>.</para>

<para
>A continuació, haureu d'assegurar-vos que el mòdul qt es troba afegit al <filename
>.kdesrc-buildrc</filename
>, abans que qualsevol altre mòdul en el fitxer. Si utilitzeu el fitxer de configuració de mostra, simplement podreu descomentar l'entrada existent per al mòdul qt.</para>

<para
>Ara, haureu de verificar que les opcions «<link linkend="conf-repository"
>repository</link
>» i «<link linkend="conf-branch"
>branch</link
>» estiguin establertes adequadament:</para>

<orderedlist>
<listitem
><para
>La primera opció és per a construir les &Qt; utilitzant una rèplica mantinguda en els repositoris de codi font del &kde; (no s'aplicarà cap altra canvi, és simplement un clon del codi font oficial). Això és molt recomanable a causa de problemes ocasionals amb la clonació de tot un mòdul de les &Qt; des del seu repositori oficial.</para>

<para
>Per utilitzar aquesta opció, podeu establir l'opció «<option
>repository</option
>» per al mòdul qt a <userinput
>kde:qt</userinput
>.</para>
</listitem>

<listitem
><para
>D'altra manera, per a construir les &Qt; estàndard, establiu l'opció «<option
>repository</option
>» a <userinput
>git://gitorious.org/qt/qt.git</userinput
>. Recordeu que podríeu experimentar problemes en realitzar el clonatge inicial de les &Qt; des d'aquest repositori.</para
></listitem>
</orderedlist>

<para
>En ambdós casos, l'opció de branca s'haurà d'establir a <userinput
>master</userinput
> (a menys que vulgueu construir una branca diferent).</para>

</sect2>

<sect2 id="kdesrc-build-std-flags">
<title
>Indicadors estàndard afegits pel &kdesrc-build;</title>
<para
>Nota d'en Bene: aquesta secció no s'aplica als mòduls per als quals hàgiu configurat una cadena d'eines personalitzada, &pex;, utilitzant «<link linkend="conf-cmake-toolchain"
>cmake-toolchain</link
>».</para>

<para
>Per estalviar temps, el &kdesrc-build; afegeix alguns camins estàndard a l'entorn: </para>

<itemizedlist>
<listitem
><para
>El camí a les biblioteques del &kde; i les &Qt; s'afegeix automàticament a la variable <envar
>LD_LIBRARY_PATH</envar
>. Això vol dir que no necessitareu editar la «&libpath;» per a incloure'l. </para
></listitem>

<listitem
><para
>El camí als programes de desenvolupament del &kde; i les &Qt; s'afegeix automàticament a la variable <envar
>PATH</envar
>. Això vol dir que no necessitareu editar la «&binpath;» per a incloure'l. </para
></listitem>

<listitem
><para
>El camí al <application
>pkg-config</application
> proporcionat pel &kde; s'afegeix automàticament a la variable <envar
>PKG_CONFIG_PATH</envar
>. Això vol dir que no necessitareu utilitzar la «&set-env;» per a incloure'l. </para
></listitem>

<listitem
><para
>L'opció per a «&kdedir;» es propagarà automàticament a la variable d'entorn <envar
>KDEDIR</envar
> durant la construcció. (<envar
>KDEDIRS</envar
> no es veurà afectada). </para
></listitem>

<listitem
><para
>L'opció per a «&qtdir;» es propagarà automàticament a la variable d'entorn <envar
>QTDIR</envar
> durant la construcció. </para
></listitem>

</itemizedlist>

</sect2>

<sect2 id="build-priority">
<title
>Canviar la prioritat de construcció de &kdesrc-build;</title>
<para
>Els programes poden executar-se amb diferents nivells de prioritat en els sistemes operatius, inclosos &Linux; i &BSD;. Això permet que el sistema assigni temps als diferents programes d'acord amb la seva importància. </para>

<para
>El &kdesrc-build; normalment se li assignarà una prioritat baixa perquè la resta dels programes en el sistema no es vegin afectats i puguin executar amb normalitat. Utilitzant aquesta tècnica, el &kdesrc-build; utilitzarà CPU addicional quan estigui disponible. </para>

<para
>El &kdesrc-build; encara mantindrà un nivell de prioritat prou alt perquè s'executi abans que la rutina dels processos per lots i abans que els programes amb donació de CPU com <ulink url="http://setiathome.ssl.berkeley.edu/"
>Seti@Home</ulink
>. </para>

<para
>Per a alterar el &kdesrc-build; de manera que utilitzi un nivell de prioritat més alt (o més baix) de forma permanent, llavors haureu d'ajustar l'opció «&niceness;» al <link linkend="configure-data"
>fitxer de configuració</link
>. L'opció «&niceness;» controla com serà d'<quote
>agradable</quote
> el &kdesrc-build; amb els altres programes. En altres paraules, tenir una «&niceness;» més alta, li dona al &kdesrc-build; una prioritat més baixa. Llavors, per a donar-li al &kdesrc-build; una prioritat més alta, reduïu la «&niceness;» (i viceversa). La «&niceness;» pot anar des de 0 (gens agradable, màxima prioritat) fins a 20 (superagradable, menor prioritat).</para>

<para
>També podreu canviar temporalment la prioritat per al &kdesrc-build; utilitzant l'opció &cmd-nice; de la <link linkend="cmdline"
>línia d'ordres</link
>. El valor de l'opció s'utilitza exactament igual que per a la «&niceness;».</para>

<note
><para
>És possible que alguns programes executats pel superusuari tinguin un bon valor negatiu, amb una prioritat corresponentment més alta per a aquests programes. Establir una «&niceness;» negativa (o fins i tot de 0) per al &kdesrc-build; no és una gran idea, ja que no ajudarà significativament al temps d'execució, però farà que l'ordinador sembli molt lent en el cas que encara necessiteu utilitzar-lo. </para
></note>

<informalexample>
<para
>Per a executar el &kdesrc-build; amb una «&niceness;» de 15 (una prioritat inferior a la normal):</para>

<screen
><prompt
>&percnt;</prompt
> <userinput
><command
>kdesrc-build</command
> <option
>--nice=<replaceable
>15</replaceable
></option
></userinput
>
</screen>

<para
>O bé, podeu editar el <link linkend="configure-data"
>fitxer de configuració</link
> perquè el canvi sigui permanent:</para>

<screen
>&niceness; <replaceable
>15</replaceable
>
</screen>
</informalexample>

<tip>
<para
>L'opció «<link linkend="conf-niceness"
>&niceness;</link
>» només afectarà l'ús del/s processador/s de l'ordinador. Un altre efecte important en el rendiment de l'ordinador es relaciona amb la quantitat de dades d'entrada o sortida (<acronym
>E/S</acronym
>) que utilitza un programa. Per a controlar la quantitat d'<acronym
>E/S</acronym
> que pot utilitzar un programa, els sistemes operatius &Linux; moderns admeten una eina similar que s'anomena <application
>ionice</application
>. El &kdesrc-build; l'admet, (però només per habilitar o inhabilitar completament) utilitzant l'opció «<link linkend="conf-use-idle-io-priority"
>use-idle-io-priority</link
>», des del &kdesrc-build; versió 1.12. </para>
</tip>

</sect2>

<sect2 id="root-installation">
<title
>Instal·lar com a superusuari</title>
<para
>Possiblement voldreu que el &kdesrc-build; executi la instal·lació amb privilegis de superusuari. Això podria no estar recomanat per a la instal·lació en tot el sistema. No obstant això, també és útil quan s'utilitza una construcció del &kde; per a un sol usuari. Això es deu al fet que alguns mòduls (especialment el kdebase) instal·len programes que necessitaran breument permisos elevats quan s'executin. No podran assolir aquests nivells de permís a menys que s'instal·lin amb aquests permisos. </para>

<para
>Simplement podeu executar el &kdesrc-build; directament com a superusuari, però no es recomana, ja que el programa no ha estat auditat per a aquest tipus d'ús. Encara que hauria de ser segur executar el programa d'aquesta manera, és millor evitar executar-lo com a superusuari quan sigui possible.</para>

<para
>Per a solucionar això, el &kdesrc-build; proporciona l'opció «&make-install-prefix;». Podreu utilitzar aquesta opció per a especificar una ordre que realitzarà la instal·lació com un altre usuari. La forma recomanada d'utilitzar aquesta ordre és amb el programa &sudo;, el qual executarà l'ordre per a la instal·lació com a superusuari. </para>

<informalexample>
<para
>Per exemple, per instal·lar tots els mòduls utilitzant el &sudo;, podríeu fer quelcom com això:</para>

<screen
>global
  &make-install-prefix; <replaceable
>sudo</replaceable>
  # Altres opcions
end global
</screen>

<para
>Per a utilitzar «&make-install-prefix;» només per a un mòdul, això funcionarà: </para>

<screen
>module <replaceable
>nom_mòdul_svn</replaceable>
  &make-install-prefix; <replaceable
>sudo</replaceable>
end module
</screen>
</informalexample>

</sect2>

<sect2 id="build-progress">
<title
>Mostrar el progrés d'una construcció de mòduls</title>
<para
>Aquesta característica sempre està disponible i s'habilita automàticament quan és possible. El que fa això és mostrar un progrés estimat de la construcció mentre es construeix un mòdul. D'aquesta manera, sabreu quant de temps durà construir un mòdul. </para>

</sect2>

</sect1>

<sect1 id="advanced-features">
<title
>Característiques avançades</title>

<sect2 id="partial-builds">
<title
>Construir parcialment un mòdul</title>
<para
>És possible construir només peces des d'un sol mòdul del &kde;. Per exemple, possiblement voldreu compilar només un programa d'un mòdul. El &kdesrc-build; té característiques per a facilitar-ho. Hi ha diverses maneres complementàries per a fer-ho. </para>

<sect3 id="not-compiling">
<title
>Eliminar directoris d'una construcció</title>
<para
>És possible descarregar tot un repositori però fent que el sistema de construcció ometi alguns directoris quan realitza la construcció. Això requereix que el mòdul empri el &cmake; i que el sistema de compilació del mòdul permeti que l'eliminació del directori sigui opcional. </para>

<para
>Això es controla amb l'opció &do-not-compile;.</para>

<important
><para
>Aquesta opció almenys requereix que el sistema de construcció del mòdul es reconfiguri després de canviar-la. Això es fa utilitzant l'ordre <userinput
><command
>kdesrc-build</command
> <option
>&cmd-reconfigure;</option
> <option
><replaceable
>mòdul</replaceable
></option
></userinput
>. </para
></important>

<informalexample>
<para
>Per eliminar el directori <filename class="directory"
>python</filename
> del procés de construcció del kdebindings:</para>

<screen
>module <replaceable
>kdebindings</replaceable>
  &do-not-compile; <replaceable
>python</replaceable>
end module
</screen>

</informalexample>

<note
><para
>Aquesta funció depèn d'algunes convencions estàndard utilitzades en la majoria dels mòduls del &kde;. Per tant, podria no funcionar per a tots els programes.</para
></note>

</sect3>

</sect2>

<sect2 id="using-branches">
<title
>Admetre branques i etiquetatge al &kdesrc-build;</title>

<sect3 id="branches-and-tags">
<title
>Què són les branques i les etiquetes?</title>

<para
>El &subversion; admet la gestió de l'historial del codi font del &kde;. El &kde; utilitza aquest suport per a crear branques per al desenvolupament i per etiquetar el repositori de tant en tant amb una nova versió. </para>

<para
>Per exemple, els desenvolupadors del &kmail; poden estar treballant en una nova característica en una branca diferent per evitar trencar la versió utilitzada per la majoria dels desenvolupadors. Aquesta branca té un desenvolupament continu en el seu interior, fins i tot mentre la branca principal (anomenada /trunk) pot seguir amb el seu desenvolupament. </para>

<para
>Una etiqueta, d'altra banda, és una instantània del repositori de codi font en una posició en el temps. L'equip d'administració del &kde;, l'utilitza per a marcar una versió de codi adequada per al seu llançament i permetre que els desenvolupadors encara treballin en el codi. </para>

<para
>En el &subversion;, no hi ha diferència entre les branques, etiquetes o trunk dins del codi. Només és una convenció utilitzada pels desenvolupadors. Això dificulta el suport adequat de branques i etiquetes dins del &kdesrc-build;. No obstant això, hi ha algunes coses que es poden fer. </para>

</sect3>

<sect3 id="branch-support">
<title
>Com utilitzar les branques i les etiquetes</title>

<para
>El suport per a les branques i etiquetes es gestiona mitjançant un conjunt d'opcions, les quals van des d'una sol·licitud genèrica per a una versió, fins a un &url; específic per descarregar per a usuaris avançats. </para>

<para
>El mètode més fàcil és utilitzar les opcions «&branch;» i «&tag;». Simplement utilitzeu l'opció juntament amb el nom de la branca o etiqueta desitjada per a un mòdul, i el &kdesrc-build; intentarà determinar la ubicació apropiada dins del repositori del &kde; per descarregar. Això funciona molt bé per a la majoria dels mòduls del &kde;.</para>

<informalexample>
<para
>Per a descarregar el kdelibs del &kde; 4.6 (el qual simplement es coneix com la branca 4.6): </para>

<screen
>module kdelibs
  branch <replaceable
>4.6</replaceable>
  # Altres opcions...
end module
</screen>

<para
>O, per a descarregar el kdemultimedia tal com es va llançar amb el &kde; 4.6.1:</para>

<screen
>module kdemultimedia
  tag <replaceable
>4.6.1</replaceable>
  # Altres opcions...
end module
</screen>

</informalexample>

<tip
><para
>Podeu especificar un valor global de branca. Però si ho feu, no oblideu especificar una branca diferent per als mòduls que no han d'utilitzar la branca global! </para
></tip>
</sect3>

<sect3 id="advanced-branches">
<title
>Opcions avançades de suport a les branques</title>

<para
>El &kdesrc-build; admet dues opcions per a situacions en què «&branch;» i «&tag;» suposen el camí correcte de forma inadequada: «&module-base-path;» i «&override-url;». </para>

<itemizedlist>
<listitem
><para
>«&module-base-path;» s'utilitza per ajudar al &kdesrc-build; a completar la part que falta del camí d'un mòdul. Al repositori del &kde;, tots els camins tenen la forma <filename class="directory"
>svnRoot/module-base-path/<replaceable
>nom_mòdul</replaceable
></filename
>. Normalment, el &kdesrc-build; pot descobrir la part mitjana apropiada per si mateix. Quan no pot, podreu utilitzar «&module-base-path;», així: </para>

<informalexample>
<screen
>module kdesupport
    # kdesupport admet diverses etiquetes per a organitzar amb facilitat
    # el programari requerit per a una versió indicada de la plataforma KDE.
    module-base-path tags/kdesupport-for-4.5
end module
</screen>

<para
>Això farà que el &kdesrc-build; descarregui el kdesupport des de (en aquest exemple), <filename
>svn://anonsvn.kde.org/home/kde/<replaceable
>tags/kdesupport-for-4.5</replaceable
></filename
>. </para>
</informalexample>
<tip
><para
>En versions anteriors de &kdesrc-build;, el «&module-base-path;» es gestionava de manera diferent. Si trobeu problemes en utilitzar una antiga definició de «&module-base-path;», potser haureu de verificar que el camí real és el que espera el &kdesrc-build; utilitzant l'opció <link linkend="cmdline-pretend"
>--pretend</link
>. </para
></tip>
</listitem>

<listitem
><para
>L'opció «&override-url;», d'altra banda, requereix que especifiqueu el camí exacte per descarregar. No obstant això, permet extreure camins que les versions anteriors de &kdesrc-build; no tindrien l'esperança de descarregar. Actualment, l'opció «&module-base-path;» hauria de ser suficient per a qualsevol &url;: de codi font de Subversion. </para>

<important
><para
>El &kdesrc-build; no tocarà ni corregirà el valor que especifiqueu per a «&override-url;», de manera que si canvieu l'opció del «&svn-server;», és possible que també hàgiu d'actualitzar això. </para
></important>

</listitem>
</itemizedlist>

</sect3>

</sect2>

<sect2 id="stopping-the-build-early">
<title
>Aturar aviat la construcció</title>

<sect3 id="the-build-continues">
<title
>La construcció continua normalment fins i tot si es produeixen fallades</title>

<para
>El &kdesrc-build; normalment actualitzarà, construirà i instal·larà tots els mòduls a la llista especificada de mòduls a construir, fins i tot si un mòdul falla en la seva construcció. Habitualment, això és una comoditat per permetre actualitzar els paquets de programari fins i tot si es comet un error simple en un dels repositoris d'origen durant el desenvolupament que fa que la construcció es trenqui. </para>

<para
>No obstant això, és possible que vulgueu que el &kdesrc-build; aturi el que està fent una vegada que un mòdul falli en construir i instal·lar. Això pot ajudar a estalviar temps que es malgastarà intentant avançar quan els mòduls que queden a la llista de construcció tampoc no es podran construir amb èxit, especialment si mai heu construït correctament els mòduls a la llista. </para>

</sect3>

<sect3 id="stop-on-failure-stops-early">
<title
>Atureu aviat amb --stop-on-failure</title>

<para
>El mètode primari per fer-ho és usar l'opció de la línia d'ordres <link linkend="cmdline-stop-on-failure"
>--stop-on-failure</link
> quan executeu &kdesrc-build;. </para>

<para
>Aquesta opció també es pot definir al <link linkend="conf-stop-on-failure"
>fitxer de configuració</link
> per a que sigui el mode normal d'operació. </para>

<para
>També és possible dir-li al &kdesrc-build; en temps d'execució que deixi de construir <emphasis
>després de</emphasis
> completar el mòdul actual en el qual està treballant. Això és en contraposició a interrompre el &kdesrc-build; utilitzant una ordre com <keycombo action="simul"
>&Ctrl;<keycap
>C</keycap
></keycombo
>, que interromp immediatament el &kdesrc-build;, perdent el progrés del mòdul actual. </para>

<important
><para
>La interrupció del &kdesrc-build; durant la instal·lació d'un mòdul quan l'opció <link linkend="conf-use-clean-install"
>use-clean-install</link
> està activada vol dir que el mòdul interromput no estarà disponible fins que el &kdesrc-build; sigui capaç de construir el mòdul amb èxit!</para>

<para
>Si cal interrompre el &kdesrc-build; sense permetre una aturada ordenada en aquesta situació, almenys intenteu evitar fer-ho mentre el &kdesrc-build; estigui instal·lant un mòdul.</para>
</important>

</sect3>

<sect3 id="stopping-early-without-stop-on-failure">
<title
>Atureu aviat el &kdesrc-build; sense --stop-on-failure</title>

<para
>Com s'ha esmentat anteriorment, és possible fer que el &kdesrc-build; s'aturi ordenadament aviat una vegada hagi completat el mòdul en el qual està treballant actualment. Per fer-ho, cal enviar el senyal POSIX <literal
>HUP</literal
> al &kdesrc-build; </para>

<para
>Això podeu fer-ho amb una ordre com <command
>pkill</command
> (en els sistemes &Linux;) així:</para>

<programlisting
><prompt
>$ </prompt
><userinput
><command
>pkill <option
>-HUP</option
> kdesrc-build</command
></userinput
>
</programlisting>

<para
>Si es fa correctament, veureu un missatge a la sortida del &kdesrc-build; semblant a:</para>

<programlisting
>[ build ] recv SIGHUP, acabarà després d'aquest mòdul
</programlisting>

<note>
<para
>El &kdesrc-build; pot mostrar aquest missatge diverses vegades depenent del nombre de processos individuals del &kdesrc-build; que estiguin actius. Això és normal i no una indicació d'un error.</para>
</note>

<para
>Una vegada que el &kdesrc-build; hagi reconegut el senyal, deixarà de processar després de construir i instal·lar el mòdul actual. Si el &kdesrc-build; encara està actualitzant el codi font quan es rebi la petició, el &kdesrc-build; s'aturarà després que s'hagi completat l'actualització del codi font del mòdul. Una vegada que els processos d'actualització i construcció s'hagin aturat aviat, el &kdesrc-build; imprimirà els seus resultats parcials i sortirà. </para>

</sect3>

</sect2>

<sect2 id="building-successfully">
<title
>Com el &kdesrc-build; mira d'assegurar una correcta construcció</title>

<sect3 id="automatic-rebuilds">
<title
>Reconstruccions automàtiques</title>

<para
>El &kdesrc-build; solia incloure característiques per intentar reconstruir automàticament el mòdul després d'una fallada (ja que de vegades aquest reintent funcionava, en aquests moments a causa d'errors en el sistema de construcció). Gràcies al canvi a &cmake;, el sistema de construcció ja no pateix aquests errors, de manera que el &kdesrc-build; no intentarà compilar un mòdul més d'una vegada. No obstant això, hi ha situacions en què el &kdesrc-build; prendrà mesures de manera automàtica:</para>

<itemizedlist>

<listitem
><para
>Si canvieu «<link linkend="conf-configure-flags"
>configure-flags</link
>» o «<link linkend="conf-cmake-options"
>cmake-options</link
>» per a un mòdul, llavors el &kdesrc-build; ho detectarà i tornarà a executar automàticament el <command
>configure</command
> o <command
>cmake</command
> per a aquest mòdul.</para
></listitem>

<listitem
><para
>Si el sistema de construcció no existeix (fins i tot si el &kdesrc-build; no l'ha suprimit), el &kdesrc-build; el tornarà a crear automàticament. Això és útil per a permetre realitzar una <link linkend="cmdline-refresh-build"
>--refresh-build</link
> completa per a un mòdul específic sense que es realitzi en els altres mòduls.</para
></listitem>

</itemizedlist>

</sect3>

<sect3 id="manual-rebuilds">
<title
>Reconstrucció manual d'un mòdul</title>
<para
>Si realitzeu un canvi la configuració de les opcions d'un mòdul, o el codi font del mòdul canvia d'una manera que el &kdesrc-build; no reconeix, és possible que hàgiu de reconstruir el mòdul manualment.</para>

<para
>Podreu fer això, executant <userinput
><command
>kdesrc-build</command
> <option
>--refresh-build</option
> <option
><replaceable
>mòdul</replaceable
></option
></userinput
>. </para>

<para
>Si us agradaria que el &kdesrc-build; reconstrueixi automàticament el mòdul durant la propera actualització normal de la construcció, podreu crear un fitxer especial. Cada mòdul té un directori de construcció. Si creeu un fitxer anomenat <filename
>.refresh-me</filename
> en el directori de construcció d'un mòdul, el &kdesrc-build; reconstruirà el mòdul la pròxima vegada que succeeixi el procés de construcció, encara que normalment realitzaria la construcció incremental, la qual és més ràpida.</para>

<tip>
<para
>De manera predeterminada, el directori de construcció és <filename class="directory"
>~/kdesrc/build/<replaceable
>mòdul</replaceable
>/</filename
>. Si canvieu la configuració de l'opció &build-dir;, utilitzeu-la en lloc de <filename class="directory"
>~/kdesrc/build</filename
>.</para>
</tip>

<informalexample>
<para
>Reconstruïu utilitzant <filename
>.refresh-me</filename
> per al mòdul <replaceable
>kdelibs</replaceable
>:</para>
<screen
><prompt
>&percnt;</prompt
> <userinput
><command
>touch</command
> <filename
>~/kdesrc/build/<replaceable
>kdelibs</replaceable
>/.refresh-me</filename
></userinput>
<prompt
>&percnt;</prompt
> <userinput
><command
>kdesrc-build</command
></userinput
>
</screen>
</informalexample>
</sect3>

</sect2>

<sect2 id="changing-environment">
<title
>Canviar la configuració de les variables d'entorn</title>
<para
>Normalment, el &kdesrc-build; utilitza l'entorn que es troba present quan s'inicia en executar els programes per a realitzar les actualitzacions i construccions. Això és útil quan executeu el &kdesrc-build; des de la línia d'ordres.</para>

<para
>No obstant això, possiblement voldreu canviar la configuració de les variables d'entorn per a les quals el &kdesrc-build; no proporciona directament una opció. (Per exemple, per establir qualsevol variable d'entorn requerida quan s'executa el &kdesrc-build; en un temporitzador com el &cron;). Això és possible amb l'opció «&set-env;».</para>

<para
>A diferència de la majoria de les opcions, es pot establir més d'una vegada i accepta dues entrades, separades per un espai. El primer és el nom de la variable d'entorn a establir, i la resta de la línia serà el valor.</para>

<informalexample>
<para
>Establir <userinput
><envar
>DISTRO</envar
>=<replaceable
>BSD</replaceable
></userinput
> per a tots els mòduls:</para>
<screen
>global
  set-env <replaceable
>DISTRO</replaceable
> <replaceable
>BSD</replaceable>
end global
</screen>
</informalexample>

</sect2>

<sect2 id="resuming">
<title
>Reprendre les construccions</title>

<sect3 id="resuming-failed">
<title
>Reprendre una construcció fallida o interrompuda</title>

<para
>Podreu dir-li al &kdesrc-build; que comenci a construir des d'un mòdul diferent del què normalment faria. Això pot ser útil quan falla un conjunt de mòduls, o si cancel·leu al mig d'una execució de construcció. Podeu controlar això utilitzant les opcions &cmd-resume-from; i l'opció &cmd-resume-after;.</para>

<note
><para
>Les versions antigues de &kdesrc-build; ometien l'actualització del codi font en reprendre una construcció. Això ja no es fa de manera predeterminada, però sempre podreu utilitzar l'opció <option
>--no-src</option
> de la línia d'ordres per ometre l'actualització del codi font.</para
></note>

<informalexample>
<para
>Reprendre la construcció a partir del kdebase:</para>

<screen
><prompt
>&percnt;</prompt
> <userinput
><command
>kdesrc-build</command
> <option
>--resume-from=<replaceable
>kdebase</replaceable
></option
></userinput
>
</screen>
</informalexample>

<informalexample>
<para
>Reprendre la construcció a partir del kdebase (en el cas que s'hagi solucionat el problema manualment i instal·lat el mòdul vosaltres mateixos):</para>

<screen
><prompt
>&percnt;</prompt
> <userinput
><command
>kdesrc-build</command
> <option
>--resume-after=<replaceable
>kdebase</replaceable
></option
></userinput
>
</screen>
</informalexample>

<para
>Si l'última construcció de &kdesrc-build; va acabar amb una fallada de construcció, també podreu utilitzar l'opció <link linkend="cmdline-resume"
>--resume</link
> de la línia d'ordres, la qual reprendrà la darrera construcció que comenci en el mòdul que va fallar. Les actualitzacions del codi font i de les metadades també s'ometran (però si les necessiteu, en general serà millor utilitzar <link linkend="cmdline-resume-from"
>--resume-from</link
> en el seu lloc).</para>


</sect3>

<sect3 id="ignoring-modules">
<title
>Ignorar mòduls en una construcció</title>

<para
>De manera similar a la forma en què podeu <link linkend="resuming-failed"
>reprendre la construcció a partir d'un mòdul</link
>, podreu optar per actualitzar i construir-ho tot normalment, però ignorant un conjunt de mòduls.</para>

<para
>Podreu fer això utilitzant l'opció &cmd-ignore-modules;. Aquesta opció li diu al &kdesrc-build; que ignori tots els mòduls a la línia d'ordres en realitzar l'actualització i la construcció.</para>

<informalexample>
<para
>Ignorar extragear/multimedia i kdereview durant una execució completa:</para>
<screen
><prompt
>&percnt;</prompt
> <userinput
><command
>kdesrc-build</command
> <option
>--ignore-modules</option
> <replaceable
>extragear/multimedia kdereview</replaceable
></userinput
>
</screen>
</informalexample>

</sect3>
</sect2>

<sect2 id="changing-env-from-cmd-line">
<title
>Canviar les opcions des de la línia d'ordres</title>

<sect3 id="changing-global-opts">
<title
>Canviar les opcions globals</title>
<para
>Podeu canviar la configuració de les opcions llegides directament des del <link linkend="configure-data"
>fitxer de configuració</link
> amb la línia d'ordres. Aquest canvi superposarà l'opció del fitxer de configuració, però només és temporal. Només té efecte mentre segueixi present a la línia d'ordres.</para>

<para
>El &kdesrc-build; permet canviar les opcions nomenades com <replaceable
>nom_opció</replaceable
> passant un argument a la línia d'ordres en la forma <userinput
><option
>--<replaceable
>nom_opció</replaceable
>=valor</option
></userinput
>. El &kdesrc-build; reconeixerà quan no sàpiga quina és l'opció i cercarà el nom a la seva llista de noms d'opció. Si no reconeix el nom, us avisarà, en cas contrari, recordarà el valor en el qual la vàreu establir i superposarà qualsevol opció des del fitxer de configuració.</para>

<informalexample>
<para
>Establiu l'opció &source-dir; a <filename
>/dev/null</filename
> per a proves:</para>

<screen
><prompt
>&percnt;</prompt
> <userinput
><command
>kdesrc-build</command
> <option
>--pretend</option
> <option
>--<replaceable
>source-dir</replaceable
>=<replaceable
>/dev/null</replaceable
></option
></userinput
>
</screen>

</informalexample>

</sect3>

<sect3 id="changing-module-opts">
<title
>Canviar les opcions dels mòduls</title>
<para
>També és possible canviar les opcions només per a un mòdul específic. La sintaxi és similar a: --<replaceable
>mòdul</replaceable
>,<replaceable
>nom_opció</replaceable
>=<replaceable
>valor</replaceable
>. </para>

<para
>Aquest canvi superposarà qualsevol opció duplicada per al mòdul que es troba al <link linkend="configure-data"
>fitxer de configuració</link
>, i només s'aplicarà mentre es passa l'opció sobre la línia d'ordres.</para>

<informalexample>
<para
>Utilitzant un directori de construcció diferent per al mòdul kdeedu:</para>

<screen
><prompt
>&percnt;</prompt
> <userinput
><command
>kdesrc-build</command
> <option
>--<replaceable
>kdeedu</replaceable
>,<replaceable
>build-dir</replaceable
>=<replaceable
>temp-build</replaceable
></option
></userinput
>
</screen>

</informalexample>

</sect3>

</sect2>

</sect1>

<sect1 id="developer-features">
<title
>Característiques per als desenvolupadors del &kde;</title>

<sect2 id="ssh-agent-reminder">
<title
>Comprovacions de l'agent &ssh;</title>
<para
>El &kdesrc-build; pot garantir que els desenvolupadors del &kde; que utilitzen &ssh; per accedir al repositori de codi font del &kde; no oblidin accidentalment deixar habilitada l'eina Agent &ssh;. Això pot fer que el &kdesrc-build; es pengi indefinidament esperant que el desenvolupador escrigui la contrasenya &ssh;, per la qual cosa, de manera predeterminada el &kdesrc-build; comprovarà si s'està executant l'agent abans de realitzar les actualitzacions del codi font. </para>

<note
><para
>Això només es fa per als desenvolupadors del &kde; que utilitzen &ssh;. Això es deu al fet que de manera predeterminada no es requereix contrasenya per a extreure anònimament. El &subversion; gestionarà les contrasenyes per al segon protocol possible per als desenvolupadors del &kde;, https. </para
></note>

<para
>Possiblement voldreu inhabilitar la comprovació de l'Agent &ssh;, en el cas que el &kdesrc-build; detecti malament la presència d'un agent. Per a inhabilitar la comprovació de l'agent, establiu l'opció «<option
>disable-agent-check</option
>» a «<userinput
>true</userinput
>» (cert).</para>

<informalexample>
<para
>Inhabilitar les comprovacions de l'agent &ssh;:</para>
<screen
>global
  disable-agent-check true
end global
</screen>
</informalexample>

</sect2>

</sect1>

<sect1 id="other-features">
<title
>Altres característiques de &kdesrc-build;</title>

<sect2 id="changing-verbosity">
<title
>Canviar la quantitat de sortida des de &kdesrc-build;</title>
<para
>El &kdesrc-build; té diverses opcions per a controlar la quantitat de sortida que genera l'script. En qualsevol cas, sempre es generaran errors.</para>

<itemizedlist>
<listitem
><para
>L'opció <option
>--quiet</option
> (la forma curta és <option
>-q</option
>) farà que el &kdesrc-build; sigui majoritàriament silenciós. Només es mostraran els missatges importants, avisos o errors. Quan estigui disponible, es mostrarà la informació sobre el progrés de la construcció.</para
></listitem>

<listitem
><para
>L'opció <option
>--really-quiet</option
> (sense forma curta) farà que el &kdesrc-build; només mostri els avisos o errors importants mentre s'està executant.</para
></listitem>

<listitem
><para
>L'opció <option
>--verbose</option
> (la forma curta és <option
>-v</option
>) farà que el &kdesrc-build; sigui molt detallat en la seva sortida.</para
></listitem>

<listitem
><para
>L'opció <option
>--debug</option
> només és per a la finalitat de depuració, farà que el &kdesrc-build; actuï com si estigués activada <option
>--verbose</option
>, farà que les ordres també surtin al terminal i mostrarà la informació de depuració per a moltes funcions.</para
></listitem>
</itemizedlist>

</sect2>

<sect2 id="kdesrc-build-color">
<title
>Sortida amb color</title>
<para
>Quan s'executa des del &konsole; o un terminal diferent, la sortida de &kdesrc-build; normalment es mostrarà en text amb color.</para>

<para
>És possible inhabilitar això utilitzant <option
>--no-color</option
> a la línia d'ordres, o establint l'opció «&colorful-output;» al <link linkend="configure-data"
>fitxer de configuració</link
> a «<userinput
>false</userinput
>» (fals). </para>

<informalexample>
<para
>Inhabilitar la sortida amb color al fitxer de configuració:</para>
<screen
>global
  colorful-output false
end global
</screen>
</informalexample>

</sect2>

<sect2 id="deleting-build-dir">
<title
>Eliminar directoris innecessaris després d'una construcció</title>
<para
>Disposeu de poc espai al disc però encara voleu executar una extracció del &kde; per a la darrera generació? El &kdesrc-build; pot ajudar a reduir l'ús del disc en construir el &kde; des de &subversion;.</para>

<note
><para
>Recordeu que construir el &kde; ocupa molt espai. Hi ha diverses peces principals que utilitzen molt d'espai quan s'utilitza el &kdesrc-build;:</para
></note>

<orderedlist>
<listitem
><para
>L'extracció del codi font real pot ocupar una bona quantitat d'espai. Els mòduls predeterminats ocupen aproximadament 1,6 gigabytes d'espai en el disc. Podreu reduir aquesta quantitat assegurant-vos que només esteu creant tants mòduls com realment voleu. El &kdesrc-build; no suprimirà el codi font del disc, encara que sí que ho farà si suprimiu l'entrada al <link linkend="configure-data"
>fitxer de configuració</link
>, així que assegureu-vos d'anar-hi i suprimiu les extraccions del codi font que no s'empra des del directori de codi font. Recordeu que els fitxers del codi font es descarreguen d'Internet, <emphasis
>no els haureu</emphasis
> de suprimir si en realitat els utilitzeu, almenys fins que acabeu d'utilitzar el &kdesrc-build;.</para>

<para
>A més, si ja té instal·lades les &Qt; per la vostra distribució (i el més probable és que ho feu), probablement no necessitareu instal·lar el mòdul qt. Això reduirà en uns 200 megabytes la mida del codi font en el disc.</para>

<para
>Una cosa a tenir en compte, és que a causa de la manera en què funciona &subversion;: en realitat hi ha dos fitxers en el disc per cada fitxer extret des del repositori. En aquest moment, el &kdesrc-build; no té codi per intentar minimitzar la mida del codi font quan no s'està utilitzant. </para>
</listitem>

<listitem>
<para
>El &kdesrc-build; crearà un directori de construcció separat per a construir el codi font. De vegades, el &kdesrc-build; haurà de copiar un directori de codi font per a crear un directori de construcció fals. Quan succeeix això, s'utilitzaran enllaços simbòlics que estalvien espai, de manera que això no hauria de ser una molèstia en l'espai al disc. El directori de construcció normalment serà molt més gran que el directori de codi font per a un mòdul. Per exemple, el directori de construcció per al kdebase és d'aproximadament 1.050 megabytes, mentre que el codi font del kdebase és de només uns 550 megabytes.</para>

<para
>Afortunadament, el directori de construcció no caldrà una vegada s'hagi compilat i instal·lat correctament un mòdul. El &kdesrc-build; pot eliminar automàticament el directori de construcció després d'instal·lar un mòdul, vegeu els exemples a continuació per obtenir més informació. Recordeu que fer aquest pas farà que sigui impossible que el &kdesrc-build; realitzi construccions incrementals, les quals estalviaran temps.</para>
</listitem>

<listitem
><para
>Finalment, es necessita espai en el disc per a la instal·lació pròpiament dita del &kde;, la qual no s'executarà des del directori de construcció. Aquesta normalment ocupa menys espai que el directori de construcció. No obstant això, és més difícil obtenir xifres exactes. </para
></listitem>
</orderedlist>

<para
>Com es redueixen els requisits d'espai del &kde;? Una manera és utilitzar els indicadors de compilació adequats, per optimitzar la reducció d'espai en lloc de la velocitat. Una altra manera, la qual pot tenir un gran efecte, és eliminar la informació de depuració de la vostra construcció del &kde;. </para>

<warning
><para
>Haureu d'estar molt segur de conèixer el que esteu fent abans de decidir eliminar la informació de depuració. Executar un programari d'última generació vol dir que estareu executant un programari que és molt més probable que es bloquegi que una versió estable. Si utilitzeu programari sense la informació de depuració, podria ser molt difícil crear un bon informe d'error per a resoldre-ho, i és probable que hàgiu de tornar a habilitar la informació de depuració per a l'aplicació afectada i reconstruir-la per ajudar a un desenvolupador a solucionar el bloqueig. Per tant, elimineu la informació de depuració sota el vostre propi risc. </para
></warning>

<informalexample>
<para
>Elimineu el directori de construcció després de la instal·lació d'un mòdul. El directori del codi font encara es mantindrà i la depuració estarà habilitada:</para>

<screen
>global
  configure-flags      --enable-debug
  remove-after-install builddir        # Elimina el directori de construcció després d'instal·lar
end global
</screen>

<para
>Elimineu el directori de construcció després de la instal·lació, sense la informació de depuració i amb optimització de la mida.</para>

<screen
>global
  cxxflags             -Os             # Optimitza per a la mida
  configure-flags      --disable-debug
  remove-after-install builddir        # Elimina el directori de construcció després d'instal·lar
end global
</screen>
</informalexample>
</sect2>

</sect1>

</chapter>

<chapter id="kde-cmake">
<title
>&cmake;, el sistema de construcció del &kde;</title>

<sect1 id="kde-cmake-intro">
<title
>Introducció al &cmake;</title>

<para
>El març de 2006, el programa &cmake; va vèncer a diversos competidors i va ser seleccionat per a ser el sistema de construcció del &kde; 4, en substitució del sistema basat en autotools que emprava el &kde; des del començament.</para>

<para
>Hi ha disponible una introducció a la pàgina &cmake; <ulink url="https://community.kde.org/Guidelines_HOWTOs/CMake"
>al wiki de la comunitat &kde;</ulink
>. Bàsicament, en lloc d'executar <userinput
><command
>make</command
> <option
>-f</option
> <filename
>Makefile.cvs</filename
></userinput
>, després <command
>configure</command
>, després &make;, ara simplement executem &cmake; i després &make;. </para>

<para
>El &kdesrc-build; admet el &cmake;. Algunes característiques de &kdesrc-build; eren en realitat característiques del sistema de construcció subjacent, incloent-hi «<link linkend="conf-configure-flags"
>configure-flags</link
>» i «<link linkend="conf-do-not-compile"
>do-not-compile</link
>». Quan hi ha característiques equivalents disponibles, es proporcionen. Per exemple, l'equivalent a l'opció «configure-flags» és «<link linkend="conf-cmake-options"
>cmake-options</link
>», i l'opció «<link linkend="conf-do-not-compile"
>do-not-compile</link
>» també està admesa pel &cmake; a partir de &kdesrc-build; versió 1.6.3. </para>

</sect1>
</chapter>

<chapter id="credits-and-license">
<title
>Crèdits i llicència</title>

<para
>Traductor de la documentació: &credits.Antoni.Bella;</para
> &underFDL; </chapter>

<appendix id="appendix-modules">
<title
>Mòduls del &kde; i organització del codi font</title>
<sect1 id="module-concept">
<title
>El <quote
>Mòdul</quote
></title>

<para
>El &kde; agrupa el seu programari en <quote
>mòduls</quote
> de diverses mides. Inicialment, aquesta era una agrupació flexible d'alguns mòduls grans, però amb la introducció dels <ulink url="https://commits.kde.org/"
>repositoris de codi font</ulink
> basats en <ulink url="https://git-scm.com/"
>Git</ulink
>, aquests mòduls grans es van dividir encara més en molts mòduls més petits. </para>

<para
>El &kdesrc-build; també utilitza aquest concepte de mòdul. En essència, un <quote
>mòdul</quote
> és una agrupació de codi que es pot descarregar, construir, provar i instal·lar. </para>

<sect2 id="single-modules">
<title
>Mòduls individuals</title>

<para
>És fàcil establir el &kdesrc-build; per a construir un sol mòdul. La següent llista és un exemple de com es veuria una declaració per a un mòdul basat en Subversion al <link linkend="kdesrc-buildrc"
>fitxer de configuració</link
>.</para>

<programlisting
>module <replaceable
>kdefoo</replaceable>
    <option
><replaceable
>cmake-options -DCMAKE_BUILD_TYPE=Debug</replaceable
></option>
end module
</programlisting>

<tip
><para
>Aquest és un mòdul basat en Subversion, ja que no utilitza una opció «<link linkend="conf-repository"
>repository</link
>». A més, l'opció «<option
>cmake-options</option
>» només es llista com un exemple, no és obligatòria.</para
></tip>

</sect2>
<sect2 id="module-groups">
<title
>Grups de mòduls relacionats</title>

<para
>Ara, la majoria dels mòduls de codi font del &kde; estan basats en Git, i normalment es combinen en grups de mòduls.</para>

<para
>Per tant, el &kdesrc-build; també admet grups de mòduls, utilitzant <link linkend="module-sets"
>conjunts de mòduls («module-set»)</link
>. Un exemple:</para>

<programlisting
>module-set <replaceable
>mòduls_base</replaceable>
    <option
>repository</option
> kde-projects
    <option
>use-modules</option
> <replaceable
>kde-runtime kde-workspace kde-baseapps</replaceable>
end module-set
</programlisting>

<tip
><para
>Si voleu, podeu deixar el nom del conjunt de mòduls (<replaceable
>mòduls_base</replaceable
>) buit. Aquesta opció «<option
>repository</option
>» li diu al &kdesrc-build; des d'on descarregar el codi font, però també podeu utilitzar un URL <symbol
>git://</symbol
>.</para
></tip>

<para
>Una característica especial del <quote
><option
>repository</option
> <literal
>kde-projects</literal
></quote
> és que el &kdesrc-build; inclourà automàticament qualsevol mòdul de Git que s'agrupi sota els mòduls que llisteu (a la base de dades del Projecte &kde;).</para>
</sect2>

<sect2 id="module-branch-groups">
<title
>Mòduls <quote
>branch-group</quote
></title>

<para
>Portant el concepte d'un «<link linkend="module-groups"
>branch-group</link
>» més enllà, els desenvolupadors del &kde; finalment van descobrir que sincronitzar els noms de les branques a Git en un gran nombre de repositoris s'estava tornant difícil, especialment durant l'impuls de desenvolupament per als nous Frameworks del &kde; per a les &Qt; 5. </para>

<para
>Per tant, es va desenvolupar el concepte dels <quote
>branch-group</quote
>, per a permetre als usuaris i desenvolupadors seleccionar només uns quants grups, i permetre que l'script seleccioni automàticament la branca Git adequada. </para>

<para
>El &kdesrc-build; admet aquesta característica a partir de la versió 1.16-pre2, a través de l'opció «<link linkend="conf-branch-group"
>branch-group</link
>». </para>

<example id="ex-branch-group">
<title
>Exemple d'ús de «branch-group»</title>

<para
>«branch-group» es pot utilitzar al fitxer de configuració de la següent manera: </para>

<programlisting
>global
    # Selecciona els Frameworks 5 del KDE i altres aplicacions basades en les Qt5
    <option
>branch-group</option
> <replaceable
>kf5-qt5</replaceable>

    # Les altres opcions globals van aquí...
end global

module-set
    # «branch-group» només funciona per a «kde-projects»
    <option
>repository</option
> kde-projects

    # «branch-group» s'hereta del conjunt global, però es pot especificar
    # aquí.

    <option
>use-modules</option
> <replaceable
>kdelibs kde-workspace</replaceable>
end module-set

# La branca del kdelibs serà «frameworks»
# La branca del kde-workspace serà «master» (l'agost de 2013)
</programlisting>

<para
>En aquest cas, el mateix «<literal
>branch-group</literal
>» proporciona diferents noms de branca per a cada mòdul Git. </para>
</example>

<para
>Aquesta característica requereix algunes dades mantingudes pels desenvolupadors del &kde; en un repositori de Git anomenat «<literal
>kde-build-metadata</literal
>», però aquest mòdul serà inclòs automàticament pel &kdesrc-build; (encara que veureu que apareix a la sortida de l'script). </para>

<tip
><para
>Els mòduls del &kde; que no tenen establert un nom de branca per al grup de branques que trieu, tindran el nom de la branca adequada, com si no haguéssiu especificat cap «<literal
>branch-group</literal
>». </para
></tip>

</sect2>

</sect1>
</appendix>

<appendix id="appendix-profile">
<title
>Procediments en la configuració del perfil substituït</title>

<sect1 id="old-profile-setup">
<title
>Configurar un perfil d'inici de sessió del &kde;</title>

<para
>Aquestes instruccions cobreixen com configurar el perfil requerit per a garantir que l'ordinador podrà iniciar la sessió en l'escriptori &plasma; del &kde; acabat de construir. Normalment, el &kdesrc-build; intentarà fer-ho automàticament (vegeu <xref linkend="session-driver"/>). Aquesta secció de l'apèndix pot ser útil per a aquells que no poden utilitzar la implementació de &kdesrc-build; per a la configuració del perfil d'inici de sessió. No obstant això, les instruccions poden no estar sempre actualitzades, també podria ser útil consultar el fitxer <filename
>kde-env-master.sh</filename
> inclòs amb el codi font de &kdesrc-build;.</para>

<sect2 id="changing-profile">
<title
>Canviar la configuració del perfil d'inici</title>

<important
><para
>El <filename
>.bash_profile</filename
> és el fitxer de configuració per a l'inici de sessió per al popular intèrpret d'ordres <application
>bash</application
>, utilitzat per moltes distribucions de &Linux;. Si utilitzeu un intèrpret d'ordres diferent, possiblement haureu d'ajustar les mostres que es proporcionen en aquesta secció per al vostre intèrpret d'ordres en particular.</para
></important>

<para
>Obriu o creeu el fitxer <filename
>.bash_profile</filename
> en el directori d'inici amb el vostre editor favorit i afegiu-lo al final del fitxer: Si esteu creant el mòdul qt (en el mode predeterminat), en el seu lloc afegiu: <programlisting>
QTDIR=(camí al «qtdir»)   # De manera predeterminada ~/kdesrc/build/qt.
KDEDIR=(camí al «kdedir») # De manera predeterminada ~/kde.
KDEDIRS=$KDEDIR
PATH=$KDEDIR/bin:$QTDIR/bin:$PATH
MANPATH=$QTDIR/doc/man:$MANPATH

# Actua adequadament si encara no s'ha establert la LD_LIBRARY_PATH.
if [ -z $LD_LIBRARY_PATH ]; then
  LD_LIBRARY_PATH=$KDEDIR/lib:$QTDIR/lib
else
  LD_LIBRARY_PATH=$KDEDIR/lib:$QTDIR/lib:$LD_LIBRARY_PATH
fi

export QTDIR KDEDIRS PATH MANPATH LD_LIBRARY_PATH
</programlisting
> o, si no esteu construint qt (i, en el seu lloc, esteu utilitzant les &Qt; del vostre sistema), afegiu això en el seu lloc: <programlisting
>KDEDIR=(camí al «kdedir»)  # De manera predeterminada ~/kde.
KDEDIRS=$KDEDIR
PATH=$KDEDIR/bin:$QTDIR/bin:$PATH

# Actua de manera adequada si encara no s'ha establert LD_LIBRARY_PATH.
if [ -z $LD_LIBRARY_PATH ]; then
  LD_LIBRARY_PATH=$KDEDIR/lib
else
  LD_LIBRARY_PATH=$KDEDIR/lib:$LD_LIBRARY_PATH
fi

export KDEDIRS PATH LD_LIBRARY_PATH
</programlisting>
</para>

<para
>Si no utilitzeu un usuari dedicat, establiu una $<envar
>KDEHOME</envar
> diferent per al nou entorn al <filename
>.bash_profile</filename
>: <programlisting
>export KDEHOME="${HOME}/.kde-svn"

# Crea si cal
[ ! -e ~/.kde-svn ] &amp;&amp; mkdir ~/.kde-svn
</programlisting>
</para>

<note>
<para
>Si més tard, el Menú K està buit o massa ple d'aplicacions de la distribució, possiblement caldrà establir les variables d'entorn <acronym
>XDG</acronym
> al <filename
>.bash_profile</filename
>: <programlisting
>XDG_CONFIG_DIRS="/etc/xdg"
XDG_DATA_DIRS="${KDEDIR}/share:/usr/share"
export XDG_CONFIG_DIRS XDG_DATA_DIRS
</programlisting>

</para>
</note>

</sect2>
<sect2 id="starting-kde">
<title
>Iniciar el &kde;</title>

<para
>Ara que ha ajustat les opcions de l'entorn per utilitzar el &kde; correcte, és important assegurar-vos que també s'utilitzi l'script d'inici correcte. </para>

<para
>Obriu el fitxer de text <filename
>.xinitrc</filename
> des del directori d'inici o si cal, creeu-lo. Afegiu la línia: <programlisting
><command
>exec</command
> <option
>${KDEDIR}/bin/startkde</option
>
</programlisting>
</para>

<important
><para
>En algunes distribucions, podria ser necessari realitzar els mateixos passos amb el fitxer <filename
>.xsession</filename
>, també en el directori d'inici. Això és especialment cert quan s'utilitzen gestors d'inici de sessió gràfics com el &kdm;, <application
>gdm</application
> o <application
>xdm</application
>.</para>
</important>

<para
>Ara inicieu el nou &kde;: en els sistemes &BSD; i &Linux; amb suport de terminal virtual, s'utilitzen les dreceres <keycombo action="simul"
>&Ctrl;&Alt;<keycap
>F1</keycap
></keycombo
> «...» <keycombo action="simul"
>&Ctrl;&Alt;<keycap
>F12</keycap
></keycombo
> per a canviar des de la consola virtual 1 fins a la 12. Això permet executar més d'un entorn d'escriptori alhora. Els primers sis són terminals de text i els següents 6 són pantalles gràfiques. </para>

<para
>Si quan inicieu l'ordinador, se us presentarà el gestor de la pantalla gràfica, podreu utilitzar el nou entorn &kde;, encara que no apareixerà com una opció. La majoria dels gestors de la pantalla, inclòs el &kdm;, tenen l'opció d'utilitzar una <quote
>Sessió personalitzada</quote
> en iniciar la sessió. Amb aquesta opció, la configuració de la sessió es carregarà des del fitxer <filename
>.xsession</filename
> que hi ha al directori d'inici. Si ja heu modificat aquest fitxer com s'ha descrit anteriorment, aquesta opció hauria de carregar en la vostra nova instal·lació del &kde;. </para>

<para
>Si no és així, hi ha alguna cosa més que podreu provar que normalment hauria de funcionar: premeu <keycombo action="simul"
>&Ctrl;&Alt;<keycap
>F2</keycap
></keycombo
>, i se us presentarà un terminal de text. Inicieu la sessió amb l'usuari dedicat i escriviu: </para>

<screen
><command
>startx</command
> <option
>--</option
> <option
>:1</option
>
</screen>

<tip>
<para
>Podeu executar el &kde; des del codi font i l'antic &kde; alhora! Inicieu la sessió amb l'usuari habitual, inicieu l'escriptori estable del &kde;. Premeu <keycombo action="simul"
>&Ctrl;&Alt;<keycap
>F2</keycap
></keycombo
> (o <keycap
>F1</keycap
>, <keycap
>F3</keycap
>, &etc;) i se us presentarà un terminal de text. Inicieu la sessió amb l'usuari dedicat de &subversion; per al &kde; i escriviu:</para>

<screen
><command
>startx</command
> <option
>--</option
> <option
>:1</option
>
</screen>

<para
>Podreu tornar a l'escriptori &kde; del vostre usuari habitual prement la drecera per a l'escriptori que ja esteu executant. Aquesta normalment serà <keycombo action="simul"
>&Ctrl;&Alt;<keycap
>F7</keycap
></keycombo
>, possiblement caldrà utilitzar <keycap
>F6</keycap
> o <keycap
>F8</keycap
> en el seu lloc. Per tornar al &kde; compilat amb el &kdesrc-build;, utilitzareu la mateixa seqüència, excepte amb la tecla de funció. Per exemple, si necessiteu introduir <keycombo action="simul"
>&Ctrl;&Alt;<keycap
>F7</keycap
></keycombo
> per canviar al &kde; normal, haureu d'introduir <keycombo action="simul"
>&Ctrl;&Alt;<keycap
>F8</keycap
></keycombo
> per tornar al &kde; de &kdesrc-build;.</para>
</tip>

</sect2>
</sect1>

</appendix>
</book>
